---
title: Turbopack
description: TurbopackはRustで記述された、JavaScriptおよびTypeScriptに最適化されたインクリメンタルバンドラーで、Next.jsに組み込まれています。
---

[Turbopack](https://turbo.build/pack) (ベータ版)は、Rustで記述された、JavaScriptおよびTypeScriptに最適化されたインクリメンタルバンドラーで、Next.jsに組み込まれています。

## 使用方法

TurbopackはNext.jsの`pages`ディレクトリと`app`ディレクトリの両方で使用可能で、ローカル開発をより高速化します。Turbopackを有効にするには、Next.jsの開発サーバー実行時に`--turbo`フラグを使用します。

```json filename="package.json" highlight={3}
{
  "scripts": {
    "dev": "next dev --turbo",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  }
}
```

## サポートされている機能

Next.jsのTurbopackは、ほとんどのユーザーに対してゼロコンフィギュレーションで動作し、より高度なユースケースに対して拡張することができます。現在サポートされている機能の詳細については、[APIリファレンス](/docs/app/api-reference/next-config-js/turbo)をご覧ください。

## サポートされていない機能

Turbopackは現在、`next dev`のみをサポートし、`next build`はサポートしていません。今後、安定化に向けてビルドのサポートを進めています。

以下の機能は現在サポートされていません：

- Turbopackは[Lightning CSS](https://lightningcss.dev/)を利用していますが、一部の利用頻度の低いCSS Modules機能をサポートしていません
  - `:local`および`:global`が単独の擬似クラスとしてはサポートされていません。関数型のみサポートされており、例：`:global(a)`
  - @value規則はCSS変数により置き換えられています
  - `:import`および`:export`のICSS規則
- `//`のような[無効なCSSコメント構文](https://stackoverflow.com/questions/51843506/are-double-slash-comments-valid-in-css)
  - CSSコメントは仕様に基づき`/* comment */`として記述する必要があります
  - Sassなどのプリプロセッサはこの代替のコメント構文をサポートしています
- `next.config.js`での[`webpack()`](/docs/app/api-reference/next-config-js/webpack)設定
  - TurbopackはWebpackを置き換えるため、webpackの設定はサポートされていません
  - Turbopackを設定するために、[ドキュメントをご覧ください](/docs/app/api-reference/next-config-js/turbo)
  - 一部の[Webpackローダー](/docs/app/api-reference/next-config-js/turbo#webpack-loaders)はTurbopackでサポートされています
- Babel (`.babelrc`)
  - Turbopackはすべてのトランスパイルと最適化に[SWC](/docs/architecture/nextjs-compiler#why-swc)コンパイラを使用します。これはデフォルトでBabelが含まれていないことを意味します。
  - `.babelrc`ファイルがある場合、特定のユースケースがカバーされているかどうか確認した後はBabelを使用する必要がないかもしれません。Next.jsは共通のBabelプラグインをSWC変換として有効化することができます。詳細については、[コンパイラのドキュメント](docs/architecture/nextjs-compiler#supported-features)を参照してください。
  - 特定のユースケースがカバーされていないことを確認した後もBabelを使用する必要がある場合は、Turbopackの[カスタムwebpackローダーのサポート](/docs/app/api-reference/next-config-js/turbo#webpack-loaders)を利用して`babel-loader`を含めることができます
- App Routerでのルートレイアウトの自動作成
  - この動作は現在、入力ファイルを変更するためサポートされていません。代わりに、エラーが表示され、所望の場所に手動でルートレイアウトを追加するよう指示されます
- `@next/font`（旧フォントサポート）
  - `@next/font`は`next/font`に取って代わられており、[`next/font`](/docs/app/building-your-application/optimizing/fonts)はTurbopackで完全にサポートされています
- [Relay transforms](/docs/architecture/nextjs-compiler#relay)
  - 将来的にこれを実装する予定です
- `pages/_document.tsx`での`.css`インポートのブロック
  - 現在Webpackを使用して、Next.jsは`pages/_document.tsx`での`.css`ファイルのインポートをブロックしています
  - 将来的にこの警告を実装する予定です
- [`experimental.typedRoutes](https://nextjs.org/docs/app/api-reference/next-config-js/typedRoutes)
  - 将来的にこれを実装する予定です
- `experimental.nextScriptWorkers`
  - 将来的にこれを実装する予定です
- `experimental.sri.algorithm`
  - 将来的にこれを実装する予定です
- `experimental.fallbackNodePolyfills`
  - 将来的にこれを実装する予定です
- `experimental.esmExternals`
  - 現在、Turbopackを使用したNext.jsでのレガシーesmExternals設定をサポートする予定はありません
- [AMP](/docs/pages/building-your-application/configuring/amp)。
  - 現在、Turbopackを使用したNext.jsでAMPをサポートする予定はありません
- Yarn PnP
  - 現在、Turbopackを使用したNext.jsでYarn PnPをサポートする予定はありません
- [`experimental.urlImports`](/docs/app/api-reference/next-config-js/urlImports)
  - 現在、Turbopackを使用したNext.jsで`experimental.urlImports`をサポートする予定はありません
- [`:import`および`:export`のICSSルール](https://github.com/css-modules/icss)
  - 現在、Turbopackを使用したNext.jsで`:import`および`:export`ICSSルールをサポートする予定はありません。Turbopackが使用するCSSパーサである[Lightning CSS](https://lightningcss.dev/css-modules.html)はこれらのルールをサポートしていません。
- エッジランタイムでの`unstable_allowDynamic`設定

## トレースファイルの生成

トレースファイルは、Next.jsチームがパフォーマンス指標とメモリ使用量を調査し、改善するのに役立ちます。トレースファイルを生成するには、`next dev --turbo`コマンドに`NEXT_TURBOPACK_TRACING=1`を追加してください。これにより、`.next/trace.log`ファイルが生成されます。

Turbopackのパフォーマンスとメモリ使用量に関連する問題を報告する場合は、トレースファイルを[GitHub](https://github.com/vercel/next.js)の問題に含めてください。