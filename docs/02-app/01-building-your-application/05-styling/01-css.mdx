---
title: 'CSS'
nav_title: 'CSS'
description: 'CSS Modulesやグローバルスタイル、外部スタイルシートでNext.jsアプリケーションにスタイルを適用します。'
---

{/* このドキュメントの内容はapp routerとpages routerの間で共有されています。Pages Routerに特化したコンテンツを追加するには、<PagesOnly>Content</PagesOnly>コンポーネントを使用できます。共有コンテンツはコンポーネントでラップしないでください。 */}

<PagesOnly>

<details open>
  <summary>例</summary>

- [基本的なCSSの例](https://github.com/vercel/next.js/tree/canary/examples/basic-css)

</details>

</PagesOnly>

Next.jsは以下を含む複数の方法でCSSを扱うことをサポートしています：

- [CSS Modules](#css-modules)
- [グローバルスタイル](#global-styles)
- [外部スタイルシート](#external-stylesheets)

## CSS Modules

Next.jsは`.module.css`拡張子を使用してCSS Modulesをサポートしています。

CSS Modulesはユニークなクラス名を自動的に生成することでCSSをローカルスコープ化します。これにより異なるファイルで同じクラス名を衝突を気にせず使用できます。この動作により、CSS ModulesはコンポーネントレベルのCSSを含めるのに理想的です。

### 例

<AppOnly>
CSS Modulesは`app`ディレクトリ内の任意のファイルにインポートできます：

```tsx filename="app/dashboard/layout.tsx" switcher
import styles from './styles.module.css'

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return <section className={styles.dashboard}>{children}</section>
}
```

```jsx filename="app/dashboard/layout.js" switcher
import styles from './styles.module.css'

export default function DashboardLayout({ children }) {
  return <section className={styles.dashboard}>{children}</section>
}
```

```css filename="app/dashboard/styles.module.css"
.dashboard {
  padding: 24px;
}
```

</AppOnly>

<PagesOnly>

例えば、`components/`フォルダに再利用可能な`Button`コンポーネントを考えてみましょう：

まず、`components/Button.module.css`を次の内容で作成します：

```css filename="Button.module.css"
/*
.error {}が他の `.css` や `.module.css` ファイルと衝突する心配はありません！
*/
.error {
  color: white;
  background-color: red;
}
```

次に、上記のCSSファイルをインポートして使用する`components/Button.js`を作成します：

```jsx filename="components/Button.js"
import styles from './Button.module.css'

export function Button() {
  return (
    <button
      type="button"
      // "error"クラスはインポートされた`styles`オブジェクトのプロパティとしてアクセスされます。
      className={styles.error}
    >
      Destroy
    </button>
  )
}
```

</PagesOnly>

CSS Modulesは**`.module.css`や`.module.sass`の拡張子を持つファイルにのみ有効です**。

プロダクションでは、すべてのCSS Moduleファイルは自動的に**多くのミニファイされコード分割された**`.css`ファイルに結合されます。
これらの`.css`ファイルはアプリケーションのホット実行パスを表しており、アプリケーションが描画するのに必要な最小限のCSSがロードされることを保証します。

## グローバルスタイル

<AppOnly>
グローバルスタイルは`app`ディレクトリ内の任意のレイアウト、ページ、またはコンポーネントにインポートできます。

> **Good to know**:
>
> - これは`pages`ディレクトリとは異なり、グローバルスタイルをインポートできるのは`_app.js`ファイル内のみです。
> - Next.jsは、グローバルスタイルが実際にグローバルである場合にのみ使用をサポートします。つまり、すべてのページに適用でき、アプリケーションの存続期間中存在できることを意味します。これはNext.jsがReactの組み込みスタイルシートサポートを使用してSuspenseと統合しているためです。この組み込みサポートは、ルート間を移動する際にスタイルシートを削除しません。このため、グローバルスタイルよりもCSS Modulesを使用することをお勧めします。

例えば、`app/global.css`という名前のスタイルシートを考えてみましょう：

```css filename="app/global.css"
body {
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
```

rootレイアウト（`app/layout.js`）内で`global.css`スタイルシートをインポートし、アプリケーション内のすべてのルートにスタイルを適用します：

```tsx filename="app/layout.tsx" switcher
// これらのスタイルはアプリケーションのすべてのルートに適用されます
import './global.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

```jsx filename="app/layout.js" switcher
// これらのスタイルはアプリケーションのすべてのルートに適用されます
import './global.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</AppOnly>

<PagesOnly>

スタイルシートをアプリケーションに追加するには、`pages/_app.js`内にこのCSSファイルをインポートします。

例えば、次のような`styles.css`という名前のスタイルシートを考えてみましょう：

```css filename="styles.css"
body {
  font-family: 'SF Pro Text', 'SF Pro Icons', 'Helvetica Neue', 'Helvetica',
    'Arial', sans-serif;
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
```

まだ存在していない場合は[`pages/_app.js`ファイル](/docs/pages/building-your-application/routing/custom-app)を作成します。
次に、`styles.css`ファイルを[`import`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import)します。

```jsx filename="pages/_app.js"
import '../styles.css'

// このデフォルトエクスポートは新しい`pages/_app.js`ファイルに必要です。
export default function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

これらの`styles.css`はアプリケーションのすべてのページやコンポーネントに適用されます。
スタイルシートのグローバルな性質と衝突を避けるために、**[`pages/_app.js`](/docs/pages/building-your-application/routing/custom-app)内でのみインポートしてください**。

開発段階では、スタイルシートをこのように表現することで、スタイルの編集時にホットリロードされ、アプリケーションの状態を保持できます。

プロダクションでは、すべてのCSSファイルは自動的に単一のミニファイされた`.css`ファイルに結合されます。CSSの結合順序は、CSSが`_app.js`ファイルにインポートされる順序と一致します。独自のCSSを持つインポートされたJSモジュールには特に注意が必要で、JSモジュールのCSSはインポートされたCSSファイルと同じ順序のルールに従って結合されます。例えば：

```jsx
import '../styles.css'
// ErrorBoundaryのCSSはstyles.css内のグローバルCSSに依存しているため、styles.cssの後にインポートします。
import ErrorBoundary from '../components/ErrorBoundary'

export default function MyApp({ Component, pageProps }) {
  return (
    <ErrorBoundary>
      <Component {...pageProps} />
    </ErrorBoundary>
  )
}
```

</PagesOnly>

## 外部スタイルシート

<AppOnly>

外部パッケージによって公開されたスタイルシートは、`app`ディレクトリ内のどこにでもインポートできます。これには、協調されたコンポーネントも含まれます：

```tsx filename="app/layout.tsx" switcher
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
```

```jsx filename="app/layout.js" switcher
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
```

> **Good to know**: 外部のスタイルシートはnpmパッケージから直接インポートするか、あなたのコードベースと協調してダウンロードする必要があります。 `<link rel="stylesheet" />`を使用することはできません。

</AppOnly>

<PagesOnly>

Next.jsでは、JavaScriptファイルからCSSファイルをインポートできます。
これは、Next.jsがJavaScript以外の[`import`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import)の概念を拡張しているため、可能です。

### `node_modules`からスタイルをインポート

Next.js **9.5.4**以降、アプリケーション内のどこからでも`node_modules`からCSSファイルをインポートすることが許可されています。

`bootstrap`や`nprogress`のようなグローバルなスタイルシートの場合、そのファイルは`pages/_app.js`内でインポートする必要があります。
例：

```jsx filename="pages/_app.js"
import 'bootstrap/dist/css/bootstrap.css'

export default function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

サードパーティコンポーネントによって必要なCSSをインポートする場合は、コンポーネント内で行うことができます。例：

```jsx filename="components/example-dialog.js"
import { useState } from 'react'
import { Dialog } from '@reach/dialog'
import VisuallyHidden from '@reach/visually-hidden'
import '@reach/dialog/styles.css'

function ExampleDialog(props) {
  const [showDialog, setShowDialog] = useState(false)
  const open = () => setShowDialog(true)
  const close = () => setShowDialog(false)

  return (
    <div>
      <button onClick={open}>Open Dialog</button>
      <Dialog isOpen={showDialog} onDismiss={close}>
        <button className="close-button" onClick={close}>
          <VisuallyHidden>Close</VisuallyHidden>
          <span aria-hidden>×</span>
        </button>
        <p>Hello there. I am a dialog</p>
      </Dialog>
    </div>
  )
}
```

</PagesOnly>

<AppOnly>

## 順序と結合

Next.jsはプロダクションビルド中にスタイルシートを自動でチャンク（結合）することによってCSSを最適化します。CSSの順序は、スタイルシートをアプリケーションコードにインポートする順序によって決まります。

例えば、`<BaseButton>`が`<Page>`で最初にインポートされるため、`base-button.module.css`は`page.module.css`の前に位置付けられます：

```tsx filename="base-button.tsx" switcher
import styles from './base-button.module.css'

export function BaseButton() {
  return <button className={styles.primary} />
}
```

```jsx filename="base-button.js" switcher
import styles from './base-button.module.css'

export function BaseButton() {
  return <button className={styles.primary} />
}
```

```tsx filename="page.ts" switcher
import { BaseButton } from './base-button'
import styles from './page.module.css'

export function Page() {
  return <BaseButton className={styles.primary} />
}
```

```jsx filename="page.js" switcher
import { BaseButton } from './base-button'
import styles from './page.module.css'

export function Page() {
  return <BaseButton className={styles.primary} />
}
```

予測可能な順序を維持するため、次のことを推奨します：

- 単一のJS/TSファイルにCSSファイルをインポートする。
  - グローバルクラス名を使用する場合、同じファイルでグローバルスタイルをインポートし、適用したい順序でインポートします。
- グローバルスタイルよりもCSS Modulesを優先する。
  - CSSモジュールに一貫した命名規則を使用する。例えば、`<name>.tsx`よりも`<name>.module.css`を使用する。
- 共有スタイルを別の共有コンポーネントに抽出する。
- [Tailwind](/docs/app/building-your-application/styling/tailwind-css)を使用する場合は、ファイルの先頭、できれば[Root Layout](/docs/app/building-your-application/routing/layouts-and-templates#root-layout-required)内でスタイルシートをインポートする。
- 自動的にインポートを並べ替えるリント/フォーマッター（例：ESLintの[`sort-import`](https://eslint.org/docs/latest/rules/sort-imports)）をオフにする。インポート順序がCSSに影響を与えることがあるためです。

> **Good to know:**
>
> - 開発モードではCSSの順序が異なる動作をする場合があるので、最終的なCSSの順序を確認するためにビルド（`next build`）を確認してください。
> - CSSのチャンクを制御するために、`next.config.js`で[`cssChunking`](/docs/app/api-reference/next-config-js/cssChunking)オプションを使用できます。

</AppOnly>

## 追加機能

Next.jsは、スタイルを追加する際のエクスペリエンスを向上させるための追加機能を含んでいます：

- `next dev`でローカル実行中は、ローカルスタイルシート（グローバルおよびCSS Modulesのいずれも）が[Fast Refresh](/docs/architecture/fast-refresh)を利用して、編集が保存される際にすぐに反映されます。
- プロダクション用にビルドする際には、`next build`でCSSファイルがより少ないミニファイされた`.css`ファイルにまとめられ、スタイルを取得するためのネットワークリクエスト数が削減されます。
- JavaScriptを無効にした場合でも、プロダクションビルドではスタイルが読み込まれます（`next start`）。ただし、[Fast Refresh](/docs/architecture/fast-refresh)を有効にするためには`next dev`でJavaScriptが必要です。