---
title: 'App Router Incremental Adoption Guide'
nav_title: 'App Router Migration'
description: 'æ—¢å­˜ã® Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Pages Router ã‹ã‚‰ App Router ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚'
---

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’è¡Œã„ã¾ã™ï¼š

- [Next.js ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 12 ã‹ã‚‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 13 ã«æ›´æ–°ã™ã‚‹](#nextjs-version)
- [`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸¡æ–¹ã§å‹•ä½œã™ã‚‹æ©Ÿèƒ½ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹](#upgrading-new-features)
- [æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ®µéšçš„ã« `pages` ã‹ã‚‰ `app` ã«ç§»è¡Œã™ã‚‹](#migrating-from-pages-to-app)

## ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ {#upgrading}

### Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ {#node-js-version}

æœ€ä½é™å¿…è¦ãª Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ **v18.17** ã§ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€[Node.js ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nodejs.org/docs/latest-v18.x/api/)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### Next.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ {#next-js-version}

Next.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ 13 ã«æ›´æ–°ã™ã‚‹ã«ã¯ã€ãŠå¥½ã¿ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’ä½¿ç”¨ã—ã¦æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash title="Terminal"
npm install next@latest react@latest react-dom@latest
```

### ESLintãƒãƒ¼ã‚¸ãƒ§ãƒ³ {#eslint-version}

ESLint ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€ESLint ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```bash title="Terminal"
npm install -D eslint-config-next@latest
```

> **Good to know**: VS Code ã§ ESLint ã®å¤‰æ›´ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ESLint ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ (`cmd+shift+p` on Mac; `ctrl+shift+p` on Windows)ã‚’é–‹ãã€`ESLint: Restart ESLint Server` ã¨æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— {#next-steps}

æ›´æ–°å¾Œã¯ã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã‚“ã§ãã ã•ã„ï¼š

- [æ–°ã—ã„æ©Ÿèƒ½ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹](#upgrading-new-features): æ”¹å–„ã•ã‚ŒãŸ Image ãŠã‚ˆã³ Link ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãªã©ã®æ–°ã—ã„æ©Ÿèƒ½ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰
- [`pages` ã‹ã‚‰ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ç§»è¡Œ](#migrating-from-pages-to-app): `pages` ã‹ã‚‰ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸æ®µéšçš„ã«ç§»è¡Œã™ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## æ–°ã—ã„æ©Ÿèƒ½ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ {#upgrading-new-features}

Next.js 13 ã¯æ–°ã—ã„ç‰¹å¾´ã¨è¦ç´„ã‚’å‚™ãˆãŸæ–°ã—ã„ [App Router](/docs/app/building-your-application/routing) ã‚’å°å…¥ã—ã¾ã—ãŸã€‚æ–°ã—ã„ Router ã¯ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã‚ã‚Šã€`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨å…±å­˜ã—ã¾ã™ã€‚

Next.js 13 ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯ã€æ–°ã—ã„ [App Router](/docs/app/building-your-application/routing#the-app-router) ã®ä½¿ç”¨ã‚’è¦æ±‚ã—ã¾ã›ã‚“ã€‚`pages` ã¨ `app` ã®ä¸¡æ–¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å‹•ä½œã™ã‚‹æ–°ã—ã„æ©Ÿèƒ½ã€ä¾‹ãˆã°æ›´æ–°ã•ã‚ŒãŸ [Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](#image-component)ã€[Link ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](#link-component)ã€[Script ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](#script-component)ã€ãŠã‚ˆã³ [ãƒ•ã‚©ãƒ³ãƒˆã®æœ€é©åŒ–](#font-optimization) ã‚’åˆ©ç”¨ã—ç¶šã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

### `<Image/>` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ {#image-component}

Next.js 12 ã¯ã€`next/future/image` ã¨ã„ã†ä¸€æ™‚çš„ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ã¦ Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ”¹å–„ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã® JavaScript é‡ã®å‰Šæ¸›ã€ç”»åƒã‚’æ‹¡å¼µã—ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å½“ã¦ã‚„ã™ããªã‚‹æ–¹æ³•ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Šã€ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã®é…å»¶èª­ã¿è¾¼ã¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã—ãŸã€‚

ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 13 ã§ã¯ã€ã“ã®æ–°ã—ã„å‹•ä½œãŒ `next/image` ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã‚‹ã€‚

æ–°ã—ã„ Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®ç§»è¡Œã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ã€äºŒã¤ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ï¼š

- [**`next-image-to-legacy-image` ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«**](/docs/app/building-your-application/upgrading/codemods#next-image-to-legacy-image)ï¼š`next/image` ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å®‰å…¨ã«è‡ªå‹•ã§ `next/legacy/image` ã«ãƒªãƒãƒ¼ãƒ ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šæ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯åŒã˜å‹•ä½œã‚’ç¶­æŒã—ã¾ã™ã€‚
- [**`next-image-experimental` ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«**](/docs/app/building-your-application/upgrading/codemods#next-image-experimental)ï¼šã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å±é™ºã«è¿½åŠ ã—ã€æœªä½¿ç”¨ã® props ã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ—¢å­˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œãŒæ–°ã—ã„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ä¸€è‡´ã™ã‚‹ã‚ˆã†å¤‰æ›´ã•ã‚Œã¾ã™ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€æœ€åˆã« `next-image-to-legacy-image` ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### `<Link>` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ {#link-component}

[`<Link>` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ](/docs/app/building-your-application/routing/linking-and-navigating#link-component) ã¯ã‚‚ã¯ã‚„æ‰‹å‹•ã§ `<a>` ã‚¿ã‚°ã‚’å­è¦ç´ ã¨ã—ã¦è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®å‹•ä½œã¯ [ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 12.2](https://nextjs.org/blog/next-12-2) ã§å®Ÿé¨“çš„ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ã—ã¦è¿½åŠ ã•ã‚Œã€ç¾åœ¨ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã™ã€‚Next.js 13 ã§ã¯ã€`<Link>` ã¯å¸¸ã« `<a>` ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã€åŸºã«ãªã‚‹ã‚¿ã‚°ã« props ã‚’ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

ä¾‹ï¼š

```jsx
import Link from 'next/link'

// Next.js 12: `<a>`ã‚¿ã‚°ã‚’ãƒã‚¹ãƒˆã—ãªã„ã¨é™¤å¤–ã•ã‚Œã¦ã—ã¾ã†
<Link href="/about">
  <a>About</a>
</Link>

// Next.js 13: `<Link>`ã¯å¸¸ã«å†…ã§`<a>`ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹
<Link href="/about">
  About
</Link>
```

Next.js 13 ã«ãƒªãƒ³ã‚¯ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã«ã¯ã€[`new-link` ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«](/docs/app/building-your-application/upgrading/codemods#new-link) ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

### `<Script>` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ {#script-component}

[`next/script`](/docs/app/api-reference/components/script) ã®å‹•ä½œã¯ `pages` ã¨ `app` ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚ˆã†ã«æ›´æ–°ã•ã‚Œã¾ã—ãŸãŒã€ã‚¹ãƒ ãƒ¼ã‚ºãªç§»è¡Œã‚’ç¢ºå®Ÿã«ã™ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®å¤‰æ›´ã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

- `beforeInteractive` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã“ã‚Œã¾ã§ `_document.js` ã«å«ã‚ã¦ã„ãŸå ´åˆã€`app/layout.tsx` ã® root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ç§»å‹•ã—ã¾ã™ã€‚
- å®Ÿé¨“çš„ãª `worker` æˆ¦ç•¥ã¯ `app` ã§ã¯ã¾ã æ©Ÿèƒ½ã—ãªã„ã®ã§ã€ã“ã®æˆ¦ç•¥ã§è¨˜è¼‰ã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å‰Šé™¤ã™ã‚‹ã‹ã€åˆ¥ã®æˆ¦ç•¥ï¼ˆä¾‹ï¼š`lazyOnload`ï¼‰ã‚’ä½¿ã†ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- `onLoad`ã€`onReady`ã€ãŠã‚ˆã³ `onError` ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯ Server Components ã§ã¯å‹•ä½œã—ãªã„ã®ã§ã€[Client Component](/docs/app/building-your-application/rendering/server-components) ã«ç§»å‹•ã™ã‚‹ã‹ã€å®Œå…¨ã«å‰Šé™¤ã—ã¦ãã ã•ã„ã€‚

### ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ– {#font-optimization}

ä»¥å‰ã¯ã€Next.js ã¯ [ãƒ•ã‚©ãƒ³ãƒˆCSSã‚’ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã™ã‚‹](/docs/app/building-your-application/optimizing/fonts) ã“ã¨ã§ãƒ•ã‚©ãƒ³ãƒˆã‚’æœ€é©åŒ–ã—ã¾ã—ãŸã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 13 ã§ã¯ã€æ–°ã—ã„ [`next/font`](/docs/app/building-your-application/optimizing/fonts) ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒå°å…¥ã•ã‚Œã€ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿ä½“é¨“ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹èƒ½åŠ›ã‚’æä¾›ã—ãªãŒã‚‰ã‚‚ã€å„ªã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã‚’ä¿è¨¼ã—ã¾ã™ã€‚`next/font` ã¯ã€`pages` ã¨ `app` ã®ä¸¡æ–¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

[CSSã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–](/docs/app/building-your-application/optimizing/fonts) ã¯ `pages` ã§ã¯å‹•ä½œã—ã¾ã™ãŒã€`app` ã§ã¯å‹•ä½œã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã« [`next/font`](/docs/app/building-your-application/optimizing/fonts) ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

ãƒ•ã‚©ãƒ³ãƒˆæœ€é©åŒ–ã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€[ãƒ•ã‚©ãƒ³ãƒˆã®æœ€é©åŒ–](/docs/app/building-your-application/optimizing/fonts)ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## `pages` ã‹ã‚‰ `app` ã¸ã®ç§»è¡Œ {#migrating-from-pages-to-app}

> **ğŸ¥ è¦–è´:** [App Routerã®æ®µéšçš„æ¡ç”¨æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†](https://www.youtube.com/watch?v=YQMSietiFm0) â†’ [YouTubeï¼ˆ16åˆ†ï¼‰](https://www.youtube.com/watch?v=YQMSietiFm0)ã€‚

App Router ã¸ã®ç§»è¡Œã§ã¯ã€Server Components ã‚„ Suspense ãªã©ã€Next.js ä¸Šã«æ§‹ç¯‰ã•ã‚ŒãŸReactã®æ–°ã—ã„æ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹åˆã‚ã¦ã®æ©Ÿä¼šã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æ–°ã—ã„ Next.js ã®æ©Ÿèƒ½ã€ãŸã¨ãˆã°[ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«](/docs/app/building-your-application/routing#file-conventions)ã‚„[ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ](/docs/app/building-your-application/routing/layouts-and-templates#layouts) ãªã©ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€ç§»è¡Œã¯å­¦ã¶ã¹ãæ–°ã—ã„æ¦‚å¿µã€ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã€å‹•ä½œã®å¤‰åŒ–ã‚’æ„å‘³ã—ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã‚‹è¤‡åˆçš„ãªè¤‡é›‘ã•ã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã«ã€ç§»è¡Œã‚’å°ã•ãªã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯æ„å›³çš„ã« `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨åŒæ™‚ã«å‹•ä½œã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ãƒšãƒ¼ã‚¸ã”ã¨ã®æ®µéšçš„ãªç§»è¡Œã‚’å¯èƒ½ã«ã—ã¦ã„ã¾ã™ã€‚

- `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒˆã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ [è©³ç´°ã¯ã“ã¡ã‚‰](/docs/app/building-your-application/routing)ã€‚
- ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒˆã‚’[å®šç¾©ã—](/docs/app/building-your-application/routing/defining-routes)ã€ç‰¹åˆ¥ãª `page.js` ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ«ãƒ¼ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å…¬ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã—ã¾ã™ã€‚ [è©³ç´°ã¯ã“ã¡ã‚‰](#step-4-migrating-pages)ã€‚
- ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«è¦ç´„ã‚’ä½¿ç”¨ã—ã¦ã€å„ãƒ«ãƒ¼ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®UIã‚’ä½œæˆã—ã¾ã™ã€‚ä¸€èˆ¬çš„ãªç‰¹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `page.js` ã¨ `layout.js` ã§ã™ã€‚
  - `page.js`ã‚’ä½¿ç”¨ã—ã¦ã€ãƒ«ãƒ¼ãƒˆã«å›ºæœ‰ã®UIã‚’å®šç¾©ã—ã¾ã™ã€‚
  - `layout.js`ã‚’ä½¿ç”¨ã—ã¦ã€è¤‡æ•°ã®ãƒ«ãƒ¼ãƒˆã§å…±é€šã«ä½¿ç”¨ã•ã‚Œã‚‹UIã‚’å®šç¾©ã—ã¾ã™ã€‚
  - ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€`.js`ã€`.jsx`ã€ã¾ãŸã¯ `.tsx` æ‹¡å¼µå­ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ã‚¹ã‚¿ã‚¤ãƒ«ã€ãƒ†ã‚¹ãƒˆãªã©ã€ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã¾ã¨ã‚ã¦é…ç½®ã§ãã¾ã™ã€‚ [è©³ç´°ã¯ã“ã¡ã‚‰](/docs/app/building-your-application/routing)ã€‚
- `getServerSideProps` ã‚„ `getStaticProps` ã¨ã„ã£ãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒé–¢æ•°ã¯ã€`app` å†…ã§[æ–°ã—ã„ API](/docs/app/building-your-application/data-fetching) ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚`getStaticPaths` ã¯[`generateStaticParams`](/docs/app/api-reference/functions/generate-static-params) ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚
- `pages/_app.js` ã¨ `pages/_document.js` ã¯ã€å˜ä¸€ã® `app/layout.js` root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚ [è©³ç´°ã¯ã“ã¡ã‚‰](/docs/app/building-your-application/routing/layouts-and-templates#root-layout-required)ã€‚
- `pages/_error.js` ã¯ã‚ˆã‚Šç´°ã‹ã„ç²’åº¦ã® `error.js` ç‰¹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚ [è©³ç´°ã¯ã“ã¡ã‚‰](/docs/app/building-your-application/routing/error-handling)ã€‚
- `pages/404.js` ã¯ [`not-found.js`](/docs/app/api-reference/file-conventions/not-found) ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚
- `pages/api/*` API ãƒ«ãƒ¼ãƒˆã¯ã€`route.js` (Route Handler) ç‰¹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 1: `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ {#step-1-creating-the-app-directory}

æœ€æ–°ã® Next.js ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ã—ã¾ã™ï¼ˆ13.4 ä»¥ä¸ŠãŒå¿…è¦ã§ã™ï¼‰ï¼š

```bash
npm install next@latest
```

ãã®å¾Œã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆï¼ˆã¾ãŸã¯ `src/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã«æ–°ã—ã„ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 2: Root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä½œæˆ {#step-2-creating-a-root-layout}

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«æ–°ã—ã„ `app/layout.tsx` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã¯ã€`app` å†…ã®ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒˆã«é©ç”¨ã•ã‚Œã‚‹ [root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ](/docs/app/building-your-application/routing/layouts-and-templates#root-layout-required) ã§ã™ã€‚

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
export default function RootLayout({
  // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ children prop ã‚’å—ã‘å–ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  // ã“ã‚Œã«ã¯ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚„ãƒšãƒ¼ã‚¸ãŒæŒ¿å…¥ã•ã‚Œã¾ã™
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
export default function RootLayout({
  // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ children prop ã‚’å—ã‘å–ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
  // ã“ã‚Œã«ã¯ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚„ãƒšãƒ¼ã‚¸ãŒæŒ¿å…¥ã•ã‚Œã¾ã™
  children,
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```
</TabItem>
</Tabs>

- `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ **å¿…ãš** root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
- root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ `<html>`ã€`<body>` ã‚¿ã‚°ã‚’å®šç¾©ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚Next.js ã¯è‡ªå‹•çš„ã«ã“ã‚Œã‚‰ã‚’ä½œæˆã—ãªã„ãŸã‚ã§ã™ã€‚
- root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ `pages/_app.tsx` ã¨ `pages/_document.tsx` ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ã‚ã‚Šã¾ã™ã€‚
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ `.js`ã€`.jsx`ã€ã¾ãŸã¯ `.tsx` ã®æ‹¡å¼µå­ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

`<head>` HTML è¦ç´ ã‚’ç®¡ç†ã™ã‚‹ã«ã¯ã€[çµ„ã¿è¾¼ã¿ã® SEO ã‚µãƒãƒ¼ãƒˆ](/docs/app/building-your-application/optimizing/metadata) ã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'Home',
  description: 'Welcome to Next.js',
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
export const metadata = {
  title: 'Home',
  description: 'Welcome to Next.js',
}
```
</TabItem>
</Tabs>

#### `_document.js` ã¨ `_app.js` ã®ç§»è¡Œ {#migrating-document-js-and-app-js}

æ—¢å­˜ã® `_app` ã¾ãŸã¯ `_document` ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆã€å†…å®¹ï¼ˆä¾‹ï¼šã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ã‚’ root ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (`app/layout.tsx`) ã«ã‚³ãƒ”ãƒ¼ã§ãã¾ã™ã€‚`app/layout.tsx` ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ `pages/*` ã«ã¯é©ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ `app`/`document` ã‚’ä¿æŒã—ã¦ã€`pages/*` ãƒ«ãƒ¼ãƒˆãŒå£Šã‚Œãªã„ã‚ˆã†ã«ç§»è¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§»è¡ŒãŒå®Œäº†ã—ãŸã‚‰ã€ãã‚Œã‚‰ã‚’å®‰å…¨ã«å‰Šé™¤ã§ãã¾ã™ã€‚

React ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€[Client Component](/docs/app/building-your-application/rendering/client-components) ã«ç§»å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#### `getLayout()` ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¸ã®ç§»è¡Œ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) {#migrating-the-getlayout-pattern-to-layouts-optional}

Next.js ã¯ `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ãƒšãƒ¼ã‚¸ã”ã¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã« [ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ ã™ã‚‹](https://nextjs.org/docs/canary/pages/building-your-application/routing/pages-and-layouts#layout-pattern#per-page-layouts)ã“ã¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã—ãŸã€‚ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ [ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ](/docs/app/building-your-application/routing/layouts-and-templates#layouts) ã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚µãƒãƒ¼ãƒˆã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚

<details>
  <summary>å‰å¾Œã®ä¾‹ã‚’è¦‹ã‚‹</summary>

**å‰**

```jsx title="components/DashboardLayout.js"
export default function DashboardLayout({ children }) {
  return (
    <div>
      <h2>My Dashboard</h2>
      {children}
    </div>
  )
}
```

```jsx title="pages/dashboard/index.js"
import DashboardLayout from '../components/DashboardLayout'

export default function Page() {
  return <p>My Page</p>
}

Page.getLayout = function getLayout(page) {
  return <DashboardLayout>{page}</DashboardLayout>
}
```

**å¾Œ**

- `pages/dashboard/index.js` ã® `Page.getLayout` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å‰Šé™¤ã—ã€ãã®å¾Œã® [ãƒšãƒ¼ã‚¸ã®ç§»è¡Œã‚¹ãƒ†ãƒƒãƒ—ã«å¾“ã„](#step-4-migrating-pages) `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ã€‚

  ```jsx title="app/dashboard/page.js"
  export default function Page() {
    return <p>My Page</p>
  }
  ```

- `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å‹•ä½œã‚’ä¿æŒã™ã‚‹ãŸã‚ã« `DashboardLayout` ã®å†…å®¹ã‚’æ–°ã—ã„ [Client Component](/docs/app/building-your-application/rendering/client-components) ã«ç§»å‹•ã—ã¾ã™ã€‚

  ```jsx title="app/dashboard/DashboardLayout.js"
  'use client' // ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€ä¸Šéƒ¨ã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®å‰ã«ç½®ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

  // ã“ã‚Œã¯ Client Component ã§ã™
  export default function DashboardLayout({ children }) {
    return (
      <div>
        <h2>My Dashboard</h2>
        {children}
      </div>
    )
  }
  ```

- `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«æ–°ã—ã„ `layout.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€`DashboardLayout` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

  ```jsx title="app/dashboard/layout.js"
  import DashboardLayout from './DashboardLayout'

  // ã“ã‚Œã¯ Server Component ã§ã™
  export default function Layout({ children }) {
    return <DashboardLayout>{children}</DashboardLayout>
  }
  ```

- JavaScript ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é‡ã‚’æ¸›å°‘ã•ã›ã‚‹ãŸã‚ã«ã€`DashboardLayout.js` (Client Component) ã®éã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–éƒ¨åˆ†ã‚’ `layout.js` (Server Component) ã«æ®µéšçš„ã«ç§»å‹•ã§ãã¾ã™ã€‚

</details>

### ã‚¹ãƒ†ãƒƒãƒ— 3: `next/head` ã®ç§»è¡Œ {#step-3-migrating-next-head}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`next/head` React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦ `title` ã‚„ `meta` ãªã©ã® `<head>` HTML è¦ç´ ã‚’ç®¡ç†ã—ã¾ã™ãŒã€`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ `next/head` ã¯æ–°ã—ã„ [çµ„ã¿è¾¼ã¿ã® SEO ã‚µãƒãƒ¼ãƒˆ](/docs/app/building-your-application/optimizing/metadata) ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚

**å‰:**

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="pages/index.tsx" switcher
import Head from 'next/head'

export default function Page() {
  return (
    <>
      <Head>
        <title>My page title</title>
      </Head>
    </>
  )
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="pages/index.js" switcher
import Head from 'next/head'

export default function Page() {
  return (
    <>
      <Head>
        <title>My page title</title>
      </Head>
    </>
  )
}
```
</TabItem>
</Tabs>

**å¾Œ:**

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/page.tsx" switcher
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'My Page Title',
}

export default function Page() {
  return '...'
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/page.js" switcher
export const metadata = {
  title: 'My Page Title',
}

export default function Page() {
  return '...'
}
```
</TabItem>
</Tabs>

[ã™ã¹ã¦ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º](/docs/app/api-reference/functions/generate-metadata)ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 4: ãƒšãƒ¼ã‚¸ã®ç§»è¡Œ {#step-4-migrating-pages}

- [`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª](/docs/app/building-your-application/routing) ã®ãƒšãƒ¼ã‚¸ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ [Server Components](/docs/app/building-your-application/rendering/server-components) ã§ã™ã€‚ã“ã‚Œã¯ã€`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒšãƒ¼ã‚¸ãŒ [Client Components](/docs/app/building-your-application/rendering/client-components) ã§ã‚ã‚‹ã“ã¨ã¨ç•°ãªã‚Šã¾ã™ã€‚
- `app` ã§ã¯[ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ](/docs/app/building-your-application/data-fetching)ãŒå¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚`getServerSideProps`ã€`getStaticProps`ã€ãŠã‚ˆã³ `getInitialProps` ã¯ã€ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ãª API ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚
- `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒˆã‚’[å®šç¾©ã—](/docs/app/building-your-application/routing/defining-routes)ã€ç‰¹åˆ¥ãª `page.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãƒ«ãƒ¼ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’å…¬ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ã—ã¾ã™ã€‚
- | `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª      | ãƒ«ãƒ¼ãƒˆ            |
  | ------------------ | --------------------- | -------------- |
  | `index.js`        | `page.js`             | `/`            |
  | `about.js`        | `about/page.js`       | `/about`       |
  | `blog/[slug].js`  | `blog/[slug]/page.js` | `/blog/post-1` |

ãƒšãƒ¼ã‚¸ã®ç§»è¡Œã‚’ 2 ã¤ã®ä¸»è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ï¼š

- ã‚¹ãƒ†ãƒƒãƒ— 1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ–°ã—ã„ Client Component ã«ç§»å‹•ã—ã¾ã™ã€‚
- ã‚¹ãƒ†ãƒƒãƒ— 2: æ–°ã—ã„ Client Component ã‚’ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®æ–°ã—ã„ `page.js` ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

> **Good to know**: ã“ã‚Œã¯æœ€ã‚‚ `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨æ¯”è¼ƒå¯èƒ½ãªå‹•ä½œã‚’æŒã¤ãŸã‚ã€æœ€ã‚‚ç°¡å˜ãªç§»è¡Œãƒ‘ã‚¹ã§ã™ã€‚

**ã‚¹ãƒ†ãƒƒãƒ— 1: æ–°ã—ã„ Client Component ã®ä½œæˆ**

- `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹ï¼š`app/home-page.tsx` ã¾ãŸã¯ãã‚Œã«é¡ä¼¼ã™ã‚‹ã‚‚ã®ï¼‰ã‚’ä½œæˆã—ã€Client Component ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚Client Components ã‚’å®šç¾©ã™ã‚‹ã«ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šéƒ¨ã« `'use client'` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’è¿½åŠ ã—ã¾ã™ï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆã®å‰ã§ã™ï¼‰ã€‚
  - Pages Router ã¨åŒæ§˜ã«ã€åˆæœŸãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®é™çš„HTMLã« Client Components ã‚’äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã®[æœ€é©åŒ–ã‚¹ãƒ†ãƒƒãƒ—](/docs/app/building-your-application/rendering/client-components#full-page-load)ãŒã‚ã‚Šã¾ã™ã€‚
- `pages/index.js` ã‹ã‚‰ `app/home-page.tsx` ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç§»å‹•ã—ã¾ã™ã€‚

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/home-page.tsx" switcher
'use client'

// ã“ã‚Œã¯ Client Component ã§ã™ï¼ˆ`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨åŒã˜ï¼‰
// ãƒ‡ãƒ¼ã‚¿ã‚’ props ã¨ã—ã¦å—ã‘å–ã‚Šã€çŠ¶æ…‹ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€
// åˆæœŸãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚
export default function HomePage({ recentPosts }) {
  return (
    <div>
      {recentPosts.map((post) => (
        <div key={post.id}>{post.title}</div>
      ))}
    </div>
  )
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/home-page.js" switcher
'use client'

// ã“ã‚Œã¯ Client Component ã§ã™ã€‚`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨åŒæ§˜ã«ã€
// props ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€çŠ¶æ…‹ã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚
export default function HomePage({ recentPosts }) {
  return (
    <div>
      {recentPosts.map((post) => (
        <div key={post.id}>{post.title}</div>
      ))}
    </div>
  )
}
```
</TabItem>
</Tabs>

**ã‚¹ãƒ†ãƒƒãƒ— 2: æ–°ã—ã„ãƒšãƒ¼ã‚¸ã®ä½œæˆ**

- `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«æ–°ã—ã„ `app/page.tsx` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ Server Component ã§ã™ã€‚
- ãƒšãƒ¼ã‚¸å†…ã« `home-page.tsx` Client Component ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
- `pages/index.js` ã§ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚’è¡Œã£ã¦ã„ãŸå ´åˆã€æ–°ã—ã„ [ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ API](/docs/app/building-your-application/data-fetching/fetching) ã‚’ä½¿ç”¨ã—ã¦ã€Server Component å†…ã«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãƒ­ã‚¸ãƒƒã‚¯ã‚’ç›´æ¥ç§»å‹•ã—ã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€[ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒæ–¹æ³•ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰](#step-6-migrating-data-fetching-methods) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/page.tsx" switcher
// Client Component ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™
  import HomePage from './home-page'

  async function getPosts() {
    const res = await fetch('https://...')
    const posts = await res.json()
    return posts
  }

  export default async function Page() {
    // Server Component ã§ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¾ã™
    const recentPosts = await getPosts()
    // ãƒ•ã‚§ãƒƒãƒã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ Client Component ã«ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã—ã¾ã™
    return <HomePage recentPosts={recentPosts} />
  }
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/page.js" switcher
// Client Component ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™
  import HomePage from './home-page'

  async function getPosts() {
    const res = await fetch('https://...')
    const posts = await res.json()
    return posts
  }

  export default async function Page() {
    // Server Component ã§ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¾ã™
    const recentPosts = await getPosts()
    // ãƒ•ã‚§ãƒƒãƒã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ Client Component ã«ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ã—ã¾ã™
    return <HomePage recentPosts={recentPosts} />
  }
```
</TabItem>
</Tabs>

- å‰ã®ãƒšãƒ¼ã‚¸ã§ `useRouter` ã‚’ä½¿ç”¨ã—ã¦ã„ãŸå ´åˆã€æ–°ã—ã„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒƒã‚¯ã«æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ [è©³ç´°ã¯ã“ã¡ã‚‰](/docs/app/api-reference/functions/use-router)ã€‚
- é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ã€[`http://localhost:3000`](http://localhost:3000) ã‚’è¨ªå•ã—ã¦ãã ã•ã„ã€‚ã‚¢ãƒ—ãƒªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªçµŒç”±ã§æä¾›ã•ã‚Œã‚‹æ—¢å­˜ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ«ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 5: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒƒã‚¯ã®ç§»è¡Œ {#step-5-migrating-routing-hooks}

æ–°ã—ã„å‹•ä½œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«æ–°ã—ã„ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚

`app` ã§ã¯ã€`next/navigation` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ä¸‰ã¤ã®æ–°ã—ã„ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š [`useRouter()`](/docs/app/api-reference/functions/use-router)ã€[`usePathname()`](/docs/app/api-reference/functions/use-pathname)ã€ãŠã‚ˆã³ [`useSearchParams()`](/docs/app/api-reference/functions/use-search-params)ã€‚

- æ–°ã—ã„ `useRouter` ãƒ•ãƒƒã‚¯ã¯ `next/navigation` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã€`next/router` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã‚‹ `pages` å†…ã® `useRouter` ãƒ•ãƒƒã‚¯ã¨ã¯ç•°ãªã‚‹å‹•ä½œã‚’ã—ã¾ã™ã€‚
  - [`next/router` ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚ŒãŸ `useRouter` ãƒ•ãƒƒã‚¯](https://nextjs.org/docs/canary/pages/api-reference/functions/use-router)ã¯ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ãŒã€`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä½¿ç”¨ã—ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
- æ–°ã—ã„ `useRouter` ã§ã¯ `pathname` æ–‡å­—åˆ—ã‚’è¿”ã—ã¾ã›ã‚“ã€‚ä»£ã‚ã‚Šã« `usePathname` ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
- æ–°ã—ã„ `useRouter` ã§ã¯ `query` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã›ã‚“ã€‚æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨å‹•çš„ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒåˆ¥ã€…ã«ãªã‚Šã¾ã—ãŸã€‚ä»£ã‚ã‚Šã« `useSearchParams` ã¨ `useParams` ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚
- ãƒšãƒ¼ã‚¸ã®å¤‰æ›´ã‚’ç›£è¦–ã™ã‚‹ã«ã¯ã€`useSearchParams` ã¨ `usePathname` ã‚’ä¸€ç·’ã«ä½¿ç”¨ã§ãã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€[Router Events](/docs/app/api-reference/functions/use-router#router-events) ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
- ã“ã‚Œã‚‰ã®æ–°ã—ã„ãƒ•ãƒƒã‚¯ã¯ Client Components ã§ã®ã¿ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚Server Components ã§ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/example-client-component.tsx" switcher
'use client'

import { useRouter, usePathname, useSearchParams } from 'next/navigation'

export default function ExampleClientComponent() {
  const router = useRouter()
  const pathname = usePathname()
  const searchParams = useSearchParams()

  // ...
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/example-client-component.js" switcher
'use client'

import { useRouter, usePathname, useSearchParams } from 'next/navigation'

export default function ExampleClientComponent() {
  const router = useRouter()
  const pathname = usePathname()
  const searchParams = useSearchParams()

  // ...
}
```
</TabItem>
</Tabs>

ã•ã‚‰ã«ã€æ–°ã—ã„ `useRouter` ãƒ•ãƒƒã‚¯ã«ã¯æ¬¡ã®å¤‰æ›´ãŒã‚ã‚Šã¾ã™ï¼š

- `isFallback` ã¯å‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼›`fallback` ã¯[ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸ](#replacing-fallback)ã€‚
- `locale`ã€`locales`ã€`defaultLocales`ã€`domainLocales` ã®å€¤ã¯ã€çµ„ã¿è¾¼ã¿ã® i18n Next.js æ©Ÿèƒ½ãŒ `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯å¿…è¦ãªããªã£ãŸãŸã‚å‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚[i18n ã«ã¤ã„ã¦è©³ã—ãå­¦ã¶](/docs/app/building-your-application/routing/internationalization)ã€‚
- `basePath` ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚ä»£ã‚ã‚Šã¨ãªã‚‹ã‚‚ã®ã¯ `useRouter` ã®ä¸€éƒ¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ã å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
- `asPath` ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼›æ–°ã—ã„ãƒ«ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰ `as` ã®æ¦‚å¿µãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚
- `isReady` ã¯å¿…è¦ãªããªã£ãŸã®ã§å‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚[é™çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°](/docs/app/building-your-application/rendering/server-components#static-rendering-default)ã®é–“ã«ã€[`useSearchParams()`](/docs/app/api-reference/functions/use-search-params) ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€ä»£ã‚ã‚Šã«ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚
- `route` ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼›`usePathname` ã¾ãŸã¯ `useSelectedLayoutSegments()` ã«ã‚ˆã‚Šä»£æ›¿æ‰‹æ®µãŒæä¾›ã•ã‚Œã¾ã™ã€‚

[`useRouter()` API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’è¡¨ç¤º](/docs/app/api-reference/functions/use-router)ã€‚

#### `pages` ã¨ `app` ã®é–“ã§ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å…±æœ‰ {#sharing-components-between-pages-and-app}

components ã‚’ `pages` ã¨ `app` routers ã®é–“ã§äº’æ›æ€§ã‚’ä¿ã¤ãŸã‚ã«ã€[`next/compat/router` ã‹ã‚‰ã® `useRouter` ãƒ•ãƒƒã‚¯](https://nextjs.org/docs/canary/pages/api-reference/functions/use-router#the-nextcompatrouter-export) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
ã“ã‚Œã¯ `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ã® `useRouter` ãƒ•ãƒƒã‚¯ã§ã™ãŒã€ãƒ«ãƒ¼ã‚¿ãƒ¼é–“ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å…±æœ‰ã™ã‚‹éš›ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ„å›³ã—ã¦ã„ã¾ã™ã€‚`app` ãƒ«ãƒ¼ã‚¿ãƒ¼ã§ã®ã¿ä½¿ç”¨ã™ã‚‹æº–å‚™ãŒã§ããŸã‚‰ã€æ–°ã—ã„ [`next/navigation` ã‹ã‚‰ã® `useRouter`](/docs/app/api-reference/functions/use-router) ã«æ›´æ–°ã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 6: ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒæ–¹æ³•ã®ç§»è¡Œ {#step-6-migrating-data-fetching-methods}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ã€`getServerSideProps` ãŠã‚ˆã³ `getStaticProps` ã‚’ä½¿ç”¨ã—ã¦ãƒšãƒ¼ã‚¸ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã¾ã™ã€‚`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã§ã¯ã€ã“ã‚Œã‚‰ã®ä»¥å‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒé–¢æ•°ã¯ã€`fetch()` ãŠã‚ˆã³ `async` React Server Components ã‚’åŸºã«ã—ãŸ[ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ãª API](/docs/app/building-your-application/data-fetching) ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚ 

<Tabs>
<TabItem value="tsx" label="TypeScript">
                                   
```tsx title="app/page.tsx" switcher
export default async function Page() {
  // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æ‰‹å‹•ã§ç„¡åŠ¹ã«ã™ã‚‹ã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
  // `getStaticProps`ã«ç›¸å½“ã—ã¾ã™ã€‚
  // `force-cache`ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€çœç•¥å¯èƒ½ã§ã™ã€‚
  const staticData = await fetch(`https://...`, { cache: 'force-cache' });

  // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æ¯å›å†ãƒ•ã‚§ãƒƒãƒã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
  // `getServerSideProps`ã«ç›¸å½“ã—ã¾ã™ã€‚
  const dynamicData = await fetch(`https://...`, { cache: 'no-store' });

  // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯10ç§’é–“ã®å¯¿å‘½ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
  // `revalidate`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®`getStaticProps`ã«ç›¸å½“ã—ã¾ã™ã€‚
  const revalidatedData = await fetch(`https://...`, {
    next: { revalidate: 10 },
  });

  return <div>...</div>;
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/page.js" switcher
export default async function Page() {
  // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æ‰‹å‹•ã§ç„¡åŠ¹ã«ã™ã‚‹ã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
  // `getStaticProps`ã«ç›¸å½“ã—ã¾ã™ã€‚
  // `force-cache`ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã€çœç•¥å¯èƒ½ã§ã™ã€‚
  const staticData = await fetch(`https://...`, { cache: 'force-cache' });

  // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯æ¯å›å†ãƒ•ã‚§ãƒƒãƒã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
  // `getServerSideProps`ã«ç›¸å½“ã—ã¾ã™ã€‚
  const dynamicData = await fetch(`https://...`, { cache: 'no-store' });

  // ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯10ç§’é–“ã®å¯¿å‘½ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
  // `revalidate`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä»˜ãã®`getStaticProps`ã«ç›¸å½“ã—ã¾ã™ã€‚
  const revalidatedData = await fetch(`https://...`, {
    next: { revalidate: 10 },
  });

  return <div>...</div>;
}
```
</TabItem>
</Tabs>

#### ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (`getServerSideProps`) {#server-side-rendering-getserversideprops}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`getServerSideProps` ã‚’ä½¿ç”¨ã—ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚§ãƒƒãƒã—ã€ãã® props ã‚’ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚ŒãŸ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æ¸¡ã—ã¾ã™ã€‚ãƒšãƒ¼ã‚¸ã®åˆæœŸHTMLã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã€ãã®å¾Œãƒ–ãƒ©ã‚¦ã‚¶ã§"ãƒã‚¤ãƒ‰ãƒ¬ãƒ¼ãƒˆ"ã•ã‚Œï¼ˆã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ãªã‚Šã¾ã™ï¼‰ã€‚

```jsx title="pages/dashboard.js"
// `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

export async function getServerSideProps() {
  const res = await fetch(`https://...`)
  const projects = await res.json()

  return { props: { projects } }
}

export default function Dashboard({ projects }) {
  return (
    <ul>
      {projects.map((project) => (
        <li key={project.id}>{project.name}</li>
      ))}
    </ul>
  )
}
```

App Router ã§ã¯ã€[Server Components](/docs/app/building-your-application/rendering/server-components)ã‚’ä½¿ç”¨ã—ã¦Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒã‚’é…ç½®ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã™ã‚‹JavaScriptã®é‡ã‚’æ¸›ã‚‰ã—ãªãŒã‚‰ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸHTMLã‚’ä¿æŒã§ãã¾ã™ã€‚

`cache` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ `no-store` ã«è¨­å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€ãƒ•ã‚§ãƒƒãƒã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãŒ [æ±ºã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œãªã„](/docs/app/building-your-application/data-fetching/fetching)ã“ã¨ã‚’ç¤ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® `getServerSideProps` ã«ç›¸å½“ã—ã¾ã™ã€‚

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/page.tsx" switcher
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

// ã“ã®é–¢æ•°ã®åå‰ã¯ä½•ã§ã‚‚æ§‹ã„ã¾ã›ã‚“
async function getProjects() {
  const res = await fetch(`https://...`, { cache: 'no-store' })
  const projects = await res.json()

  return projects
}

export default async function Dashboard() {
  const projects = await getProjects()

  return (
    <ul>
      {projects.map((project) => (
        <li key={project.id}>{project.name}</li>
      ))}
    </ul>
  )
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/page.js" switcher
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

// ã“ã®é–¢æ•°ã®åå‰ã¯ä½•ã§ã‚‚æ§‹ã„ã¾ã›ã‚“
async function getProjects() {
  const res = await fetch(`https://...`, { cache: 'no-store' })
  const projects = await res.json()

  return projects
}

export default async function Dashboard() {
  const projects = await getProjects()

  return (
    <ul>
      {projects.map((project) => (
        <li key={project.id}>{project.name}</li>
      ))}
    </ul>
  )
}
```
</TabItem>
</Tabs>

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ {#accessing-request-object}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€Node.js HTTP API ã«åŸºã¥ã„ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚

ãŸã¨ãˆã°ã€`getServerSideProps` ã‹ã‚‰ `req` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã€ãã‚Œã‚’ä½¿ç”¨ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã® cookie ã¨ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å–å¾—ã§ãã¾ã™ã€‚

```jsx title="pages/index.js"
// `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

export async function getServerSideProps({ req, query }) {
  const authHeader = req.getHeaders()['authorization'];
  const theme = req.cookies['theme'];

  return { props: { ... }}
}

export default function Page(props) {
  return ...
}
```

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®æ–°ã—ã„èª­ã¿å–ã‚Šå°‚ç”¨ã®é–¢æ•°ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ï¼š

- [`headers`](/docs/app/api-reference/functions/headers): Web Headers API ã«åŸºã¥ã„ã¦ãŠã‚Šã€[Server Components](/docs/app/building-your-application/rendering/server-components) å†…ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚
- [`cookies`](/docs/app/api-reference/functions/cookies): Web Cookies API ã«åŸºã¥ã„ã¦ãŠã‚Šã€[Server Components](/docs/app/building-your-application/rendering/server-components) å†…ã§ cookie ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã§ãã¾ã™ã€‚

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/page.tsx" switcher
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
import { cookies, headers } from 'next/headers'

async function getData() {
  const authHeader = (await headers()).get('authorization')

  return '...'
}

export default async function Page() {
  // Server Components å†…ã§`cookies`ã¾ãŸã¯`headers`ã‚’ç›´æ¥
  // ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒé–¢æ•°å†…ã§ä½¿ç”¨ã§ãã¾ã™
  const theme = (await cookies()).get('theme')
  const data = await getData()
  return '...'
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/page.js" switcher
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
import { cookies, headers } from 'next/headers'

async function getData() {
  const authHeader = (await headers()).get('authorization')

  return '...'
}

export default async function Page() {
  // Server Components å†…ã§`cookies`ã¾ãŸã¯`headers`ã‚’ç›´æ¥
  // ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒé–¢æ•°å†…ã§ä½¿ç”¨ã§ãã¾ã™
  const theme = (await cookies()).get('theme')
  const data = await getData()
  return '...'
}
```
</TabItem>
</Tabs>

#### é™çš„ã‚µã‚¤ãƒˆç”Ÿæˆ (`getStaticProps`) {#static-site-generation-getstaticprops}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`getStaticProps` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒšãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚ã“ã®é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å¤–éƒ¨APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã‚Šã—ã¦ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒšãƒ¼ã‚¸å…¨ä½“ã«æ¸¡ã—ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã—ã¾ã™ã€‚

```jsx title="pages/index.js"
// `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

export async function getStaticProps() {
  const res = await fetch(`https://...`)
  const projects = await res.json()

  return { props: { projects } }
}

export default function Index({ projects }) {
  return projects.map((project) => <div>{project.name}</div>)
}
```

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€[`fetch()`](/docs/app/api-reference/functions/fetch) ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `cache: 'force-cache'` ã¨ãªã‚Šã€æ‰‹å‹•ã§ç„¡åŠ¹ã«ã—ãªã„é™ã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® `getStaticProps` ã«ç›¸å½“ã—ã¾ã™ã€‚

```jsx title="app/page.js"
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

// ã“ã®é–¢æ•°ã®åå‰ã¯ä½•ã§ã‚‚æ§‹ã„ã¾ã›ã‚“
async function getProjects() {
  const res = await fetch(`https://...`)
  const projects = await res.json()

  return projects
}

export default async function Index() {
  const projects = await getProjects()

  return projects.map((project) => <div>{project.name}</div>)
}
```

#### å‹•çš„ãªãƒ‘ã‚¹ (`getStaticPaths`) {#dynamic-paths-getstaticpaths}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`getStaticPaths` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ«ãƒ‰æ™‚ã«äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã¹ãå‹•çš„ãƒ‘ã‚¹ã‚’å®šç¾©ã—ã¾ã™ã€‚

```jsx title="pages/posts/[id].js"
// `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
import PostLayout from '@/components/post-layout'

export async function getStaticPaths() {
  return {
    paths: [{ params: { id: '1' } }, { params: { id: '2' } }],
  }
}

export async function getStaticProps({ params }) {
  const res = await fetch(`https://.../posts/${params.id}`)
  const post = await res.json()

  return { props: { post } }
}

export default function Post({ post }) {
  return <PostLayout post={post} />
}
```

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`getStaticPaths` ã¯ [`generateStaticParams`](/docs/app/api-reference/functions/generate-static-params) ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚

[`generateStaticParams`](/docs/app/api-reference/functions/generate-static-params) ã¯ `getStaticPaths` ã¨åŒæ§˜ã«å‹•ä½œã—ã¾ã™ãŒã€ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿”ã™ãŸã‚ã®æ”¹è‰¯ã•ã‚ŒãŸAPIã‚’æä¾›ã—ã€[layouts](/docs/app/building-your-application/routing/layouts-and-templates)å†…ã§ä½¿ç”¨ã§ãã¾ã™ã€‚`generateStaticParams` ã®è¿”ã‚Šå€¤ã®å½¢çŠ¶ã¯ã€ãƒã‚¹ãƒˆã•ã‚ŒãŸ `param` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã‚„è§£æ±ºã•ã‚ŒãŸãƒ‘ã‚¹ã®æ–‡å­—åˆ—ã§ã¯ãªãã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®é…åˆ—ã§ã™ã€‚

```jsx title="app/posts/[id]/page.js"
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
import PostLayout from '@/components/post-layout'

export async function generateStaticParams() {
  return [{ id: '1' }, { id: '2' }]
}

async function getPost(params) {
  const res = await fetch(`https://.../posts/${params.id}`)
  const post = await res.json()

  return post
}

export default async function Post({ params }) {
  const post = await getPost(params)

  return <PostLayout post={post} />
}
```

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã®æ–°ã—ã„ãƒ¢ãƒ‡ãƒ«ã«ã¯ `generateStaticParams` ã¨ã„ã†åå‰ãŒ `getStaticPaths` ã‚ˆã‚Šé©åˆ‡ã§ã™ã€‚`get` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ã‚ˆã‚Šèª¬æ˜çš„ãª `generate` ã«ç½®ãæ›ãˆã‚‰ã‚Œã€`getStaticProps` ã‚„ `getServerSideProps` ã®å¿…è¦ãŒãªããªã£ãŸã“ã¨ã§ã€å˜ç‹¬ã§ã‚ˆã‚Šé©ã—ã¦ã„ã¾ã™ã€‚`Paths` ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã¯ `Params` ã«ç½®ãæ›ãˆã‚‰ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã¯è¤‡æ•°ã®å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’æŒã¤ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã«ã‚ˆã‚Šé©åˆ‡ã§ã™ã€‚

---

#### `fallback` ã®ç½®ãæ›ãˆ {#replacing-fallback}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`getStaticPaths` ã‹ã‚‰è¿”ã•ã‚Œã‚‹ `fallback` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦ãƒ“ãƒ«ãƒ‰æ™‚ã«äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„ãƒšãƒ¼ã‚¸ã®å‹•ä½œã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ `true` ã«è¨­å®šã™ã‚‹ã¨ãƒšãƒ¼ã‚¸ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹é–“ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€`false` ã«è¨­å®šã™ã‚‹ã¨404ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã€`blocking` ã«è¨­å®šã™ã‚‹ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```jsx title="pages/posts/[id].js"
// `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

export async function getStaticPaths() {
  return {
    paths: [],
    fallback: 'blocking'
  };
}

export async function getStaticProps({ params }) {
  ...
}

export default function Post({ post }) {
  return ...
}
```

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€[`config.dynamicParams` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£](/docs/app/api-reference/file-conventions/route-segment-config#dynamicparams) ãŒ [`generateStaticParams`](/docs/app/api-reference/functions/generate-static-params) ã®å¤–å´ã§ã€ã©ã®ã‚ˆã†ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå‡¦ç†ã•ã‚Œã‚‹ã‹ã‚’åˆ¶å¾¡ã—ã¾ã™ï¼š

- **`true`**: (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ) `generateStaticParams` ã«å«ã¾ã‚Œã¦ã„ãªã„å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã¯å¿…è¦ã«å¿œã˜ã¦ç”Ÿæˆã•ã‚Œã¾ã™ã€‚
- **`false`**: `generateStaticParams` ã«å«ã¾ã‚Œã¦ã„ãªã„å‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã¯404ã‚’è¿”ã—ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® `getStaticPaths` ã® `fallback: true | false | 'blocking'` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚`fallback: 'blocking'` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ `dynamicParams` ã«ã¯å«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ï¼›ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’ä¼´ã†å ´åˆã€`'blocking'`ã¨ `true` ã®é•ã„ãŒé¡•è‘—ã§ã¯ãªã„ã‹ã‚‰ã§ã™ã€‚

```jsx title="app/posts/[id]/page.js"
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

export const dynamicParams = true;

export async function generateStaticParams() {
  return [...]
}

async function getPost(params) {
  ...
}

export default async function Post({ params }) {
  const post = await getPost(params);

  return ...
}
```

[`dynamicParams`](/docs/app/api-reference/file-conventions/route-segment-config#dynamicparams) ãŒ `true` ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ã¾ã ç”Ÿæˆã•ã‚Œã¦ã„ãªã„ãƒ«ãƒ¼ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸã¨ãã«ã¯ã€ãã‚Œã¯ã‚µãƒ¼ãƒãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã™ã€‚

#### å¢—åˆ†é™çš„å†ç”Ÿæˆ (`getStaticProps` ã¨ `revalidate`) {#incremental-static-regeneration-getstaticprops-with-revalidate}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€`getStaticProps` é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€ä¸€å®šã®æ™‚é–“ãŒçµŒéå¾Œã«è‡ªå‹•çš„ã«ãƒšãƒ¼ã‚¸ã‚’å†ç”Ÿæˆã™ã‚‹ãŸã‚ã® `revalidate` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```jsx title="pages/index.js"
// `pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

export async function getStaticProps() {
  const res = await fetch(`https://.../posts`)
  const posts = await res.json()

  return {
    props: { posts },
    revalidate: 60,
  }
}

export default function Index({ posts }) {
  return (
    <Layout>
      <PostList posts={posts} />
    </Layout>
  )
}
```

`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€[`fetch()`](/docs/app/api-reference/functions/fetch) ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒã§ `revalidate` ã‚’ä½¿ç”¨ã—ã€ãã®æŒ‡å®šã—ãŸç§’æ•°é–“ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ãã¾ã™ã€‚

```jsx title="app/page.js"
// `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

async function getPosts() {
  const res = await fetch(`https://.../posts`, { next: { revalidate: 60 } })
  const data = await res.json()

  return data.posts
}

export default async function PostList() {
  const posts = await getPosts()

  return posts.map((post) => <div>{post.name}</div>)
}
```

#### API ãƒ«ãƒ¼ãƒˆ {#api-routes}

API ãƒ«ãƒ¼ãƒˆã¯ `pages/api` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å¤‰æ›´ãªã—ã«å‹•ä½œã—ç¶šã‘ã¾ã™ã€‚ ãŸã ã—ã€`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ [Route Handlers](/docs/app/building-your-application/routing/route-handlers) ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚

Route Handlers ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€Web [Request](https://developer.mozilla.org/docs/Web/API/Request) ã¨ [Response](https://developer.mozilla.org/docs/Web/API/Response) APIs ã‚’ä½¿ç”¨ã—ã¦ã€ç‰¹å®šã®ãƒ«ãƒ¼ãƒˆã«å¯¾ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½œæˆã§ãã¾ã™ã€‚

<Tabs>
<TabItem value="ts" label="TypeScript">

```ts title="app/api/route.ts" switcher
export async function GET(request: Request) {}
```
</TabItem>
<TabItem value="js" label="JavaScript">

```js title="app/api/route.js" switcher
export async function GET(request) {}
```
</TabItem>
</Tabs>

> **Good to know**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰å¤–éƒ¨APIã‚’å‘¼ã³å‡ºã™ãŸã‚ã«ä»¥å‰APIãƒ«ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ãŸå ´åˆã€ãƒ‡ãƒ¼ã‚¿ã‚’å®‰å…¨ã«ãƒ•ã‚§ãƒƒãƒã™ã‚‹ãŸã‚ã« [Server Components](/docs/app/building-your-application/rendering/server-components) ã‚’ä»£ã‚ã‚Šã«ä½¿ç”¨ã§ãã¾ã™ã€‚[ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ](/docs/app/building-your-application/data-fetching/fetching)ã«ã¤ã„ã¦è©³ã—ãå­¦ã‚“ã§ãã ã•ã„ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 7: ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° {#step-7-styling}

`pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆãŒ `pages/_app.js` ã®ã¿ã«åˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚`app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã¯ã€ã“ã®åˆ¶ç´„ãŒè§£æ”¾ã•ã‚Œã¾ã—ãŸã€‚ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä»»æ„ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ãƒšãƒ¼ã‚¸ã€ã¾ãŸã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è¿½åŠ ã§ãã¾ã™ã€‚

- [CSS ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«](/docs/app/building-your-application/styling/css#css-modules)
- [Tailwind CSS](/docs/app/building-your-application/styling/tailwind-css)
- [ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«](/docs/app/building-your-application/styling/css#global-styles)
- [CSS-in-JS](/docs/app/building-your-application/styling/css-in-js)
- [å¤–éƒ¨ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ](/docs/app/building-your-application/styling/css#external-stylesheets)
- [Sass](/docs/app/building-your-application/styling/sass)

#### Tailwind CSS {#tailwind-css}

Tailwind CSS ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã€`tailwind.config.js` ãƒ•ã‚¡ã‚¤ãƒ«ã« `app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```js title="tailwind.config.js"
module.exports = {
  content: [
    './app/**/*.{js,ts,jsx,tsx,mdx}', // <-- ã“ã®è¡Œã‚’è¿½åŠ 
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
  ],
}
```

ã¾ãŸã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ `app/layout.js` ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```jsx title="app/layout.js"
import '../styles/globals.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

[Tailwind CSS ã§ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°](/docs/app/building-your-application/styling/tailwind-css)ã«ã¤ã„ã¦è©³ã—ãå­¦ã‚“ã§ãã ã•ã„ã€‚

## ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ« {#codemods}

Next.js ã¯ã€æ©Ÿèƒ½ãŒå»ƒæ­¢ã•ã‚Œã‚‹å ´åˆã«ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã®ã‚’åŠ©ã‘ã‚‹ã‚³ãƒ¼ãƒ‰å¤‰æ›ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚[ã‚³ãƒ¼ãƒ‡ãƒ¢ãƒƒãƒ‰](/docs/app/building-your-application/upgrading/codemods)ã§è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚