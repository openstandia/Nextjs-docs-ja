---
title: ルーティングの基本
nav_title: ルーティング
description: フロントエンドアプリケーションのルーティングの基本を学びましょう。
---

すべてのアプリケーションの骨組みはルーティングです。ここでは、Webのルーティングの**基本概念**とNext.jsでのルーティングの処理について紹介します。

## 用語

まず、ドキュメント全体でこれらの用語が使われています。ここに簡単な参考を示します：

<Image
  alt="コンポーネントツリーの用語"
  srcLight="/docs/light/terminology-component-tree.png"
  srcDark="/docs/dark/terminology-component-tree.png"
  width="1600"
  height="832"
/>

- **Tree:** 階層構造を視覚化するための慣習です。例えば、親と子のコンポーネントのあるコンポーネントツリーやフォルダ構造など
- **Subtree:** 新しいルート（最初）で始まり、葉（最後）で終わるツリーの一部
- **Root:** ルートレイアウトなど、ツリーやサブツリーの最初のノード
- **Leaf:** URLパスの最後のセグメントのように、子ノードを持たないサブツリー内のノード

<Image
  alt="URLの構成の用語"
  srcLight="/docs/light/terminology-url-anatomy.png"
  srcDark="/docs/dark/terminology-url-anatomy.png"
  width="1600"
  height="371"
/>

- **URLセグメント:** スラッシュで区切られたURLパスの一部
- **URLパス:** ドメインの後に続くセグメントで構成されたURLの一部

## `app`ルーター

バージョン13では、Next.jsは共有レイアウトやネストルーティング、ローディング状態、エラーハンドリングなどをサポートする新しい**App Router**を[React Server Components](/docs/app/building-your-application/rendering/server-components)に基づいて導入しました。

App Routerは`app`という新しいディレクトリ内で動作します。この`app`ディレクトリは`pages`ディレクトリと共に動作し、段階的な導入を可能にします。これにより、一部のルートを新しい動作にオプトインしつつ、他のルートを`pages`ディレクトリ内で以前の動作を継続できます。アプリケーションが`pages`ディレクトリを使用している場合は、[Pages Router](/docs/pages/building-your-application/routing)のドキュメントも参照してください。

> **Good to know**: App RouterはPages Routerよりも優先されます。ディレクトリ間で同じURLパスに解決されるルートは、ビルド時に競合を防ぐためにエラーになります。

<Image
  alt="Next.js Appディレクトリ"
  srcLight="/docs/light/next-router-directories.png"
  srcDark="/docs/dark/next-router-directories.png"
  width="1600"
  height="444"
/>

デフォルトで、`app`内のコンポーネントは[React Server Components](/docs/app/building-your-application/rendering/server-components)です。これはパフォーマンス最適化であり、簡単に導入できる上に、[Client Components](/docs/app/building-your-application/rendering/client-components)も使用できます。

> **Recommendation:** Server Componentsを初めて利用する場合は、[Server](/docs/app/building-your-application/rendering/server-components)ページをチェックしてください。

## フォルダとファイルの役割

Next.jsはファイルシステムに基づいたルーターを使用しています：

- **フォルダ**はルートを定義するために使用されます。ルートは単一のパスで、ファイルシステムの階層構造に従って**ルートフォルダ**から`page.js`ファイルを含む最終的な**葉フォルダ**までのネストフォルダです。[Defining Routes](/docs/app/building-your-application/routing/defining-routes)を参照してください
- **ファイル**はルートセグメントで表示されるUIを作成するために使用されます。[special files](#file-conventions)を参照してください

## ルートセグメント

ルート内の各フォルダは**ルートセグメント**を表します。各ルートセグメントは、**URLパス**内の対応する**セグメント**にマッピングされます。

<Image
  alt="ルートセグメントがURLセグメントにマッピングする方法"
  srcLight="/docs/light/route-segments-to-path-segments.png"
  srcDark="/docs/dark/route-segments-to-path-segments.png"
  width="1600"
  height="594"
/>

## ネストルート

ネストルートを作成するには、フォルダを互いにネストできます。例えば、`app`ディレクトリに新しい2つのフォルダをネストして、新しい`/dashboard/settings`ルートを追加できます。

`/dashboard/settings`ルートは、3つのセグメントで構成されています：

- `/` (ルートセグメント)
- `dashboard` (セグメント)
- `settings` (葉セグメント)

## ファイルの規約

Next.jsはネストされたルートで特定の動作を持つUIを作成するための特別なファイルセットを提供します：

|                                                                                           |                                                                                                |
| ----------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| [`layout`](/docs/app/building-your-application/routing/layouts-and-templates#layouts)     | セグメントおよびその子供のための共有UI                                                         |
| [`page`](/docs/app/building-your-application/routing/pages)                               | ルートのユニークなUIを提供し、ルートを公開でアクセス可能にします                               |
| [`loading`](/docs/app/building-your-application/routing/loading-ui-and-streaming)         | セグメントおよびその子供のためのローディングUI                                                  |
| [`not-found`](/docs/app/api-reference/file-conventions/not-found)                         | セグメントおよびその子供のためのNot Found UI                                                   |
| [`error`](/docs/app/building-your-application/routing/error-handling)                     | セグメントおよびその子供のためのエラーUI                                                       |
| [`global-error`](/docs/app/building-your-application/routing/error-handling)              | グローバルエラーUI                                                                             |
| [`route`](/docs/app/building-your-application/routing/route-handlers)                     | サーバーサイドのAPIエンドポイント                                                              |
| [`template`](/docs/app/building-your-application/routing/layouts-and-templates#templates) | 専用の再レンダリングされるレイアウトUI                                                         |
| [`default`](/docs/app/api-reference/file-conventions/default)                             | [並列ルート](/docs/app/building-your-application/routing/parallel-routes)用のフォールバックUI    |

> **Good to know**: 特別なファイルには`.js`、`.jsx`、または`.tsx`のファイル拡張子を使用できます。

## コンポーネントの階層

ルートセグメントの特別なファイルで定義されたReactコンポーネントは特定の階層でレンダリングされます：

- `layout.js`
- `template.js`
- `error.js` (Reactエラーボーダリ)
- `loading.js` (Reactサスペンスバウンダリ)
- `not-found.js` (Reactエラーボーダリ)
- `page.js` または ネストした `layout.js`

<Image
  alt="ファイル規約のコンポーネント階層"
  srcLight="/docs/light/file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/file-conventions-component-hierarchy.png"
  width="1600"
  height="643"
/>

ネストされたルートでは、セグメントのコンポーネントは親セグメントのコンポーネントの**内側に**ネストされます。

<Image
  alt="ネストされたファイル規約のコンポーネント階層"
  srcLight="/docs/light/nested-file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/nested-file-conventions-component-hierarchy.png"
  width="1600"
  height="863"
/>

## コロケーション

特別なファイルに加えて、`app`ディレクトリ内のフォルダ内に自分自身のファイル（例：コンポーネント、スタイル、テストなど）をコロケートするオプションがあります。

これは、フォルダがルートを定義する一方で、`page.js`または`route.js`で返されるコンテンツのみが公開的にアドレス可能であるためです。

<Image
  alt="コロケートされたファイルを持つフォルダ構造の例"
  srcLight="/docs/light/project-organization-colocation.png"
  srcDark="/docs/dark/project-organization-colocation.png"
  width="1600"
  height="1011"
/>

[プロジェクトの組織化とコロケーション](/docs/app/building-your-application/routing/colocation)についてもっと学びましょう。

## 高度なルーティングパターン

App Routerは、さらに高度なルーティングパターンを実装するための一連の規約も提供します。これには以下が含まれます：

- [並列ルート](/docs/app/building-your-application/routing/parallel-routes)：同じビューに2つ以上のページを同時に表示し、それぞれが独立してナビゲート可能にします。これにより、独自のサブナビゲーションを持つ分割ビューを使用できます。例：ダッシュボード
- [ルートのインターセプト](/docs/app/building-your-application/routing/intercepting-routes)：ルートをインターセプトし、別のルートのコンテキスト内で表示します。現在のページのコンテキストを保持することが重要な場合に使用できます。例：編集中のタスクやフィード内で写真を拡大表示する場合

これらのパターンにより、かつては小規模チームや個人の開発者による実装が複雑だった機能を、より豊かで複雑なUIを構築できるように democratize します。

## 次のステップ

これでNext.jsのルーティングの基本が理解できたので、以下のリンクをたどって最初のルートを作成しましょう：