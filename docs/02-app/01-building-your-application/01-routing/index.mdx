---
title: 'ルーティングの基本'
nav_title: 'ルーティング'
description: 'フロントエンドアプリケーションのルーティングの基本を学びましょう。'
---

アプリケーションの骨格をなすのはルーティングです。このページでは、ウェブ用の**基本概念**としてのルーティングと、Next.jsでのルーティングの扱い方を紹介します。

## 用語解説

まず、このドキュメント全体で使われる用語を紹介します。以下は簡単なリファレンスです：

<Image
  alt="コンポーネントツリーの用語集"
  srcLight="/docs/light/terminology-component-tree.png"
  srcDark="/docs/dark/terminology-component-tree.png"
  width="1600"
  height="832"
/>

- **Tree:** 階層構造を視覚化するための規約です。例えば、親と子のコンポーネントを持つコンポーネントツリー、フォルダ構造などです。
- **Subtree:** Treeの一部で、新しいroot（最初）から始まり、leaf（最後）で終わります。
- **Root**: TreeやSubtreeの最初のノードで、root レイアウトのようなものです。
- **Leaf:** Subtree内で子を持たないノードで、URLパスの最後のセグメントのようなものです。

<Image
  alt="URLの構造に関する用語集"
  srcLight="/docs/light/terminology-url-anatomy.png"
  srcDark="/docs/dark/terminology-url-anatomy.png"
  width="1600"
  height="371"
/>

- **URL Segment:** スラッシュで区切られたURLパスの一部です。
- **URL Path:** ドメインの後に来るURLの一部（セグメントで構成されています）です。

## `app` Router

バージョン13で、Next.jsは新しい**App Router**を導入しました。これは[React Server Components](/docs/app/building-your-application/rendering/server-components)を基に構築されており、共有レイアウト、ネストされたルーティング、ロード状態、エラー処理などをサポートします。

App Routerは`app`という新しいディレクトリで動作します。`app`ディレクトリは`pages`ディレクトリと共に動作し、増分採用を可能にします。これにより、アプリケーションの一部のルートを新しい動作に置き換え、他のルートを以前の動作のために`pages`ディレクトリに残すことができます。もしアプリケーションが`pages`ディレクトリを使用している場合は、[Pages Router](https://nextjs.org/docs/canary/pages/building-your-application/routing)のドキュメントもご覧ください。

> **Good to know**: App RouterはPages Routerより優先されます。ディレクトリ間で同じURLパスに解決しようとすると競合を防ぐためにビルド時にエラーが発生します。

<Image
  alt="Next.js App Directory"
  srcLight="/docs/light/next-router-directories.png"
  srcDark="/docs/dark/next-router-directories.png"
  width="1600"
  height="444"
/>

デフォルトでは、`app`内のコンポーネントは[React Server Components](/docs/app/building-your-application/rendering/server-components)です。これはパフォーマンスの最適化であり、簡単に導入できるようになっています。もちろん、[Client Components](/docs/app/building-your-application/rendering/client-components)も使用することができます。

> **Recommendation:** Server Componentsに不慣れな方は、[Server](/docs/app/building-your-application/rendering/server-components)ページをご覧ください。

## フォルダとファイルの役割

Next.jsはファイルシステムに基づいたルーターを使用します：

- **フォルダ**はルートを定義するために使用されます。ルートは**rootフォルダ**から始まり、`page.js`ファイルを含む最終的な**leafフォルダ**までのネストされたフォルダの単一パスです。[ルートを定義する](/docs/app/building-your-application/routing/defining-routes)を参照してください。
- **ファイル**はルートセグメントのUIを作成するために使用されます。[特別なファイル](#file-conventions)を参照してください。

## ルートセグメント

ルート内の各フォルダは**ルートセグメント**を表します。各ルートセグメントは対応する**URLパス**の**セグメント**にマッピングされます。

<Image
  alt="ルートセグメントがURLセグメントにどのようにマッピングされるか"
  srcLight="/docs/light/route-segments-to-path-segments.png"
  srcDark="/docs/dark/route-segments-to-path-segments.png"
  width="1600"
  height="594"
/>

## ネストされたルート

ネストされたルートを作成するには、フォルダをネストすればいいです。例えば、`app`ディレクトリに2つの新しいフォルダをネストして、新しい`/dashboard/settings`ルートを追加できます。

`/dashboard/settings`ルートは3つのセグメントで構成されています：

- `/` (Rootセグメント)
- `dashboard` (セグメント)
- `settings` (Leafセグメント)

## ファイルの規約

Next.jsはネストされたルートで特定の動作を持つUIを作成するための特別なファイルを提供します：

|                                                                                           |                                                                                                |
| ----------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- |
| [`layout`](/docs/app/building-your-application/routing/layouts-and-templates#layouts)     | セグメントとその子セグメントのための共有UI                                                     |
| [`page`](/docs/app/building-your-application/routing/pages)                               | ルートのユニークなUIを作成し、ルートをパブリックにアクセス可能にします                            |
| [`loading`](/docs/app/building-your-application/routing/loading-ui-and-streaming)         | セグメントとその子セグメントのためのロードUI                                                     |
| [`not-found`](/docs/app/api-reference/file-conventions/not-found)                         | セグメントとその子セグメントのための見つからないUI                                                |
| [`error`](/docs/app/building-your-application/routing/error-handling)                     | セグメントとその子セグメントのためのエラーUI                                                     |
| [`global-error`](/docs/app/building-your-application/routing/error-handling)              | グローバルエラーUI                                                                               |
| [`route`](/docs/app/building-your-application/routing/route-handlers)                     | サーバー側のAPIエンドポイント                                                                   |
| [`template`](/docs/app/building-your-application/routing/layouts-and-templates#templates) | 専門的に再レンダリングされたレイアウトUI                                                        |
| [`default`](/docs/app/api-reference/file-conventions/default)                             | [Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)のフォールバックUI |

> **Good to know**: 特別なファイルには`.js`、`.jsx`、`.tsx`のファイル拡張子を使用できます。

## コンポーネントの階層

ルートセグメントの特別なファイルで定義されたReactコンポーネントは、特定の階層でレンダリングされます：

- `layout.js`
- `template.js`
- `error.js` (React error boundary)
- `loading.js` (React suspense boundary)
- `not-found.js` (React error boundary)
- `page.js`またはネストされた`layout.js`

<Image
  alt="ファイルの規約に関するコンポーネントの階層"
  srcLight="/docs/light/file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/file-conventions-component-hierarchy.png"
  width="1600"
  height="643"
/>

ネストされたルートでは、セグメントのコンポーネントは親セグメントのコンポーネントの**内側**にネストされます。

<Image
  alt="ネストされたファイルの規約に関するコンポーネントの階層"
  srcLight="/docs/light/nested-file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/nested-file-conventions-component-hierarchy.png"
  width="1600"
  height="863"
/>

## 配置

特別なファイルに加えて、`app`ディレクトリ内のフォルダに自分のファイル（例：コンポーネント、スタイル、テストなど）を配置することも可能です。

これは、フォルダはルートを定義していますが、`page.js`または`route.js`によって返されるコンテンツのみがパブリックにアドレス可能であるためです。

<Image
  alt="配置されたファイルのフォルダ構造の例"
  srcLight="/docs/light/project-organization-colocation.png"
  srcDark="/docs/dark/project-organization-colocation.png"
  width="1600"
  height="1011"
/>

[プロジェクトの組織と配置](/docs/app/building-your-application/routing/colocation)についてもっと学びましょう。

## 高度なルーティングパターン

App Routerは、さらに高度なルーティングパターンを実装するための一連の規約を提供します。これらには以下が含まれます：

- [Parallel Routes](/docs/app/building-your-application/routing/parallel-routes): 同じビュー内で2つ以上のページを同時に表示し、それぞれを独立してナビゲートすることができます。スプリットビューで独自のサブナビゲーションを持つようになります。例：ダッシュボード。
- [Intercepting Routes](/docs/app/building-your-application/routing/intercepting-routes): 別のルートのコンテキストでルートをインターセプトして表示することができます。現在のページのコンテキストを保持することが重要な場合に使用できます。例：1つのタスクを編集しながらすべてのタスクを表示する、フィード内の写真を拡大する。

これらのパターンにより、よりリッチで複雑なUIを構築でき、小さなチームや個々の開発者が実装することが歴史的に複雑だった機能を民主化します。

## 次のステップ

Next.jsでのルーティングの基本を理解したので、以下のリンクを参照して最初のルートを作成してください：

{/* NOTE: この <DocCardList /> は手動で追加しています。自動翻訳等で更新され消えてしまった場合、必要に応じて再度追加しなおしてください */}

<DocCardList />