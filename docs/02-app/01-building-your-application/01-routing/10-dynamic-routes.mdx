---
title: 動的ルート
description: 動的ルートは、動的データからプログラム的にルートセグメントを生成するために使用できます。
related:
  title: 次のステップ
  description: 次に何をするべきかの詳細については、以下のセクションをお勧めします
  links:
    - app/building-your-application/routing/linking-and-navigating
    - app/api-reference/functions/generate-static-params
---

事前に正確なセグメント名がわからず、動的データからルートを作成したい場合は、リクエスト時に埋め込まれる動的セグメントやビルド時に[事前レンダリング](#generating-static-params)されたものを使用できます。

## 規約

動的セグメントはフォルダ名を角括弧で囲むことで作成できます：`[folderName]` 例えば、`[id]` や `[slug]` です。

動的セグメントは [`layout`](/docs/app/api-reference/file-conventions/layout)、[`page`](/docs/app/api-reference/file-conventions/page)、[`route`](/docs/app/building-your-application/routing/route-handlers)、[`generateMetadata`](/docs/app/api-reference/functions/generate-metadata#generatemetadata-function) 関数に `params` プロップとして渡されます。

## 例

たとえば、ブログには以下のようなルート `app/blog/[slug]/page.js` があります。ここで `[slug]` はブログ投稿のための動的セグメントです。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/blog/[slug]/page.tsx" switcher
export default function Page({ params }: { params: { slug: string } }) {
  return <div>My Post: {params.slug}</div>
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/blog/[slug]/page.js" switcher
export default function Page({ params }) {
  return <div>My Post: {params.slug}</div>
}
```
</TabItem>
</Tabs>


| ルート                       | 例のURL    | `params`        |
| --------------------------- | ---------- | --------------- |
| `app/blog/[slug]/page.js`   | `/blog/a`  | `{ slug: 'a' }` |
| `app/blog/[slug]/page.js`   | `/blog/b`  | `{ slug: 'b' }` |
| `app/blog/[slug]/page.js`   | `/blog/c`  | `{ slug: 'c' }` |

セグメントのパラメータを生成する方法については、[generateStaticParams()](#generating-static-params) ページを参照してください。

> **Good to know**: 動的セグメントは `pages` ディレクトリにおける[動的ルート](/docs/app/building-your-application/routing/dynamic-routes)に相当します。

## 静的パラメータの生成

`generateStaticParams` 関数は [動的ルートセグメント](/docs/app/building-your-application/routing/dynamic-routes) と組み合わせて使用し、リクエスト時ではなくビルド時にルートを[**静的に生成**](/docs/app/building-your-application/rendering/server-components#static-rendering-default)できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/blog/[slug]/page.tsx" switcher
export async function generateStaticParams() {
  const posts = await fetch('https://.../posts').then((res) => res.json())

  return posts.map((post) => ({
    slug: post.slug,
  }))
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/blog/[slug]/page.js" switcher
export async function generateStaticParams() {
  const posts = await fetch('https://.../posts').then((res) => res.json())

  return posts.map((post) => ({
    slug: post.slug,
  }))
}
```
</TabItem>
</Tabs>


`generateStaticParams` 関数の主な利点は、そのデータ取得の効率性にあります。`fetch` リクエストを使用して `generateStaticParams` 関数内でコンテンツを取得する場合、リクエストは[自動的にメモ化](/docs/app/building-your-application/caching#request-memoization)されます。つまり、同じ引数を持つ `fetch` リクエストが複数の `generateStaticParams`、レイアウト、ページで行われる場合、リクエストは一度しか行われないため、ビルド時間が短縮されます。

`pages` ディレクトリから移行する場合は、[移行ガイド](/docs/app/building-your-application/upgrading/app-router-migration#dynamic-paths-getstaticpaths)を使用してください。

詳細情報や高度な使用例については、[`generateStaticParams` サーバー関数のドキュメント](/docs/app/api-reference/functions/generate-static-params) を参照してください。

## キャッチオールセグメント

動的セグメントは、角括弧の中に三点リーダーを追加することによって、**キャッチオール** セグメントに拡張できます：`[...folderName]`

たとえば、`app/shop/[...slug]/page.js` は、`/shop/clothes` に一致しますが、`/shop/clothes/tops`、`/shop/clothes/tops/t-shirts` にも一致します。

| ルート                          | 例のURL       | `params`                    |
| ----------------------------- | -------------- | --------------------------- |
| `app/shop/[...slug]/page.js`  | `/shop/a`      | `{ slug: ['a'] }`           |
| `app/shop/[...slug]/page.js`  | `/shop/a/b`    | `{ slug: ['a', 'b'] }`      |
| `app/shop/[...slug]/page.js`  | `/shop/a/b/c`  | `{ slug: ['a', 'b', 'c'] }` |

## オプショナルキャッチオールセグメント

キャッチオールセグメントは、パラメータを二重の角括弧に含めることで**オプショナル**にできます：`[[...folderName]]`

たとえば、`app/shop/[[...slug]]/page.js` は `/shop/clothes`、`/shop/clothes/tops`、`/shop/clothes/tops/t-shirts` に加えて `/shop` にも一致します。

**キャッチオール**と**オプショナルキャッチオール**セグメントの違いは、オプショナルの場合は、パラメータがないルートにも一致する点です（上記の例では `/shop`）。

| ルート                            | 例のURL       | `params`                    |
| ------------------------------ | -------------- | --------------------------- |
| `app/shop/[[...slug]]/page.js` | `/shop`        | `{ slug: undefined }`       |
| `app/shop/[[...slug]]/page.js` | `/shop/a`      | `{ slug: ['a'] }`           |
| `app/shop/[[...slug]]/page.js` | `/shop/a/b`    | `{ slug: ['a', 'b'] }`      |
| `app/shop/[[...slug]]/page.js` | `/shop/a/b/c`  | `{ slug: ['a', 'b', 'c'] }` |

## TypeScript

TypeScriptを使用する場合、設定したルートセグメントに応じて `params` の型を追加できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/blog/[slug]/page.tsx" switcher
export default function Page({ params }: { params: { slug: string } }) {
  return <h1>My Page</h1>
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/blog/[slug]/page.js" switcher
export default function Page({ params }) {
  return <h1>My Page</h1>
}
```
</TabItem>
</Tabs>


| ルート                                 | `params` の型定義                           |
| ----------------------------------- | ----------------------------------------- |
| `app/blog/[slug]/page.js`           | `{ slug: string }`                        |
| `app/shop/[...slug]/page.js`        | `{ slug: string[] }`                      |
| `app/shop/[[...slug]]/page.js`      | `{ slug?: string[] }`                     |
| `app/[categoryId]/[itemId]/page.js` | `{ categoryId: string, itemId: string }` |

> **Good to know**: 将来的には、[TypeScriptプラグイン](/docs/app/building-your-application/configuring/typescript#typescript-plugin)によって自動化される可能性があります。
