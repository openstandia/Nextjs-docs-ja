---
title: 'Dynamic Routes'
description: 'Dynamic Routesは動的なデータからプログラム的にルートセグメントを生成するために使用できます。'
related:
  title: 'Next Steps'
  description: '次に何をするかについての詳細情報は、以下のセクションをお勧めします'
  links:
    - app/building-your-application/routing/linking-and-navigating
    - app/api-reference/functions/generate-static-params
---

正確なセグメント名を事前に知らずに動的なデータからルートを作成したい場合、リクエスト時に埋め込まれるか、ビルド時に[prerenderされる](#generating-static-params) Dynamic Segments を使用できます。

## 規約

Dynamic Segmentは、フォルダ名を角括弧で囲むことで作成できます（例：[folderName]）。例えば、`[id]`や`[slug]`です。

Dynamic Segmentsは、[`layout`](/docs/app/api-reference/file-conventions/layout)、[`page`](/docs/app/api-reference/file-conventions/page)、[`route`](/docs/app/building-your-application/routing/route-handlers)、[`generateMetadata`](/docs/app/api-reference/functions/generate-metadata#generatemetadata-function)関数に`params` propとして渡されます。

## 例

例えば、ブログであれば以下のようなルート `app/blog/[slug]/page.js` があり、`[slug]` がブログ投稿のためのDynamic Segmentです。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/blog/[slug]/page.tsx" switcher
export default function Page({ params }: { params: { slug: string } }) {
  return <div>My Post: {params.slug}</div>
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/blog/[slug]/page.js" switcher
export default function Page({ params }) {
  return <div>My Post: {params.slug}</div>
}
```
</TabItem>
</Tabs>


| ルート                      | 例のURL | `params`        |
| ------------------------- | ---------- | --------------- |
| `app/blog/[slug]/page.js` | `/blog/a`  | `{ slug: 'a' }` |
| `app/blog/[slug]/page.js` | `/blog/b`  | `{ slug: 'b' }` |
| `app/blog/[slug]/page.js` | `/blog/c`  | `{ slug: 'c' }` |

このセグメントのparamsを生成する方法については、[generateStaticParams()](#generating-static-params)のページを参照してください。

> **Good to know**: Dynamic Segmentsは`pages`ディレクトリ内の[Dynamic Routes](/docs/pages/building-your-application/routing/dynamic-routes)に相当します。

## Generating Static Params

`generateStaticParams`関数は、[dynamic route segments](/docs/app/building-your-application/routing/dynamic-routes)と組み合わせて使用することで、リクエスト時ではなくビルド時に[**静的に生成**](/docs/app/building-your-application/rendering/server-components#static-rendering-default)するためのルートを生成できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/blog/[slug]/page.tsx" switcher
export async function generateStaticParams() {
  const posts = await fetch('https://.../posts').then((res) => res.json())

  return posts.map((post) => ({
    slug: post.slug,
  }))
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/blog/[slug]/page.js" switcher
export async function generateStaticParams() {
  const posts = await fetch('https://.../posts').then((res) => res.json())

  return posts.map((post) => ({
    slug: post.slug,
  }))
}
```
</TabItem>
</Tabs>


`generateStaticParams`関数の主な利点はデータを賢く取得することにあります。`generateStaticParams`関数内で`fetch`リクエストを使ってコンテンツを取得すると、そのリクエストは[自動でメモ化](/docs/app/building-your-application/caching#request-memoization)されます。これは、同じ引数を持つ`fetch`リクエストが、複数の`generateStaticParams`、Layouts、Pagesで一度しか行われないことを意味し、ビルド時間を短縮します。

`pages`ディレクトリからの移行を行う際は、[移行ガイド](/docs/app/building-your-application/upgrading/app-router-migration#dynamic-paths-getstaticpaths)を参照してください。

詳細情報と高度な使用例については[`generateStaticParams` サーバ関数ドキュメント](/docs/app/api-reference/functions/generate-static-params)を参照してください。

## Catch-all Segments

Dynamic Segmentsは、角括弧内に省略記号を追加することで、**すべて**の後続のセグメントをキャッチするように拡張できます `[...folderName]`。

例えば、`app/shop/[...slug]/page.js`は`/shop/clothes`に一致しますが、さらに`/shop/clothes/tops`、`/shop/clothes/tops/t-shirts`などにも一致します。

| ルート                          | 例のURL      | `params`                  |
| ------------------------------ | ------------- | -------------------------- |
| `app/shop/[...slug]/page.js`   | `/shop/a`     | `{ slug: ['a'] }`           |
| `app/shop/[...slug]/page.js`   | `/shop/a/b`   | `{ slug: ['a', 'b'] }`      |
| `app/shop/[...slug]/page.js`   | `/shop/a/b/c` | `{ slug: ['a', 'b', 'c'] }` |

## Optional Catch-all Segments

Catch-all Segmentsは、パラメータを二重の角括弧で囲むことによって**オプション**にすることができます `[[...folderName]]`。

例えば、`app/shop/[[...slug]]/page.js`は`/shop`にも一致し、そのほかに`/shop/clothes`、`/shop/clothes/tops`、`/shop/clothes/tops/t-shirts`にも一致します。

**catch-all**と**optional catch-all**セグメントの違いは、オプションの場合、パラメータがないルートも一致することです（上記の例では`/shop`）。

| ルート                             | 例のURL      | `params`                  |
| ---------------------------------- | ------------- | -------------------------- |
| `app/shop/[[...slug]]/page.js`     | `/shop`       | `{ slug: undefined }`      |
| `app/shop/[[...slug]]/page.js`     | `/shop/a`     | `{ slug: ['a'] }`           |
| `app/shop/[[...slug]]/page.js`     | `/shop/a/b`   | `{ slug: ['a', 'b'] }`      |
| `app/shop/[[...slug]]/page.js`     | `/shop/a/b/c` | `{ slug: ['a', 'b', 'c'] }` |

## TypeScript

TypeScriptを使用する際、設定されたルートセグメントに応じて`params`の型を追加できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/blog/[slug]/page.tsx" switcher
export default function Page({ params }: { params: { slug: string } }) {
  return <h1>My Page</h1>
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/blog/[slug]/page.js" switcher
export default function Page({ params }) {
  return <h1>My Page</h1>
}
```
</TabItem>
</Tabs>


| ルート                               | `params` 型定義                       |
| ----------------------------------- | ------------------------------------- |
| `app/blog/[slug]/page.js`           | `{ slug: string }`                     |
| `app/shop/[...slug]/page.js`        | `{ slug: string[] }`                   |
| `app/shop/[[...slug]]/page.js`      | `{ slug?: string[] }`                  |
| `app/[categoryId]/[itemId]/page.js` | `{ categoryId: string, itemId: string }` |

> **Good to know**: これは将来的に[TypeScriptプラグイン](/docs/app/building-your-application/configuring/typescript#typescript-plugin)によって自動的に行われる可能性があります。