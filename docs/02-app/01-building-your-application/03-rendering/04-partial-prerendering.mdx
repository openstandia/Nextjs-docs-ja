---
title: éƒ¨åˆ†ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
description: éƒ¨åˆ†ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ä½¿ç”¨ã—ã¦ã€é™çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨å‹•çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®åˆ©ç‚¹ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚
---

éƒ¨åˆ†ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆPPRï¼‰ã¯ã€åŒã˜ãƒ«ãƒ¼ãƒˆã§é™çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

ãƒ“ãƒ«ãƒ‰ä¸­ã«ã€Next.jsã¯å¯èƒ½ãªé™ã‚Šãƒ«ãƒ¼ãƒˆã‚’ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚[å‹•çš„](/docs/app/building-your-application/rendering/server-components#dynamic-rendering)ã‚³ãƒ¼ãƒ‰ãŒæ¤œå‡ºã•ã‚Œã‚‹å ´åˆï¼ˆä¾‹ãˆã°ã€å—ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€å ´åˆï¼‰ã€é–¢é€£ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’[React Suspense](https://react.dev/reference/react/Suspense)å¢ƒç•Œã§ãƒ©ãƒƒãƒ—ã§ãã¾ã™ã€‚Suspenseå¢ƒç•Œã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ã€ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸHTMLã«å«ã¾ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

> **æ³¨ï¼š** éƒ¨åˆ†ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯**å®Ÿé¨“çš„**æ©Ÿèƒ½ã§ã‚ã‚Šã€å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã§ã®ä½¿ç”¨ã¯ã¾ã æº–å‚™ãŒæ•´ã£ã¦ã„ã¾ã›ã‚“ã€‚

<Image
  alt="é™çš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨å•†å“æƒ…å ±ã€ãŠã‚ˆã³å‹•çš„ãªã‚«ãƒ¼ãƒˆã¨ãŠã™ã™ã‚å•†å“ã®è¡¨ç¤ºã‚’è¡Œã†éƒ¨åˆ†çš„ã«ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸå•†å“ãƒšãƒ¼ã‚¸"
  srcLight="/learn/light/thinking-in-ppr.png"
  srcDark="/learn/dark/thinking-in-ppr.png"
  width="1600"
  height="632"
/>

> **ğŸ¥ è¦–è´:** Why PPR and how it works â†’ [YouTube (10 åˆ†)](https://www.youtube.com/watch?v=MTcPrTIBkpA).

## èƒŒæ™¯

PPRã¯ã€Next.jsã‚µãƒ¼ãƒãƒ¼ãŒãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å³åº§ã«é€ä¿¡ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã‚µãƒ¼ãƒãƒ¼é–“ã®ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ã‚’é˜²ããŸã‚ã«ã€å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯åˆæœŸãƒ—ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’æä¾›ã™ã‚‹é–“ã«ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ä¸¦åˆ—ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®JavaScriptãŒãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹å‰ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é–‹å§‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

å„å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã”ã¨ã«å¤šãã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’é˜²ããŸã‚ã«ã€PPRã¯é™çš„ãƒ—ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’1ã¤ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã«çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å„å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦è¤‡æ•°ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå¿…è¦ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

## éƒ¨åˆ†ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ä½¿ç”¨

### ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«æ¡ç”¨ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³15ï¼‰

Next.js 15ã§ã¯ã€[`ppr`](/docs/app/api-reference/next-config-js/ppr)ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’`next.config.js`ã§`incremental`ã«è¨­å®šã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€ä¸Šéƒ¨ã§`experimental_ppr`ã®[ãƒ«ãƒ¼ãƒˆè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³](/docs/app/api-reference/file-conventions/route-segment-config)ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã§ã€éƒ¨åˆ†ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’[ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ](/docs/app/building-your-application/routing/layouts-and-templates)ã¨[ãƒšãƒ¼ã‚¸](/docs/app/building-your-application/routing/pages)ã§æ®µéšçš„ã«æ¡ç”¨ã§ãã¾ã™:

```ts filename="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    ppr: 'incremental',
  },
}

export default nextConfig
```

```js filename="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    ppr: 'incremental',
  },
}

module.exports = nextConfig
```

```tsx filename="app/page.tsx" switcher
import { Suspense } from "react"
import { StaticComponent, DynamicComponent, Fallback } from "@/app/ui"

export const experimental_ppr = true

export default function Page() {
  return {
     <>
      <StaticComponent />
      <Suspense fallback={<Fallback />}>
        <DynamicComponent />
      </Suspense>
     </>
  };
}
```

```jsx filename="app/page.js" switcher
import { Suspense } from "react"
import { StaticComponent, DynamicComponent, Fallback } from "@/app/ui"

export const experimental_ppr = true

export default function Page() {
  return {
     <>
      <StaticComponent />
      <Suspense fallback={<Fallback />}>
        <DynamicComponent />
      </Suspense>
     </>
  };
}
```

> **Good to know**:
>
> - `experimental_ppr`ãŒç„¡ã„ãƒ«ãƒ¼ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§`false`ã«ãªã‚Šã€PPRã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ¬ãƒ³ãƒ€ãƒ¼ã•ã‚Œã¾ã›ã‚“ã€‚å„ãƒ«ãƒ¼ãƒˆã”ã¨ã«æ˜ç¤ºçš„ã«PPRã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
> - `experimental_ppr`ã¯ã€ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚„ãƒšãƒ¼ã‚¸ã‚’å«ã‚€ãƒ«ãƒ¼ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®ã™ã¹ã¦ã®å­ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã™ã‚‹å¿…è¦ã¯ãªãã€ãƒ«ãƒ¼ãƒˆã®æœ€ä¸Šæ®µã‚»ã‚°ãƒ¡ãƒ³ãƒˆã«ã®ã¿å¿…è¦ã§ã™
> - å­ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®PPRã‚’ç„¡åŠ¹ã«ã™ã‚‹ã«ã¯ã€å­ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã§`experimental_ppr`ã‚’`false`ã«è¨­å®šã§ãã¾ã™

### PPRã®æœ‰åŠ¹åŒ–ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³14ï¼‰

ãƒãƒ¼ã‚¸ãƒ§ãƒ³14ã®å ´åˆã€`next.config.js`ãƒ•ã‚¡ã‚¤ãƒ«ã«[`ppr`](/docs/app/api-reference/next-config-js/ppr)ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§æœ‰åŠ¹åŒ–ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒˆã«é©ç”¨ã•ã‚Œã¾ã™:

```ts filename="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    ppr: true,
  },
}

export default nextConfig
```

```js filename="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    ppr: true,
  },
}

module.exports = nextConfig
```

## å‹•çš„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

`next build`ä¸­ã«ãƒ«ãƒ¼ãƒˆã®ãƒ—ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½œæˆã™ã‚‹éš›ã€Next.jsã¯ã€å‹•çš„é–¢æ•°ãŒReact Suspenseã§ãƒ©ãƒƒãƒ—ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’è¦æ±‚ã—ã¾ã™ã€‚`fallback`ãŒãƒ—ãƒ¬ãƒ³ãƒ€ãƒ¼ã«å«ã¾ã‚Œã¾ã™ã€‚

ä¾‹ãˆã°ã€`cookies()`ã‚„`headers()`ã®ã‚ˆã†ãªé–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆ:

```jsx filename="app/user.js" switcher
import { cookies } from 'next/headers'

export function User() {
  const session = cookies().get('session')?.value
  return '...'
}
```

```tsx filename="app/user.tsx" switcher
import { cookies } from 'next/headers'

export function User() {
  const session = cookies().get('session')?.value
  return '...'
}
```

ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ã‚¯ãƒƒã‚­ãƒ¼ã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã«å—ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚’PPRã§ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Suspenseã§ãƒ©ãƒƒãƒ—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™:

```tsx filename="app/page.tsx" switcher
import { Suspense } from 'react'
import { User, AvatarSkeleton } from './user'

export const experimental_ppr = true

export default function Page() {
  return (
    <section>
      <h1>ã“ã‚Œã¯ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™</h1>
      <Suspense fallback={<AvatarSkeleton />}>
        <User />
      </Suspense>
    </section>
  )
}
```

```jsx filename="app/page.js" switcher
import { Suspense } from 'react'
import { User, AvatarSkeleton } from './user'

export const experimental_ppr = true

export default function Page() {
  return (
    <section>
      <h1>ã“ã‚Œã¯ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™</h1>
      <Suspense fallback={<AvatarSkeleton />}>
        <User />
      </Suspense>
    </section>
  )
}
```

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€å€¤ãŒã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ã¨ãã«ã®ã¿å‹•çš„ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é¸æŠã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€`ãƒšãƒ¼ã‚¸`ã‹ã‚‰`searchParams`ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹å ´åˆã€ãã®å€¤ã‚’ãƒ—ãƒ­ãƒƒãƒ—ã¨ã—ã¦åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è»¢é€ã§ãã¾ã™:

```tsx filename="app/page.tsx" switcher
import { Table } from './table'

export default function Page({
  searchParams,
}: {
  searchParams: { sort: string }
}) {
  return (
    <section>
      <h1>ã“ã‚Œã¯ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™</h1>
      <Table searchParams={searchParams} />
    </section>
  )
}
```

```jsx filename="app/page.js" switcher
import { Table } from './table'

export default function Page({ searchParams }) {
  return (
    <section>
      <h1>ã“ã‚Œã¯ãƒ—ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™</h1>
      <Table searchParams={searchParams} />
    </section>
  )
}
```

ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ã€`searchParams`ã‹ã‚‰ã®å€¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å‹•çš„ã«å‹•ä½œã—ã¾ã™:

```tsx filename="app/table.tsx" switcher
export function Table({ searchParams }: { searchParams: { sort: string } }) {
  const sort = searchParams.sort === 'true'
  return '...'
}
```

```jsx filename="app/table.js" switcher
export function Table({ searchParams }: {
  searchParams: { sort: string }
}) {
  const sort = searchParams.sort === 'true';
  return '...'
}
```
