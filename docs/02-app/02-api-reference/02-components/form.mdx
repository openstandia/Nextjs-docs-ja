---
title: '<Form>'
description: 'クライアントサイドのナビゲーションを使用して、フォーム送信や検索パラメータの更新を処理するための `<Form>` コンポーネントの使い方を学ぶ'
---

`<Form>` コンポーネントは、HTML `<form>` 要素を拡張して、<AppOnly>[**プリフェッチ**](/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)や、[読み込み UI](/docs/app/building-your-application/routing/loading-ui-and-streaming)</AppOnly>、**クライアントサイドのナビゲーション**、そして**漸進的な強化**を提供します。

これは、URLの検索パラメータを更新するフォームに便利で、上記を実現するために必要なボイラープレートコードを削減します。

基本的な使い方：

<AppOnly>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/ui/search.js" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加されます
          例えば /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/ui/search.js" switcher
import Form from 'next/form'

export default function Search() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加されます
          例えば /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</TabItem>
</Tabs>

</AppOnly>

<PagesOnly>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/ui/search.js" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加されます
          例えば /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/ui/search.js" switcher
import Form from 'next/form'

export default function Search() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加されます
          例えば /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</TabItem>
</Tabs>

</PagesOnly>

## リファレンス {#reference}

`<Form>` コンポーネントの動作は、`action` prop が `string` または `function` を受け取るかによって異なります。

<AppOnly>

- `action` が **string** の場合、 `<Form>` はネイティブHTMLフォームのように **`GET`** メソッドを使用します。フォームデータはURLにエンコードされ、フォームが送信されると指定されたURLにナビゲートします。さらに、Next.jsは：
  - フォームが可視化されるとパスを[プリフェッチ](/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)し、共通のUI（例えば `layout.js` や `loading.js`）を事前に読み込み、高速なナビゲーションを実現します。
  - フォームが送信されたときに、完全ページリロードではなく[クライアントサイドナビゲーション](/docs/app/building-your-application/routing/linking-and-navigating#5-soft-navigation)を実行します。これにより、共有UIとクライアントサイドの状態が保持されます。
- `action` が **function**（Server Action）の場合、 `<Form>` は[React フォーム](https://react.dev/reference/react-dom/components/form)のように動作し、フォーム送信時にアクションを実行します。

</AppOnly>

<PagesOnly>

- `action` が **string** の場合、 `<Form>` はネイティブHTMLフォームのように **`GET`** メソッドを使用します。フォームデータはURLにエンコードされ、フォームが送信されると指定されたURLにナビゲートします。さらに、Next.jsは：
  - フォームが送信されたときに、完全ページリロードではなく[クライアントサイドナビゲーション](/docs/app/building-your-application/routing/linking-and-navigating#5-soft-navigation)を実行します。これにより、共有UIとクライアントサイドの状態が保持されます。

</PagesOnly>

### `action` (string) Props {#action-string-props}

<PagesOnly>

`action` が string である場合、 `<Form>` コンポーネントは以下の prop をサポートします：

| Prop      | Example            | Type                          | Required |
| --------- | ------------------ | ----------------------------- | -------- |
| `action`  | `action="/search"` | `string` (URL または相対パス) | Yes      |
| `replace` | `replace={false}`  | `boolean`                     | -        |
| `scroll`  | `scroll={true}`    | `boolean`                     | -        |

- **`action`**: フォームが送信されるとナビゲートするURLまたはパスを指定します。
  - 空の文字列 `""` は検索パラメータを更新して同じルートにナビゲートします。
- **`replace`**: [ブラウザの履歴](https://developer.mozilla.org/en-US/docs/Web/API/History_API)スタックに新しい状態をプッシュする代わりに現在の履歴状態を置き換えます。デフォルトは `false` です。
- **`scroll`**: ナビゲーション時のスクロール動作を制御します。デフォルトは `true` で、新しいルートのトップにスクロールし、後方および前方のナビゲーション用にスクロール位置を維持します。

</PagesOnly>

<AppOnly>

`action` が string である場合、 `<Form>` コンポーネントは以下の prop をサポートします：

| Prop       | Example            | Type                          | Required |
| ---------- | ------------------ | ----------------------------- | -------- |
| `action`   | `action="/search"` | `string` (URL または相対パス) | Yes      |
| `replace`  | `replace={false}`  | `boolean`                     | -        |
| `scroll`   | `scroll={true}`    | `boolean`                     | -        |
| `prefetch` | `prefetch={true}`  | `boolean`                     | -        |

- **`action`**: フォームが送信されるとナビゲートするURLまたはパスを指定します。
  - 空の文字列 `""` は検索パラメータを更新して同じルートにナビゲートします。
- **`replace`**: [ブラウザの履歴](https://developer.mozilla.org/en-US/docs/Web/API/History_API)スタックに新しい状態をプッシュする代わりに現在の履歴状態を置き換えます。デフォルトは `false` です。
- **`scroll`**: ナビゲーション時のスクロール動作を制御します。デフォルトは `true` で、新しいルートのトップにスクロールし、後方および前方のナビゲーション用にスクロール位置を維持します。
- **`prefetch`**: フォームがユーザーのビューポートに可視になるときに、パスをプリフェッチするかどうかを制御します。デフォルトは `true` です。

### `action` (function) Props {#action-function-props}

`action` が function である場合、 `<Form>` コンポーネントは以下の prop をサポートします：

| Prop     | Example             | Type                       | Required |
| -------- | ------------------- | -------------------------- | -------- |
| `action` | `action={myAction}` | `function` (Server Action) | Yes      |

- **`action`**: フォームが送信されると呼び出される Server Action です。詳細は[React のドキュメント](https://react.dev/reference/react-dom/components/form#props)を参照してください。

> **Good to know**: `action` が function の場合、 `replace` や `scroll` の prop は無視されます。

</AppOnly>

### 注意点 {#caveats}

<AppOnly>

- **`formAction`**: `<button>` や `<input type="submit">` において、 `action` prop を上書きするために使用できます。Next.js はクライアントサイドのナビゲーションを実行しますが、この方法はプリフェッチをサポートしません。
  - [`basePath`](/docs/app/api-reference/next-config-js/basePath)を使用する場合、 `formAction` パスにも含める必要があります。例えば `formAction="/base-path/search"`。
- **`key`**: string `action` に `key` prop を渡すことはサポートされていません。再レンダーをトリガーしたい場合やミューテーションを行いたい場合は、function `action` を使用することを検討してください。

</AppOnly>

- **`onSubmit`**: フォーム送信ロジックを処理するために使用できます。しかし、 `event.preventDefault()` を呼び出すと、指定されたURLにナビゲートする `<Form>` の動作が上書きされます。
- **[`method`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#method), [`encType`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#enctype), [`target`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#target)**: は `<Form>` の動作を上書きするためサポートされていません。
  - 同様に、 `formMethod` 、 `formEncType` 、および `formTarget` はそれぞれ `method` 、 `encType` 、および `target` の prop を上書きするために使用でき、使用するとネイティブブラウザの動作にフォールバックします。
  - これらの prop を使用する必要がある場合は、HTML `<form>` 要素を使用してください。
- **`<input type="file">`**: `action` が string の場合、この入力タイプを使用すると、ファイルオブジェクトではなくファイル名がブラウザの行動に応じて送信されます。

<AppOnly>

## 例 {#examples}

### 検索結果ページに移動する検索フォーム {#search-form-that-leads-to-a-search-result-page}

パスを `action` として渡すことで、検索結果ページにナビゲートする検索フォームを作成できます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/page.tsx" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/page.js" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</TabItem>
</Tabs>

ユーザーが検索クエリ入力フィールドを更新し、フォームを送信すると、フォームデータはURLにエンコードされて検索パラメータとして `/search?query=abc` のように送信されます。

> **Good to know**: `action` に空の文字列 `""` を渡すと、フォームは検索パラメータを更新して同じルートにナビゲートします。

結果ページでは、 `searchParams` `page.js` prop を使用してクエリを取得し、外部ソースからデータを取得できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/search/page.tsx" switcher
import { getSearchResults } from '@/lib/search'

export default async function SearchPage({
  searchParams,
}: {
  searchParams: { [key: string]: string | string[] | undefined }
}) {
  const results = await getSearchResults(searchParams.query)

  return <div>...</div>
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/search/page.js" switcher
import { getSearchResults } from '@/lib/search'

export default async function SearchPage({ searchParams }) {
  const results = await getSearchResults(searchParams.query)

  return <div>...</div>
}
```

</TabItem>
</Tabs>

フォームがユーザーのビューポートに可視化されると、 `/search` ページの `layout.js` や `loading.js` などの共有 UI がプリフェッチされます。送信時には、フォームはすぐに新しいルートにナビゲートし、結果が取得されるまでの間にロード中の UI を表示します。フォールバック UI をデザインするためには、 [`loading.js`](/docs/app/api-reference/file-conventions/loading) を使用できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/search/loading.tsx" switcher
export default function Loading() {
  return <div>Loading...</div>
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/search/loading.js" switcher
export default function Loading() {
  return <div>Loading...</div>
}
```

</TabItem>
</Tabs>

共有 UI がまだ読み込まれていない場合を想定して、[`useFormStatus`](https://react.dev/reference/react-dom/hooks/useFormStatus) を使用してユーザーに即時のフィードバックを送信することができます。

はじめに、フォームがペンディング状態になったときにローディングステートを表示するコンポーネントを作成します：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/ui/search-button.tsx" switcher
'use client'
import { useFormStatus } from 'react-dom'

export default function SearchButton() {
  const status = useFormStatus()
  return (
    <button type="submit">{status.pending ? 'Searching...' : 'Search'}</button>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/ui/search-button.js" switcher
'use client'
import { useFormStatus } from 'react-dom'

export default function SearchButton() {
  const status = useFormStatus()
  return (
    <button type="submit">{status.pending ? 'Searching...' : 'Search'}</button>
  )
}
```

</TabItem>
</Tabs>

次に、検索フォームページを `SearchButton` コンポーネントを使用するように更新します：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/page.tsx" switcher
import Form from 'next/form'
import { SearchButton } from '@/ui/search-button'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <SearchButton />
    </Form>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/page.js" switcher
import Form from 'next/form'
import { SearchButton } from '@/ui/search-button'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <SearchButton />
    </Form>
  )
}
```

</TabItem>
</Tabs>

### Server Actions によるミューテーション {#mutations-with-server-actions}

`action` prop に function を渡すことで、ミューテーションを実行できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/posts/create/page.tsx" switcher
import Form from 'next/form'
import { createPost } from '@/posts/actions'

export default function Page() {
  return (
    <Form action={createPost}>
      <input name="title" />
      {/* ... */}
      <button type="submit">Create Post</button>
    </Form>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/posts/create/page.js" switcher
import Form from 'next/form'
import { createPost } from '@/posts/actions'

export default function Page() {
  return (
    <Form action={createPost}>
      <input name="title" />
      {/* ... */}
      <button type="submit">Create Post</button>
    </Form>
  )
}
```

</TabItem>
</Tabs>

ミューテーション後には、新しいリソースにリダイレクトすることが一般的です。`next/navigation` から [`redirect`](/docs/app/building-your-application/routing/redirecting) 関数を使用して、新しい投稿ページに移動できます。

> **Good to know**: フォーム送信の「宛先」はアクションが実行されるまでわからないため、 `<Form>` は自動的に共有 UI をプリフェッチできません。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/posts/actions.ts" switcher
'use server'
import { redirect } from 'next/navigation'

export async function createPost(formData: FormData) {
  // 新しい投稿を作成する
  // ...

  // 新しい投稿にリダイレクトする
  redirect(`/posts/${data.id}`)
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/posts/actions.js" switcher
'use server'
import { redirect } from 'next/navigation'

export async function createPost(formData) {
  // 新しい投稿を作成する
  // ...

  // 新しい投稿にリダイレクトする
  redirect(`/posts/${data.id}`)
}
```

</TabItem>
</Tabs>

Then, in the new page, you can fetch data using the `params` prop:

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="/app/posts/[id]/page.tsx" switcher
import { getPost } from '@/posts/data'

export default async function PostPage({
  params,
}: {
  params: Promise<{ id: string }>
}) {
  const data = await getPost((await params).id)

  return (
    <div>
      <h1>{data.title}</h1>
      {/* ... */}
    </div>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="/app/posts/[id]/page.js" switcher
import { getPost } from '@/posts/data'

export default async function PostPage({ params }) {
  const data = await getPost((await params).id)

  return (
    <div>
      <h1>{data.title}</h1>
      {/* ... */}
    </div>
  )
}
```

</TabItem>
</Tabs>

サーバーアクションとミューテーションに関する詳細な例は、[Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations) のドキュメントを参照してください。

</AppOnly>
