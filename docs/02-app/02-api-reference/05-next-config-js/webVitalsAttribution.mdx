---
title: webVitalsAttribution
description: Web Vitals の問題の原因を特定するために webVitalsAttribution オプションの使用方法を学びます。
---

{/* このドキュメントの内容はアプリとページルーターの間で共有されています。ページルーターに固有の内容を追加するには、`<PagesOnly>Content</PagesOnly>` コンポーネントを使用できます。共有コンテンツは、コンポーネントにラップしないでください。 */}

Web Vitals に関連する問題をデバッグする際には、問題の原因を特定できると非常に役立ちます。
例えば、累積レイアウトシフト（CLS）の場合、最も大きなレイアウトシフトが発生したときにシフトした最初の要素を知りたいかもしれません。
また、最大コンテンツ表示（LCP）の場合、そのページにおける LCP に対応する要素を特定することが重要です。
LCP 要素が画像である場合、画像リソースの URL を知ることで、最適化が必要なアセットを特定することができます。

Web Vitals スコアの最大の要因を特定すること、すなわち [attribution](https://github.com/GoogleChrome/web-vitals/blob/4ca38ae64b8d1e899028c692f94d4c56acfc996c/README.md#attribution) は、
[PerformanceEventTiming](https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming)、[PerformanceNavigationTiming](https://developer.mozilla.org/docs/Web/API/PerformanceNavigationTiming)、および [PerformanceResourceTiming](https://developer.mozilla.org/docs/Web/API/PerformanceResourceTiming) のエントリーのような、より詳細な情報を取得することを可能にします。

Attribution はデフォルトでは Next.js で無効ですが、次のように `next.config.js` に設定することで、**メトリックごとに**有効化できます。

```js filename="next.config.js"
experimental: {
  webVitalsAttribution: ['CLS', 'LCP']
}
```

有効なアトリビューション値は、 [`NextWebVitalsMetric`](https://github.com/vercel/next.js/blob/442378d21dd56d6e769863eb8c2cb521a463a2e0/packages/next/shared/lib/utils.ts#L43) タイプで指定されたすべての `web-vitals` メトリックです。