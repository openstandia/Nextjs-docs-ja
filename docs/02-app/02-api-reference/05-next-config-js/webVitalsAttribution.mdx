---
title: 'webVitalsAttribution'
description: 'Web Vitals の問題の原因を特定するために webVitalsAttribution オプションを使用する方法を学びます'
---

{/* このドキュメントの内容は、app および pages router 間で共有されています。Pages Router に特有の内容を追加するには、`<PagesOnly>Content</PagesOnly>` コンポーネントを使用できます。共有コンテンツはコンポーネントでラップしないでください */}

Web Vitals に関連する問題のデバッグ時には、問題の原因を特定できると非常に助かります。
たとえば、Cumulative Layout Shift（CLS）の場合、最大のレイアウトシフトが発生したときに最初にシフトした要素を知りたいかもしれません。
また、Largest Contentful Paint（LCP）の場合、ページのLCPに対応する要素を特定したいと考えるかもしれません。
もしLCP要素が画像である場合、その画像リソースのURLを知ることで、最適化すべきアセットを見つけるのに役立ちます。

Web Vitals スコアの最大の要因、つまり[attribution](https://github.com/GoogleChrome/web-vitals/blob/4ca38ae64b8d1e899028c692f94d4c56acfc996c/README.md#attribution)を特定することにより、
[PerformanceEventTiming](https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming)、[PerformanceNavigationTiming](https://developer.mozilla.org/docs/Web/API/PerformanceNavigationTiming)、および [PerformanceResourceTiming](https://developer.mozilla.org/docs/Web/API/PerformanceResourceTiming) のエントリのような、更に詳細な情報を入手できます。

Attribution は Next.js ではデフォルトで無効になっていますが、`next.config.js` で以下のように指定することで、**メトリックごとに**有効にできます。

```js title="next.config.js"
experimental: {
  webVitalsAttribution: ['CLS', 'LCP']
}
```

有効な attribution の値は、[`NextWebVitalsMetric`](https://github.com/vercel/next.js/blob/442378d21dd56d6e769863eb8c2cb521a463a2e0/packages/next/shared/lib/utils.ts#L43) タイプで指定されたすべての `web-vitals` メトリックです。