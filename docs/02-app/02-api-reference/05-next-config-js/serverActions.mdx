---
title: 'serverActions'
description: 'Next.jsアプリケーションでServer Actionsの動作を設定する'
---

Next.jsアプリケーションでServer Actionsの動作を設定するためのオプション

## `allowedOrigins`

Server Actionsを呼び出すことができる追加の安全な起源ドメインのリストです。Next.jsはServer Actionリクエストの起源とホストドメインを比較し、一致することを確認してCSRF攻撃を防止します。指定しない場合、同一オリジンのみが許可されます。

```js filename="next.config.js"
/** @type {import('next').NextConfig} */

module.exports = {
  experimental: {
    serverActions: {
      allowedOrigins: ['my-proxy.com', '*.my-proxy.com'],
    },
  },
}
```

## `bodySizeLimit`

デフォルトでは、Server Actionに送信されるリクエストボディの最大サイズは1MBに設定されています。これは、大量のデータを解析する際のサーバーリソースの過剰消費や潜在的なDDoS攻撃を防ぐためです。

ただし、この制限は`serverActions.bodySizeLimit`オプションを使って設定できます。バイト数や、`1000`、`'500kb'`、`'3mb'`のようにバイトでサポートされている任意の文字列形式を指定できます。

```js filename="next.config.js"
/** @type {import('next').NextConfig} */

module.exports = {
  experimental: {
    serverActions: {
      bodySizeLimit: '2mb',
    },
  },
}
```

## Server Actionsの有効化（v13）

Server ActionsはNext.js 14で安定した機能となり、デフォルトで有効化されています。しかし、より古いバージョンのNext.jsを使用している場合は、`experimental.serverActions`を`true`に設定することで有効化できます。

```js filename="next.config.js"
/** @type {import('next').NextConfig} */
const config = {
  experimental: {
    serverActions: true,
  },
}

module.exports = config
```