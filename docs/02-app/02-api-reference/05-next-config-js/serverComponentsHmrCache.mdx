---
title: 'serverComponentsHmrCache'
description: 'Server Component内のfetchレスポンスがHMRリフレッシュリクエスト間でキャッシュされるかどうかを設定します。'
version: 'experimental'
---

実験的な `serverComponentsHmrCache` オプションを使用すると、ローカル開発環境でのホットモジュール置換（HMR）リフレッシュ時に、Server Component内の `fetch` レスポンスをキャッシュすることができます。これにより、応答が高速になり、請求されるAPI呼び出しのコストが削減されます。

デフォルトでは、HMRキャッシュは `cache: 'no-store'` オプションを含むすべての `fetch` リクエストに適用されます。これは、HMRリフレッシュ間で新しいデータが表示されないことを意味します。ただし、ナビゲーションまたはページ全体のリロード時にキャッシュはクリアされます。

`serverComponentsHmrCache` を `false` に設定することで、`next.config.js` ファイルでHMRキャッシュを無効にできます：

```ts filename="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    serverComponentsHmrCache: false, // デフォルトは true
  },
}

export default nextConfig
```

```js filename="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    serverComponentsHmrCache: false, // デフォルトは true
  },
}

module.exports = nextConfig
```

> **Good to know:** 観測性を向上させるために、開発中にコンソールでのfetchキャッシュのヒットとミスをログに記録する [`logging.fetches`](/docs/app/api-reference/next-config-js/logging) オプションの使用をお勧めします。