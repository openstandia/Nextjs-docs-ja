---
title: 'next.config.js オプション'
description: 'next.config.js でアプリケーションを設定する方法を学びましょう。'
---

{/* このドキュメントの内容は、app router と pages router の両方で共有されています。`<PagesOnly>Content</PagesOnly>`コンポーネントを使用して、Pages Router 固有のコンテンツを追加できます。共有されるコンテンツは、コンポーネントでラップしないでください。 */}

Next.js は、プロジェクトディレクトリのルート（例えば、`package.json` の横）にある `next.config.js` ファイルのデフォルトエクスポートを通じて設定できます。

```js title="next.config.js"
// @ts-check

/** @type {import('next').NextConfig} */
const nextConfig = {
  /* ここに設定オプションを記述します */
}

module.exports = nextConfig
```

## ECMAScript モジュール {#ecmascript-modules}

`next.config.js` は通常の Node.js モジュールであり、JSON ファイルではありません。これは Next.js のサーバーおよびビルド段階で利用され、ブラウザのビルドには含まれません。

[ECMAScript モジュール](https://nodejs.org/api/esm.html)が必要な場合は、`next.config.mjs` を使用できます：

```js title="next.config.mjs"
// @ts-check

/**
 * @type {import('next').NextConfig}
 */
const nextConfig = {
  /* ここに設定オプションを記述します */
}

export default nextConfig
```

> **Good to know**: 拡張子が `.cjs`、`.cts`、または `.mts` の `next.config` は現在サポートされて**いません**。

## 関数としての設定 {#configuration-as-a-function}

関数として設定を使用することもできます：

```js title="next.config.mjs"
// @ts-check

export default (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* ここに設定オプションを記述します */
  }
  return nextConfig
}
```

### 非同期設定 {#async-configuration}

Next.js 12.1.0 以降では、非同期関数を使用できます：

```js title="next.config.js"
// @ts-check

module.exports = async (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* ここに設定オプションを記述します */
  }
  return nextConfig
}
```

### フェーズ {#phase}

`phase` は、設定がロードされている現在のコンテキストです。[利用可能なフェーズ](https://github.com/vercel/next.js/blob/5e6b008b561caf2710ab7be63320a3d549474a5b/packages/next/shared/lib/constants.ts#L19-L23)を確認できます。フェーズは `next/constants` からインポートできます：

```js title="next.config.js"
// @ts-check

const { PHASE_DEVELOPMENT_SERVER } = require('next/constants')

module.exports = (phase, { defaultConfig }) => {
  if (phase === PHASE_DEVELOPMENT_SERVER) {
    return {
      /* 開発専用の設定オプションをここに記述します */
    }
  }

  return {
    /* 開発を除くすべてのフェーズの設定オプションをここに記述します */
  }
}
```

## TypeScript {#typescript}

プロジェクトで TypeScript を使用している場合は、設定に TypeScript を使用するために [`next.config.ts`](/docs/app/building-your-application/configuring/typescript#type-checking-nextconfigts) を使用できます：

```ts title="next.config.ts"
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  /* ここに設定オプションを記述します */
}

export default nextConfig
```

コメント行は、`next.config.js` によって許可された設定を記述できる場所で、これらは[このファイルで定義されています](https://github.com/vercel/next.js/blob/canary/packages/next/src/server/config-shared.ts)。

ただし、設定のいずれも必須ではなく、それぞれの設定が何をするか理解する必要もありません。それよりも、このセクションで有効化または変更する必要のある機能を検索すると、何をすべきかが示されます。

> ターゲットの Node.js バージョンで利用できない新しい JavaScript 機能の使用は避けてください。`next.config.js` は Webpack や Babel によってパースされません。

このページでは、利用可能なすべての設定オプションを文書化しています：

{/* NOTE: この <DocCardList /> は手動で追加しています。自動翻訳等で更新され消えてしまった場合、必要に応じて再度追加しなおしてください */}

<DocCardList />
