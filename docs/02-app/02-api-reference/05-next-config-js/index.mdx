---
title: 'next.config.js のオプション'
description: 'next.config.js でアプリケーションを設定する方法を学びましょう。'
---

{/* このドキュメントの内容は、app router と pages router の間で共有されています。Pages Router に特化したコンテンツを追加するには `<PagesOnly>Content</PagesOnly>` コンポーネントを使用してください。 共有コンテンツはコンポーネントでラップすべきではありません。 */}

Next.jsはプロジェクトディレクトリのルート（例えば、`package.json` の近く）にある `next.config.js` ファイルを介して設定できます。設定ファイルはデフォルトエクスポートを使用します。

```js title="next.config.js"
// @ts-check

/** @type {import('next').NextConfig} */
const nextConfig = {
  /* 設定オプションはここに記述します */
}

module.exports = nextConfig
```

## ECMAScript Modules

`next.config.js` は通常の Node.js モジュールであり、JSON ファイルではありません。Next.js サーバーとビルドフェーズで使用され、ブラウザービルドには含まれません。

[ECMAScriptモジュール](https://nodejs.org/api/esm.html)が必要な場合は、`next.config.mjs` を使用できます。

```js title="next.config.mjs"
// @ts-check

/**
 * @type {import('next').NextConfig}
 */
const nextConfig = {
  /* 設定オプションはここに記述します */
}

export default nextConfig
```

> **Good to know**: `.cjs`、`.cts`、`.mts` 拡張子を持つ `next.config` は現在サポートされていません。

## 関数としての設定

関数を使用することもできます。

```js title="next.config.mjs"
// @ts-check

export default (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* 設定オプションはここに記述します */
  }
  return nextConfig
}
```

### 非同期設定

Next.js 12.1.0以降、非同期関数を使用できます。

```js title="next.config.js"
// @ts-check

module.exports = async (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* 設定オプションはここに記述します */
  }
  return nextConfig
}
```

### フェーズ

`phase` は設定が読み込まれる現在のコンテキストです。利用可能なフェーズは[こちらで確認できます](https://github.com/vercel/next.js/blob/5e6b008b561caf2710ab7be63320a3d549474a5b/packages/next/shared/lib/constants.ts#L19-L23)。フェーズは `next/constants` からインポート可能です。

```js title="next.config.js"
// @ts-check

const { PHASE_DEVELOPMENT_SERVER } = require('next/constants')

module.exports = (phase, { defaultConfig }) => {
  if (phase === PHASE_DEVELOPMENT_SERVER) {
    return {
      /* 開発用の設定オプションはここに記述します */
    }
  }

  return {
    /* 開発以外のすべてのフェーズのための設定オプションはここに記述します */
  }
}
```

## TypeScript

> この機能は Next.js のカナリア版から利用可能です。

プロジェクトでTypeScriptを使用している場合は、[`next.config.ts`](/docs/app/building-your-application/configuring/typescript#type-checking-nextconfigts) を使用して、設定にTypeScriptを使用できます。

```ts title="next.config.ts"
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  /* 設定オプションはここに記述します */
}

export default nextConfig
```

コメント行は、`next.config.js` で許可されている設定を記述する場所です。それらは[このファイル](https://github.com/vercel/next.js/blob/canary/packages/next/src/server/config-shared.ts)で定義されています。

しかし、どの設定も必須ではなく、各設定が何をするかを理解する必要もありません。代わりに、このセクションの中で有効にしたい機能や変更したい項目を探し、それをどのように行うかを示します。

> ターゲットの Node.js バージョンで利用できない新しい JavaScript 機能を使用しないでください。`next.config.js` は Webpack または Babel によって解析されません。

このページでは、利用可能なすべての設定オプションを記載しています。