---
title: next.config.jsオプション
description: next.config.jsを使用してアプリケーションを設定する方法を学びましょう。
---

{/* このドキュメントの内容は、アプリルーターとページルーターの間で共有されています。`<PagesOnly>Content</PagesOnly>`コンポーネントを使用して、ページルーターに特有のコンテンツを追加できます。共有されるコンテンツは、コンポーネントでラップしないでください。 */}

Next.jsは、プロジェクトディレクトリのルート（たとえば、`package.json`の隣）にある`next.config.js`ファイルによって設定できます。これにはデフォルトのエクスポートを使用します。

```js filename="next.config.js"
// @ts-check

/** @type {import('next').NextConfig} */
const nextConfig = {
  /* 設定オプションはここに記述 */
}

module.exports = nextConfig
```

## ECMAScript Modules

`next.config.js`は通常のNode.jsモジュールであり、JSONファイルではありません。これはNext.jsサーバーとビルドフェーズで使用され、ブラウザのビルドには含まれません。

[ECMAScriptモジュール](https://nodejs.org/api/esm.html)が必要な場合は、`next.config.mjs`を使用できます：

```js filename="next.config.mjs"
// @ts-check

/**
 * @type {import('next').NextConfig}
 */
const nextConfig = {
  /* 設定オプションはここに記述 */
}

export default nextConfig
```

> **Good to know**: 現在、`.cjs`、`.cts`、または`.mts`の拡張子を持つ`next.config`は**サポートされていません**。

## 関数としての設定

関数を使用することもできます：

```js filename="next.config.mjs"
// @ts-check

export default (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* 設定オプションはここに記述 */
  }
  return nextConfig
}
```

### 非同期設定

Next.js 12.1.0以降、非同期関数を使用できます：

```js filename="next.config.js"
// @ts-check

module.exports = async (phase, { defaultConfig }) => {
  /**
   * @type {import('next').NextConfig}
   */
  const nextConfig = {
    /* 設定オプションはここに記述 */
  }
  return nextConfig
}
```

### フェーズ

`phase`は、設定がロードされる現在のコンテキストです。利用可能な[フェーズを確認してください](https://github.com/vercel/next.js/blob/5e6b008b561caf2710ab7be63320a3d549474a5b/packages/next/shared/lib/constants.ts#L19-L23)。フェーズは`next/constants`からインポートできます：

```js filename="next.config.js"
// @ts-check

const { PHASE_DEVELOPMENT_SERVER } = require('next/constants')

module.exports = (phase, { defaultConfig }) => {
  if (phase === PHASE_DEVELOPMENT_SERVER) {
    return {
      /* 開発専用の設定オプションはここに記述 */
    }
  }

  return {
    /* 開発以外のすべてのフェーズの設定オプションはここに記述 */
  }
}
```

## TypeScript

> この機能はNext.jsのcanaryバージョンから利用可能です。

プロジェクトでTypeScriptを使用している場合、[`next.config.ts`](/docs/app/building-your-application/configuring/typescript#type-checking-nextconfigts)を使用して設定でTypeScriptを使用できます：

```ts filename="next.config.ts"
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  /* 設定オプションはここに記述 */
}

export default nextConfig
```

コメントされた行は、`next.config.js`によって許可された設定を入れる場所であり、これは[このファイルに定義されています](https://github.com/vercel/next.js/blob/canary/packages/next/src/server/config-shared.ts)。

ただし、どの設定も必須ではなく、それぞれの設定が何をするかを理解する必要はありません。このセクションで有効にするか変更する必要のある機能を探し、何をすべきか指示を示してくれます。

> ターゲットNode.jsバージョンで利用できない新しいJavaScript機能を使用することは避けてください。`next.config.js`はWebpackやBabelによって解析されません。

このページには、利用可能なすべての設定オプションがドキュメントされています：