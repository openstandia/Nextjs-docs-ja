---
title: 'cssChunking'
description: 'Next.jsアプリケーションでCSSファイルの分割方法を制御するために`cssChunking`オプションを使用します。'
version: 'experimental'
---

CSS チャンクは、Webアプリケーションのパフォーマンスを向上させるための戦略で、CSSファイルを分割し、順序を再設定することを意味します。これにより、アプリケーション全体のCSSを一度に読み込むのではなく、特定のルートに必要なCSSだけを読み込むことができます。

`next.config.js`ファイルで`experimental.cssChunking`オプションを使用すると、CSSファイルの分割方法を制御できます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig = {
  experimental: {
    cssChunking: 'loose', // デフォルト
  },
} satisfies NextConfig

export default nextConfig
```
</TabItem>
<TabItem value="js" label="JavaScript">

```js title="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    cssChunking: 'loose', // デフォルト
  },
}

module.exports = nextConfig
```
</TabItem>
</Tabs>


## オプション

- **`'loose'` (デフォルト)**: Next.jsは可能な限りCSSファイルをマージし、ファイル間の明示的および暗黙的な依存関係をインポートの順序から特定して、チャンクの数を減らし、それによってリクエストの数を減らします
- **`'strict'`**: Next.jsはファイルにインポートされた順番通りにCSSファイルを読み込みますが、これによりチャンクとリクエストが増える可能性があります

予期しないCSSの挙動に直面した場合は、`'strict'`を使用することを検討してください。たとえば、異なるファイルで異なる`import`の順番（`a`の前に`b`、または`b`の前に`a`）で`a.css`と`b.css`をインポートする場合、`'loose'`はどの順番でもファイルをマージし、それらの間に依存関係がないと仮定します。しかし、もし`b.css`が`a.css`に依存している場合、ファイルをマージするのを防ぎ、インポートされた順番でファイルをロードするために`'strict'`を使用したいかもしれませんが、その結果としてチャンクとリクエストが増加する可能性があります。

ほとんどのアプリケーションでは、リクエストが少なくなり、パフォーマンスが向上するため、`'loose'`を推奨します。