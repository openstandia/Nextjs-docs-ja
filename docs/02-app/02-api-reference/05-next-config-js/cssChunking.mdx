---
title: cssChunking
description: Next.jsアプリケーションでCSSファイルの分割方法を制御するために、`cssChunking`オプションを使用してください。
version: experimental
---

CSSチャンク化は、CSSファイルを分割して並べ替えることでWebアプリケーションのパフォーマンスを向上させるための戦略です。これにより、アプリケーション全体のCSSを一度に読み込むのではなく、特定のルートに必要なCSSのみを読み込むことができます。

`next.config.js`ファイルで`experimental.cssChunking`オプションを使用して、CSSファイルのチャンク化の方法を制御できます：

```tsx filename="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig = {
  experimental: {
    cssChunking: 'loose', // デフォルト
  },
} satisfies NextConfig

export default nextConfig
```

```js filename="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    cssChunking: 'loose', // デフォルト
  },
}

module.exports = nextConfig
```

## Options

- **`'loose'` (デフォルト)**: Next.jsは可能な限りCSSファイルをマージしようとし、ファイル間の明示的および暗黙的な依存関係をインポート順序から判定してチャンクの数を減らし、リクエスト数を減らします
- **`'strict'`**: Next.jsは、ファイルにインポートされている正しい順序でCSSファイルを読み込みます。これにより、チャンクとリクエストの数が増える可能性があります

予期しないCSS動作に遭遇した場合は、`'strict'`の使用を検討するかもしれません。例えば、異なるファイルで`a.css`と`b.css`を異なる`import`順序（`a`が先か、`b`が先か）でインポートすると、`'loose'`ではファイルを任意の順序でマージし、それらの間に依存関係がないと仮定します。しかし、もし`b.css`が`a.css`に依存している場合、ファイルをマージせず、インポートされた順序で読み込むようにするために`'strict'`を使用したいかもしれません。これにより、チャンクとリクエストが増えることになります。

ほとんどのアプリケーションでは、リクエストが少なくなりパフォーマンスが向上するため、`'loose'`を推奨します。