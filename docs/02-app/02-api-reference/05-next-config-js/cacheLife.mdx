---
title: 'cacheLife'
description: 'Next.jsにおけるcacheLife設定を学びます。'
version: '実験的'
---

`cacheLife`オプションを使用すると、コンポーネント、関数、またはファイルのレベルで、[`use cache`ディレクティブ](/docs/app/api-reference/directives/use-cache)と一緒に`cacheLife`関数を使用する際に、キャッシュをより細かく制御するためのカスタム設定を定義できます。

## 使用法 {#usage}

`cacheLife`を使用するには、[`dynamicIO`フラグ](/docs/app/api-reference/next-config-js/dynamicIO)を有効にし、次のように`next.config.js`ファイルで設定を定義します：

```js title="next.config.js"
module.exports = {
  experimental: {
    dynamicIO: true,
    cacheLife: {
      blog: {
        stale: 3600, // 1時間
        revalidate: 900, // 15分
        expire: 86400, // 1日
      },
    },
  },
}
```

これで、このカスタム`blog`設定をコンポーネント、関数、またはファイルで次のように使用できます：

```tsx title="app/actions.ts" highlight={4,5}
import { unstable_cacheLife as cacheLife } from 'next/cache'

export async function getCachedData() {
  'use cache'
  cacheLife('blog')
  const data = await fetch('/api/data')
  return data
}
```

## 設定構造 {#configuration-structure}

設定オブジェクトには、次の形式のキー値があります：

| **プロパティ** | **値**   | **説明**                                                                                             | **要件**                                      |
| -------------- | -------- | ---------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| `stale`        | `number` | クライアントがサーバーを確認せずに値をキャッシュする期間                                             | 任意                                          |
| `revalidate`   | `number` | キャッシュがサーバーでリフレッシュされる頻度；再検証中に古い値が提供される場合もあります             | 任意                                          |
| `expire`       | `number` | 動的フェッチに切り替える前に値が古くなることができる最大期間；`revalidate`より長くなければなりません | 任意 - `revalidate`より長くする必要があります |
