---
title: '<Form>'
description: 'クライアントサイドナビゲーションでフォーム送信と検索パラメーターの更新を処理する `<Form>` コンポーネントの使用方法を学びます。'
---

`<Form>` コンポーネントは、HTML `<form>` 要素を拡張して、<AppOnly>[**プリフェッチ**](/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)による[読み込みUI](/docs/app/building-your-application/routing/loading-ui-and-streaming)、</AppOnly>送信時の**クライアントサイドナビゲーション**、および**プログレッシブエンハンスメント**を提供します。

これはURLの検索パラメーターを更新するフォームに便利で、上記を達成するために必要なボイラープレートコードを減らします。

基本的な使用法：

<AppOnly>

```tsx filename="/app/ui/search.js" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加される
          例: /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

```jsx filename="/app/ui/search.js" switcher
import Form from 'next/form'

export default function Search() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加される
          例: /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</AppOnly>

<PagesOnly>

```tsx filename="/ui/search.js" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加される
          例: /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

```jsx filename="/ui/search.js" switcher
import Form from 'next/form'

export default function Search() {
  return (
    <Form action="/search">
      {/* 送信時に、入力値がURLに追加される
          例: /search?query=abc */}
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

</PagesOnly>

## リファレンス

`<Form>` コンポーネントの挙動は、`action` prop に `string` または `function` が渡されるかどうかに依存します。

<AppOnly>

- `action` が **string** の場合、`<Form>` は**`GET`** メソッドを使用するネイティブHTMLフォームのように動作します。フォームデータはURLとして検索パラメータへエンコードされ、フォームが送信されると指定されたURLに移動します。加えて、Next.js は以下を行います:
  - フォームが表示されるときにパスを[プリフェッチ](/docs/app/building-your-application/routing/linking-and-navigating#2-prefetching)して、共通UI（例えば `layout.js` や `loading.js`）を事前ロードし、より速いナビゲーションを実現します。
  - フルページリロードではなく、[クライアントサイドナビゲーション](/docs/app/building-your-application/routing/linking-and-navigating#5-soft-navigation)をフォーム送信時に行います。これにより、共通UIやクライアントサイドの状態が保持されます。
- `action` が **function** （Server Action）の場合、`<Form>` は [React form](https://react.dev/reference/react-dom/components/form) のように動作し、フォームが送信されるとそのアクションを実行します。

</AppOnly>

<PagesOnly>

- `action` が **string** の場合、`<Form>` は**`GET`** メソッドを使用するネイティブHTMLフォームのように動作します。フォームデータはURLとして検索パラメータへエンコードされ、フォームが送信されると指定されたURLに移動します。加えて、Next.js は以下を行います:
  - フルページリロードではなく、[クライアントサイドナビゲーション](/docs/app/building-your-application/routing/linking-and-navigating#5-soft-navigation)をフォーム送信時に行います。これにより、共通UIやクライアントサイドの状態が保持されます。

</PagesOnly>

### `action`（string）Props

<PagesOnly>

`action` が string の場合、`<Form>` コンポーネントは次のpropsをサポートします：

| Prop      | 例                  | タイプ                         | 必須     |
| --------- | ------------------ | ------------------------------- | -------- |
| `action`  | `action="/search"` | `string`（URL または相対パス） | はい      |
| `replace` | `replace={false}`  | `boolean`                       | -        |
| `scroll`  | `scroll={true}`    | `boolean`                       | -        |

- **`action`**：フォームが送信されると移動するURLまたはパス
  - 空の文字列 `""` は、更新された検索パラメーターで同じルートに移動します
- **`replace`**：[ブラウザの履歴](https://developer.mozilla.org/en-US/docs/Web/API/History_API) スタックに新しい履歴状態をプッシュする代わりに現在の履歴状態を置き換えます デフォルトは `false` です
- **`scroll`**：ナビゲーション時のスクロールの挙動を制御します デフォルトは `true` で、これは新しいルートのトップにスクロールし、後方および前方ナビゲーションのスクロール位置を維持します

</PagesOnly>

<AppOnly>

`action` が string の場合、`<Form>` コンポーネントは次のpropsをサポートします：

| Prop       | 例                  | タイプ                         | 必須     |
| ---------- | ------------------ | ------------------------------- | -------- |
| `action`   | `action="/search"` | `string`（URL または相対パス） | はい      |
| `replace`  | `replace={false}`  | `boolean`                       | -        |
| `scroll`   | `scroll={true}`    | `boolean`                       | -        |
| `prefetch` | `prefetch={true}`  | `boolean`                       | -        |

- **`action`**：フォームが送信されると移動するURLまたはパス
  - 空の文字列 `""` は、更新された検索パラメーターで同じルートに移動します
- **`replace`**：[ブラウザの履歴](https://developer.mozilla.org/en-US/docs/Web/API/History_API) スタックに新しい履歴状態をプッシュする代わりに現在の履歴状態を置き換えます デフォルトは `false` です
- **`scroll`**：ナビゲーション時のスクロールの挙動を制御します デフォルトは `true` で、これは新しいルートのトップにスクロールし、後方および前方ナビゲーションのスクロール位置を維持します
- **`prefetch`**：フォームがユーザーのビューポートに表示されたときにパスをプリフェッチするかどうかを制御します デフォルトは `true`

### `action`（function）Props

`action` が function の場合、`<Form>` コンポーネントは次のpropをサポートします：

| Prop     | 例                  | タイプ                       | 必須     |
| -------- | ------------------- | -------------------------- | -------- |
| `action` | `action={myAction}` | `function` (Server Action) | はい      |

- **`action`**：フォームが送信されたときに呼び出されるServer Action 詳細は[React 文書](https://react.dev/reference/react-dom/components/form#props)をご覧ください

> **Good to know**: `action` が function の場合、`replace` および `scroll` の props は無視されます

</AppOnly>

### 注意事項

<AppOnly>

- **`formAction`**：`action` prop をオーバーライドするために `<button>` や `<input type="submit">` フィールドで使用できます Next.js はクライアントサイドナビゲーションを実行しますが、この方法はプリフェッチをサポートしていません
  - [`basePath`](/docs/app/api-reference/next-config-js/basePath) を使用する場合、`formAction` パスにも含める必要があります 例: `formAction="/base-path/search"`
- **`key`**：string の `action` に `key` prop を渡すことはサポートされていません 再レンダリングをトリガーしたり、ミューテーションを実行したりしたい場合は、function の `action` を使用することを検討してください

</AppOnly>

- **`onSubmit`**：フォーム送信ロジックを処理するために使用できます ただし、`event.preventDefault()` を呼び出すと、指定されたURLへの移動など `<Form>` の動作をオーバーライドします
- **[`method`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#method) 、[`encType`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#enctype) 、[`target`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#target)**：`<Form>` の動作をオーバーライドするためサポートされていません
  - 同様に、`formMethod`、`formEncType`、および `formTarget` はそれぞれ `method`、`encType`、および `target` props をオーバーライドするために使用でき、使用するとネイティブブラウザの動作にフォールバックします
  - これらの props を使用する必要がある場合は、HTML `<form>` 要素を使用してください
- **`<input type="file">`**：`action` が string の場合、この入力タイプを使用すると、ファイルオブジェクトではなくファイル名が送信されるというブラウザの動作に一致します

<AppOnly>

## 例

### 検索結果ページに遷移する検索フォーム

`action` としてパスを渡すことで、検索結果ページへ遷移する検索フォームを作成できます：

```tsx filename="/app/page.tsx" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

```jsx filename="/app/page.js" switcher
import Form from 'next/form'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <button type="submit">Submit</button>
    </Form>
  )
}
```

ユーザーがクエリ入力フィールドを更新してフォームを送信すると、フォームデータはURLとして検索パラメータにエンコードされます。例：`/search?query=abc`

> **Good to know**: `action` に空の文字列 `""` を渡すと、フォームは更新された検索パラメータで同じルートに移動します

結果ページでは、[`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional) `page.js` prop を使用してクエリにアクセスし、外部ソースからデータを取得するために使用できます。

```tsx filename="/app/search/page.tsx" switcher
import { getSearchResults } from '@/lib/search'

export default async function SearchPage({
  searchParams,
}: {
  searchParams: { [key: string]: string | string[] | undefined }
}) {
  const results = await getSearchResults(searchParams.query)

  return <div>...</div>
}
```

```jsx filename="/app/search/page.js" switcher
import { getSearchResults } from '@/lib/search'

export default async function SearchPage({ searchParams }) {
  const results = await getSearchResults(searchParams.query)

  return <div>...</div>
}
```

`<Form>` がユーザーのビューポートに表示されると、共通UI（`layout.js` や `loading.js` など）がある `/search` ページがプリフェッチされます。送信時には、フォームは直ちに新しいルートに移動し、結果が取得される間に読み込みUIを表示します。フォールバックUIは、[`loading.js`](/docs/app/api-reference/file-conventions/loading) を使用して設計できます：

```tsx filename="/app/search/loading.tsx" switcher
export default function Loading() {
  return <div>Loading...</div>
}
```

```jsx filename="/app/search/loading.js" switcher
export default function Loading() {
  return <div>Loading...</div>
}
```

共通UIがまだ読み込まれていない場合に備えて、[`useFormStatus`](https://react.dev/reference/react-dom/hooks/useFormStatus) を使ってユーザーに即座にフィードバックを表示することができます。

まず、フォームが保留中のときに読み込み状態を表示するコンポーネントを作成します：

```tsx filename="/app/ui/search-button.tsx" switcher
'use client'
import { useFormStatus } from 'react-dom'

export default function SearchButton() {
  const status = useFormStatus()
  return (
    <button type="submit">{status.pending ? 'Searching...' : 'Search'}</button>
  )
}
```

```jsx filename="/app/ui/search-button.js" switcher
'use client'
import { useFormStatus } from 'react-dom'

export default function SearchButton() {
  const status = useFormStatus()
  return (
    <button type="submit">{status.pending ? 'Searching...' : 'Search'}</button>
  )
}
```

次に、検索フォームページを更新して `SearchButton` コンポーネントを使用します：

```tsx filename="/app/page.tsx" switcher
import Form from 'next/form'
import { SearchButton } from '@/ui/search-button'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <SearchButton />
    </Form>
  )
}
```

```jsx filename="/app/ui/search-button.js" switcher
import Form from 'next/form'
import { SearchButton } from '@/ui/search-button'

export default function Page() {
  return (
    <Form action="/search">
      <input name="query" />
      <SearchButton />
    </Form>
  )
}
```

### Server Actionsによるミューテーション

`action` prop に関数を渡すことで、ミューテーションを実行できます。

```tsx filename="/app/posts/create/page.tsx" switcher
import Form from 'next/form'
import { createPost } from '@/posts/actions'

export default function Page() {
  return (
    <Form action={createPost}>
      <input name="title" />
      {/* ... */}
      <button type="submit">Create Post</button>
    </Form>
  )
}
```

```jsx filename="/app/posts/create/page.js" switcher
import Form from 'next/form'
import { createPost } from '@/posts/actions'

export default function Page() {
  return (
    <Form action={createPost}>
      <input name="title" />
      {/* ... */}
      <button type="submit">Create Post</button>
    </Form>
  )
}
```

ミューテーションの後には、新しいリソースへリダイレクトするのが一般的です。`next/navigation` の [`redirect`](/docs/app/building-your-application/routing/redirecting) 関数を使用して、新しい投稿ページへ移動できます。

> **Good to know**: フォーム送信の「行き先」は、アクションが実行されるまで不明であるため、`<Form>` は共通UIを自動的にプリフェッチすることができません

```tsx filename="/app/posts/actions.ts" switcher
'use server'
import { redirect } from 'next/navigation'

export async function createPost(formData: FormData) {
  // 新しい投稿を作成する
  // ...

  // 新しい投稿にリダイレクト
  redirect(`/posts/${data.id}`)
}
```

```jsx filename="/app/posts/actions.js" switcher
'use server'
import { redirect } from 'next/navigation'

export async function createPost(formData) {
  // 新しい投稿を作成する
  // ...

  // 新しい投稿にリダイレクト
  redirect(`/posts/${data.id}`)
}
```

次に、新しいページで `params` prop を使用してデータを取得できます：

```tsx filename="/app/posts/[id]/page.tsx" switcher
import { getPost } from '@/posts/data'

export default async function PostPage({ params }: { params: { id: string } }) {
  const data = await getPost(params.id)

  return (
    <div>
      <h1>{data.title}</h1>
      {/* ... */}
    </div>
  )
}
```

```jsx filename="/app/posts/[id]/page.js" switcher
import { getPost } from '@/posts/data'

export default async function PostPage({ params }) {
  const data = await getPost(params.id)

  return (
    <div>
      <h1>{data.title}</h1>
      {/* ... */}
    </div>
  )
}
```

詳細な例については、[Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations) ドキュメントを参照してください。

</AppOnly>