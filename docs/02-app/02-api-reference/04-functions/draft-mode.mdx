---
title: draftMode
description: draftMode関数のAPIリファレンスです。
related:
  title: 次のステップ
  description: ステップバイステップのガイドでドラフトモードの使い方を学んでください。
  links:
    - app/building-your-application/configuring/draft-mode
---

`draftMode`関数は、[ドラフトモード](/docs/app/building-your-application/configuring/draft-mode)を有効化および無効化し、[サーバーコンポーネント](/docs/app/building-your-application/rendering/server-components)でドラフトモードが有効かどうかを確認することができます。

## リファレンス

以下のメソッドとプロパティが利用可能です：

| メソッド      | 説明                                                                           |
| ------------- | ------------------------------------------------------------------------------ |
| `isEnabled`   | ドラフトモードが有効かどうかを示すブール値です                                   |
| `enable()`    | クッキー (`__prerender_bypass`) を設定してルートハンドラ内でドラフトモードを有効化します |
| `disable()`   | クッキーを削除してルートハンドラ内でドラフトモードを無効化します                     |

> **Good to know:**
>
> - `next build`を実行するたびに、新しいバイパスクッキーの値が生成されます。これにより、バイパスクッキーが推測されないようにします。
> - ドラフトモードをローカルでHTTPを越えてテストするには、ブラウザがサードパーティのクッキーとローカルストレージのアクセスを許可している必要があります。

## 例

### ドラフトモードの有効化

ドラフトモードを有効にするには、新しい[ルートハンドラ](/docs/app/building-your-application/routing/route-handlers)を作成し、`enable()`メソッドを呼び出します：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/draft/route.ts" switcher
import { draftMode } from 'next/headers'

export async function GET(request: Request) {
  draftMode().enable() // ドラフトモードを有効化します
  return new Response('Draft mode is enabled') // ドラフトモードが有効になっています
}
```
</TabItem>
<TabItem value="js" label="JavaScript">

```js title="app/draft/route.js" switcher
import { draftMode } from 'next/headers'

export async function GET(request) {
  draftMode().enable() // ドラフトモードを有効化します
  return new Response('Draft mode is enabled') // ドラフトモードが有効になっています
}
```
</TabItem>
</Tabs>


### ドラフトモードの無効化

デフォルトでは、ドラフトモードのセッションはブラウザを閉じると終了します。

ドラフトモードを手動で無効にするには、[ルートハンドラ](/docs/app/building-your-application/routing/route-handlers)で`disable()`メソッドを呼び出します：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/draft/route.ts" switcher
import { draftMode } from 'next/headers'

export async function GET(request: Request) {
  draftMode().disable() // ドラフトモードを無効化します
  return new Response('Draft mode is disabled') // ドラフトモードが無効になっています
}
```
</TabItem>
<TabItem value="js" label="JavaScript">

```js title="app/draft/route.js" switcher
import { draftMode } from 'next/headers'

export async function GET(request) {
  draftMode().disable() // ドラフトモードを無効化します
  return new Response('Draft mode is disabled') // ドラフトモードが無効になっています
}
```
</TabItem>
</Tabs>


その後、ルートハンドラを呼び出すためにリクエストを送信します。[`<Link>`コンポーネント](/docs/app/api-reference/components/link)を使用してルートを呼び出す場合、プリフェッチ時に誤ってクッキーを削除しないようにするために`prefetch={false}`を渡す必要があります。

### ドラフトモードが有効かどうかの確認

ドラフトモードがサーバーコンポーネントで有効かどうかは、`isEnabled`プロパティを使用して確認できます：

```tsx title="app/page.ts"
import { draftMode } from 'next/headers'

export default function Page() {
  const { isEnabled } = draftMode() // ドラフトモードが有効かどうか確認します
  return (
    <main>
      <h1>My Blog Post</h1> // ブログポストのタイトル
      <p>Draft Mode is currently {isEnabled ? 'Enabled' : 'Disabled'}</p> // ドラフトモードが現在有効かどうかを表示します
    </main>
  )
}
```

```jsx title="app/page.js"
import { draftMode } from 'next/headers'

export default function Page() {
  const { isEnabled } = draftMode() // ドラフトモードが有効かどうか確認します
  return (
    <main>
      <h1>My Blog Post</h1> // ブログポストのタイトル
      <p>Draft Mode is currently {isEnabled ? 'Enabled' : 'Disabled'}</p> // ドラフトモードが現在有効かどうかを表示します
    </main>
  )
}
```

## バージョン履歴

| バージョン   | 変更                              |
| ------------ | --------------------------------- |
| `v13.4.0`    | `draftMode`が導入されました         |