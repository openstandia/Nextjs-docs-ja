---
title: 'useSelectedLayoutSegment'
description: 'useSelectedLayoutSegment フックのAPIリファレンス。'
---

`useSelectedLayoutSegment`は**Client Component**フックで、呼び出されたレイアウトの**1レベル下**のアクティブなルートセグメントを読み取ることができます。

これは、親レイアウト内のタブのようなナビゲーションUIに便利です。アクティブな子セグメントに応じてスタイルを変更します。

```tsx filename="app/example-client-component.tsx" switcher
'use client'

import { useSelectedLayoutSegment } from 'next/navigation'

export default function ExampleClientComponent() {
  const segment = useSelectedLayoutSegment()

  return <p>Active segment: {segment}</p>
}
```

```jsx filename="app/example-client-component.js" switcher
'use client'

import { useSelectedLayoutSegment } from 'next/navigation'

export default function ExampleClientComponent() {
  const segment = useSelectedLayoutSegment()

  return <p>Active segment: {segment}</p>
}
```

> **Good to know**:
>
> - `useSelectedLayoutSegment`は[Client Component](/docs/app/building-your-application/rendering/client-components)フックです。レイアウトはデフォルトで[Server Components](/docs/app/building-your-application/rendering/server-components)であるため、通常、レイアウトにインポートされたClient Componentを介して呼び出されます。
> - `useSelectedLayoutSegment`は1レベル下のセグメントのみを返します。すべてのアクティブなセグメントを返すには、[`useSelectedLayoutSegments`](/docs/app/api-reference/functions/use-selected-layout-segments)を参照してください。

## パラメーター

```tsx
const segment = useSelectedLayoutSegment(parallelRoutesKey?: string)
```

`useSelectedLayoutSegment`は、オプションで[`parallelRoutesKey`](/docs/app/building-your-application/routing/parallel-routes#useselectedlayoutsegments)を受け取ります。これにより、そのスロット内のアクティブなルートセグメントを読み取ることができます。

## 戻り値

`useSelectedLayoutSegment`は、アクティブなセグメントの文字列を返します。セグメントが存在しない場合、`null`を返します。

以下のレイアウトとURLがあるとき、返されるセグメントは次のとおりです：

| Layout                    | 訪問先URL                      | 返されるセグメント |
| ------------------------- | ------------------------------ | ------------------ |
| `app/layout.js`           | `/`                            | `null`             |
| `app/layout.js`           | `/dashboard`                   | `'dashboard'`      |
| `app/dashboard/layout.js` | `/dashboard`                   | `null`             |
| `app/dashboard/layout.js` | `/dashboard/settings`          | `'settings'`       |
| `app/dashboard/layout.js` | `/dashboard/analytics`         | `'analytics'`      |
| `app/dashboard/layout.js` | `/dashboard/analytics/monthly` | `'analytics'`      |

## 例

### アクティブリンクコンポーネントの作成

`useSelectedLayoutSegment`を使用して、アクティブなセグメントに基づいてスタイルを変更するアクティブリンクコンポーネントを作成できます。例えば、ブログのサイドバーにあるおすすめ記事リストです：

```tsx filename="app/blog/blog-nav-link.tsx" switcher
'use client'

import Link from 'next/link'
import { useSelectedLayoutSegment } from 'next/navigation'

// この*Client*コンポーネントはブログレイアウトにインポートされます
export default function BlogNavLink({
  slug,
  children,
}: {
  slug: string
  children: React.ReactNode
}) {
  // `/blog/hello-world`に移動すると、選択されたレイアウトセグメントは 'hello-world' を返します
  const segment = useSelectedLayoutSegment()
  const isActive = slug === segment

  return (
    <Link
      href={`/blog/${slug}`}
      // リンクがアクティブかどうかに応じてスタイルを変更
      style={{ fontWeight: isActive ? 'bold' : 'normal' }}
    >
      {children}
    </Link>
  )
}
```

```jsx filename="app/blog/blog-nav-link.js" switcher
'use client'

import Link from 'next/link'
import { useSelectedLayoutSegment } from 'next/navigation'

// この*Client*コンポーネントはブログレイアウトにインポートされます
export default function BlogNavLink({ slug, children }) {
  // `/blog/hello-world`に移動すると、選択されたレイアウトセグメントは 'hello-world' を返します
  const segment = useSelectedLayoutSegment()
  const isActive = slug === segment

  return (
    <Link
      href={`/blog/${slug}`}
      // リンクがアクティブかどうかに応じてスタイルを変更
      style={{ fontWeight: isActive ? 'bold' : 'normal' }}
    >
      {children}
    </Link>
  )
}
```

```tsx filename="app/blog/layout.tsx" switcher
// Client Componentを親レイアウト（Server Component）にインポート
import { BlogNavLink } from './blog-nav-link'
import getFeaturedPosts from './get-featured-posts'

export default async function Layout({
  children,
}: {
  children: React.ReactNode
}) {
  const featuredPosts = await getFeaturedPosts()
  return (
    <div>
      {featuredPosts.map((post) => (
        <div key={post.id}>
          <BlogNavLink slug={post.slug}>{post.title}</BlogNavLink>
        </div>
      ))}
      <div>{children}</div>
    </div>
  )
}
```

```jsx filename="app/blog/layout.js" switcher
// Client Componentを親レイアウト（Server Component）にインポート
import { BlogNavLink } from './blog-nav-link'
import getFeaturedPosts from './get-featured-posts'

export default async function Layout({ children }) {
  const featuredPosts = await getFeaturedPosts()
  return (
    <div>
      {featuredPosts.map((post) => (
        <div key={post.id}>
          <BlogNavLink slug={post.slug}>{post.title}</BlogNavLink>
        </div>
      ))}
      <div>{children}</div>
    </div>
  )
}
```

## バージョン履歴

| バージョン | 変更内容                                 |
| ---------- | -------------------------------------- |
| `v13.0.0`  | `useSelectedLayoutSegment`が導入されました。 |