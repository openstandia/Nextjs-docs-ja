---
title: 'connection'
description: 'connection 関数の API リファレンスです。'
---

`connection()` 関数は、ユーザーのリクエストを受け取るまでレンダリングを待機するように指示することができます。

これは、コンポーネントが[Dynamics API](/docs/app/building-your-application/rendering/server-components#dynamic-apis)を使用しないが、実行時に動的にレンダリングされ、ビルド時に静的にレンダリングされないことを望む場合に役立ちます。通常、`Math.random()` や `new Date()` のようにレンダリング結果を意図的に変更したい外部情報にアクセスする場合に発生します。

<Tabs>
<TabItem value="ts" label="TypeScript">

```ts title="app/page.tsx" switcher
import { connection } from 'next/server'

export default async function Page() {
  await connection()
  // これ以降のすべてはプリレンダリングから除外されます
  const rand = Math.random()
  return <span>{rand}</span>
}
```
</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/page.js" switcher
import { connection } from 'next/server'

export default async function Page() {
  await connection()
  // これ以降のすべてはプリレンダリングから除外されます
  const rand = Math.random()
  return <span>{rand}</span>
}
```
</TabItem>
</Tabs>


## リファレンス

### 型

```jsx
function connection(): Promise<void>
```

### パラメーター

- この関数はパラメーターを受け付けません

### 戻り値

- この関数は `void` Promise を返します；消費することを意図していません。

## Good to know

- `connection` は Next.js の将来により適合するように [`unstable_noStore`](/docs/app/api-reference/functions/unstable_noStore) に代わるものです。
- 動的レンダリングが必要で、一般的な Dynamic APIs が使用されていない場合にのみ、この関数が必要です。

### バージョン履歴

| バージョン      | 変更内容                  |
| ------------ | ------------------------ |
| `v15.0.0-RC` | `connection`が導入されました |
