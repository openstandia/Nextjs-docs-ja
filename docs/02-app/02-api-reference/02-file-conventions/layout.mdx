---
title: 'layout.js'
description: 'layout.js ファイルの API リファレンス。'
---

`layout` ファイルは、Next.js アプリケーションでレイアウトを定義するために使用されます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return <section>{children}</section>
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
export default function DashboardLayout({ children }) {
  return <section>{children}</section>
}
```

</TabItem>
</Tabs>

**root レイアウト**は、root の `app` ディレクトリ内の最上部のレイアウトです。これは `<html>` と `<body>` タグ、および他の全体で共有される UI を定義するために使用されます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

## リファレンス {#reference}

### Props {#props}

#### `children`（必須） {#children-required}

レイアウトコンポーネントは、`children` prop を受け入れ、それを使用する必要があります。レンダリング中に、`children` はレイアウトがラップしているルートセグメントで満たされます。基本的には子 [Layout](/docs/app/building-your-application/routing/pages) コンポーネント（存在する場合）や [Page](/docs/app/building-your-application/routing/pages) のコンポーネントが含まれますが、状況に応じて [Loading](/docs/app/building-your-application/routing/loading-ui-and-streaming) や [Error](/docs/app/building-your-application/routing/error-handling) といった特別なファイルになることもあります。

#### `params`（オプション） {#params-optional}

root セグメントからそのレイアウトまでの [動的ルートパラメータ](/docs/app/building-your-application/routing/dynamic-routes) オブジェクトを含むオブジェクトへの解決を行うプロミスです。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/[team]/layout.tsx" switcher
export default async function Layout({
  params,
}: {
  params: Promise<{ team: string }>
}) {
  const team = (await params).team
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/[team]/layout.js" switcher
export default async function Layout({ params }) {
  const team = (await params).team
}
```

</TabItem>
</Tabs>

| 例のルート                        | URL            | `params`                           |
| --------------------------------- | -------------- | ---------------------------------- |
| `app/dashboard/[team]/layout.js`  | `/dashboard/1` | `Promise<{ team: '1' }>`           |
| `app/shop/[tag]/[item]/layout.js` | `/shop/1/2`    | `Promise<{ tag: '1', item: '2' }>` |
| `app/blog/[...slug]/layout.js`    | `/blog/1/2`    | `Promise<{ slug: ['1', '2'] }>`    |

- `params` prop はプロミスであるため、値にアクセスするには `async/await` または React の [`use`](https://react.dev/reference/react/use) 関数を使用する必要があります。
  - バージョン 14 以前では、`params` は同期プロップでした。後方互換性を助けるために、Next.js 15 でも同期的にアクセスできますが、この動作は将来的に廃止されます。

### Root レイアウト {#root-layouts}

`app` ディレクトリには必ず root `app/layout.js` を含める **必要があります**。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html>
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
export default function RootLayout({ children }) {
  return (
    <html>
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

- root レイアウトは `<html>` と `<body>` タグを定義する **必要があります**。
  - `head` タグ（たとえば `<title>` や `<meta>` など）を root レイアウトに手動で追加しない **でください**。代わりに、ストリーミングや `<head>` 要素の重複排除といった高度な要件を自動的に処理する [Metadata API](/docs/app/building-your-application/optimizing/metadata) を使用してください。
- [Route Groups](/docs/app/building-your-application/routing/route-groups) を使用して複数の root レイアウトを作成することができます。
  - **複数の root レイアウト間**をナビゲートすると、**フルページロード**が発生します（クライアントサイドナビゲーションとは対照的に）。たとえば、`app/(shop)/layout.js` を使用する `/cart` から `app/(marketing)/layout.js` を使用する `/blog` に移動すると、フルページロードが発生します。これは **のみ** 複数の root レイアウトに適用されます。

## 注意事項 {#caveats}

### レイアウトは `searchParams` を受け取らない {#layouts-do-not-receive-searchparams}

[Page](/docs/app/api-reference/file-conventions/page) と異なり、レイアウトコンポーネントは `searchParams` prop を受け取り **ません**。これは、共有レイアウトが [ナビゲーション中に再レンダリングされない](/docs/app/building-your-application/routing/linking-and-navigating#4-partial-rendering) ためであり、ナビゲーション間で古くなった `searchParams` が発生する可能性があるためです。

クライアントサイドナビゲーションを使用する場合、Next.js は自動的に 2 つのルート間で共通のレイアウトの下にあるページ部分のみをレンダリングします。

たとえば、次のディレクトリ構造では、`dashboard/layout.tsx` は `/dashboard/settings` と `/dashboard/analytics` の両方に共通するレイアウトです：

<Image
  alt="dashboard フォルダーに layout.tsx ファイルと、設定用と分析用のフォルダーに独自のページを持つファイル構造を示す"
  srcLight="/docs/light/shared-dashboard-layout.png"
  srcDark="/docs/dark/shared-dashboard-layout.png"
  width="1600"
  height="687"
/>

`/dashboard/settings` から `/dashboard/analytics` に移動するとき、`/dashboard/analytics` の `page.tsx` がサーバーで再レンダリングされる一方で、`dashboard/layout.tsx` は 2 つのルート間で共有される共通の UI であるため、再レンダリングされ **ません**。

このパフォーマンス最適化により、レイアウトを共有するページ間のナビゲーションが速くなり、ページのデータフェッチングとレンダリングのみが実行されるようになり、独自のデータをフェッチする共有レイアウトを含む可能性のあるルート全体が含まれることがなくなります。

`dashboard/layout.tsx` が再レンダリングされないため、ナビゲーション後にレイアウトサーバーコンポーネントの `searchParams` prop が **古くなる** 可能性があります。

代わりに、最新の `searchParams` でクライアントで再レンダリングされるレイアウト内のクライアントコンポーネントで、Page の [`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional) prop または [`useSearchParams`](/docs/app/api-reference/functions/use-search-params) フックを使用してください。

### レイアウトは `pathname` にアクセスできない {#layouts-cannot-access-pathname}

レイアウトは `pathname` にアクセスできません。これは、レイアウトがデフォルトでサーバーコンポーネントであり、[クライアントサイドナビゲーション中に再レンダリングされない](/docs/app/building-your-application/routing/linking-and-navigating#4-partial-rendering) ため、ナビゲーション間で `pathname` が古くなる可能性があるためです。古さを防ぐためには、Next.js がルートのすべてのセグメントを再フェッチする必要があります。これにより、キャッシングの利点が失われ、ナビゲーション時の [RSC ペイロード](/docs/app/building-your-application/rendering/server-components#what-is-the-react-server-component-payload-rsc) サイズが大きくなります。

代わりに、`pathname` に依存するロジックをクライアントコンポーネントに抽出し、レイアウトにインポートすることができます。クライアントコンポーネントはナビゲーション中に再レンダリングされます（ただし、再フェッチされません）ため、Next.js のフック [`usePathname`](https://nextjs.org/docs/app/api-reference/functions/use-pathname) を使用して現在の pathname にアクセスし、古くならないようにすることができます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
import { ClientComponent } from '@/app/ui/ClientComponent'

export default function Layout({ children }: { children: React.ReactNode }) {
  return (
    <>
      <ClientComponent />
      {/* 他のレイアウト UI */}
      <main>{children}</main>
    <>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
import { ClientComponent } from '@/app/ui/ClientComponent'

export default function Layout({ children }) {
  return (
    <>
      <ClientComponent />
      {/* 他のレイアウト UI */}
      <main>{children}</main>
    <>
  )
}
```

</TabItem>
</Tabs>

一般的な `pathname` パターンは、[`params`](#params-optional) prop で実装することもできます。

詳細については、[例](/docs/app/building-your-application/routing/layouts-and-templates#examples) セクションを参照してください。

## 例 {#examples}

### `params` に基づいたコンテンツの表示 {#displaying-content-based-on-params}

[動的ルートセグメント](/docs/app/building-your-application/routing/dynamic-routes) を使用して、`params` prop に基づいた特定のコンテンツを表示または取得できます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
export default async function DashboardLayout({
  children,
  params,
}: {
  children: React.ReactNode
  params: Promise<{ team: string }>
}) {
  const { team } = await params

  return (
    <section>
      <header>
        <h1>ようこそ {team} のダッシュボードへ</h1>
      </header>
      <main>{children}</main>
    </section>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
export default async function DashboardLayout({ children, params }) {
  const { team } = await params

  return (
    <section>
      <header>
        <h1>ようこそ {team} のダッシュボードへ</h1>
      </header>
      <main>{children}</main>
    </section>
  )
}
```

</TabItem>
</Tabs>

### クライアントコンポーネントでの `params` の読み取り {#reading-params-in-client-components}

クライアントコンポーネント内で `params` を使用するには（`async` にすることはできません）、React の [`use`](https://react.dev/reference/react/use) 関数を使用してプロミスを読み取ります：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/page.tsx" switcher
'use client'

import { use } from 'react'

export function Page({ params }: { params: Promise<{ slug: string }> }) {
  const { slug } = use(params)
}
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="app/page.js" switcher
'use client'

import { use } from 'react'

export function Page({ params }) {
  const { slug } = use(params)
}
```

</TabItem>
</Tabs>

## バージョン履歴 {#version-history}

| バージョン   | 変更内容                                                                                                                 |
| ------------ | ------------------------------------------------------------------------------------------------------------------------ |
| `v15.0.0-RC` | `params` がプロミスになりました。 [codemod](/docs/app/building-your-application/upgrading/codemods#150) が利用可能です。 |
| `v13.0.0`    | `layout` が導入されました。                                                                                              |
