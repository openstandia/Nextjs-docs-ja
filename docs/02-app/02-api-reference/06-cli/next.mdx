---
title: next CLI
description: Next.js CLIを使ってアプリケーションを実行し、ビルドする方法を学びましょう。
---

{/* このドキュメントの内容は、アプリとページルーター間で共有されています。ページルーターに特化したコンテンツを追加するには、`<PagesOnly>Content</PagesOnly>`コンポーネントを使用できます。共有されるコンテンツはコンポーネントでラップしないでください。 */}

Next.js CLIを使用すると、アプリケーションの開発、ビルド、開始などが可能です。

基本的な使用法:

```bash title="Terminal"
npm run next [command] [options]
```

## 参照

以下のオプションが利用可能です:

| オプション          | 説明                                           |
| ------------------- | ---------------------------------------------- |
| `-h` または `--help`    | 利用可能な全てのオプションを表示します                      |
| `-v` または `--version` | Next.jsのバージョン番号を出力します                      |

### コマンド

以下のコマンドが利用可能です:

| コマンド                               | 説明                                                                                                                                                                                                                        |
| -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`dev`](#next-dev-options)             | ホットモジュールリローディング、エラーレポートなどと共に、開発モードでNext.jsを開始します                                                                                                                                          |
| [`build`](#next-build-options)         | アプリケーションの最適化された本番ビルドを作成します。各ルートに関する情報を表示します                                                                                                                                              |
| [`start`](#next-start-options)         | 本番モードでNext.jsを開始します。アプリケーションはまず`next build`でコンパイルされる必要があります                                                                                                                                |
| [`info`](next-info-options)            | 次の.jsのバグを報告する際に使用できる、現在のシステムに関する関連情報を表示します                                                                                                                                                   |
| [`lint`](next-lint-options)            | `/src`、`/app`、`/pages`、`/components`、`/lib`ディレクトリ内のすべてのファイルに対してESLintを実行します。ESLintがまだアプリケーションで設定されていない場合、必要な依存関係をインストールするためのガイド付きセットアップも提供されます。|
| [`telemetry`](next-telemetry-options) | Next.jsの完全に匿名のテレメトリー収集を有効または無効にします                                                                                                                                                                 |

> **Good to know**: コマンドを指定せずに`next`を実行すると、`next dev`のエイリアスです。

### `next dev` オプション

`next dev`は、ホットモジュールリローディング (HMR)、エラーレポートなどと共にアプリケーションを開発モードで開始します。`next dev`を実行するときに利用可能なオプションは以下の通りです：

| オプション                                   | 説明                                                                                                                                                      |
| ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-h, --help`                           | 利用可能な全てのオプションを表示します。                                                                                                                                      |
| `[directory]`                            | アプリケーションをビルドするディレクトリ。指定されていない場合は、現在のディレクトリが使用されます。                                                                                                       |
| `--turbo`                                | [Turbopack](https://nextjs.org/docs/architecture/turbopack) を使用して開発モードを開始します。                                                              |
| `-p` または `--port <port>`                  | アプリケーションを開始するポート番号を指定します。デフォルト：3000、環境変数：PORT                                                                                                               |
| `-H` または `--hostname <hostname>`           | アプリケーションを開始するホスト名を指定します。ネットワーク上の他のデバイスでアプリケーションを利用可能にするために便利です。デフォルト：0.0.0.0                                                    |
| `-experimental-https`                   | HTTPSでサーバーを開始し、自己署名証明書を生成します。                                                                                                                               |
| `--experimental-https-key <path>`        | HTTPSキーのファイルパス。                                                                                                                                             |
| `--experimental-https-cert <path>`       | HTTPS証明書のファイルパス。                                                                                                                                           |
| `--experimental-https-ca <path>`         | HTTPS認証局のファイルパス。                                                                                                                                          |
| `--experimental-upload-trace <traceUrl>` | デバッグトレースのサブセットをリモートHTTP URLに報告します。                                                                                                                        |

### `next build` オプション

`next build` はアプリケーションの最適化された本番ビルドを作成します。出力には各ルートに関する情報が表示されます。例えば：

```bash title="Terminal"
Route (app)                              Size     First Load JS
┌ ○ /_not-found                          0 B               0 kB
└ ƒ /products/[id]                       0 B               0 kB

○  (Static)   prerendered as static content
ƒ  (Dynamic)  server-rendered on demand
```

- **Size**: クライアントサイドでページに移動した時にダウンロードされるアセットのサイズ。各ルートに関しては依存だけが含まれます。
- **First Load JS**: サーバーからページを訪れた時にダウンロードされるアセットのサイズ。共通のJS量が個別のメトリクスとして表示されます。

これらの値はどちらも[**gzipで圧縮**](/docs/app/api-reference/next-config-js/compress)されています。最初のロードは緑、黄色または赤で示されます。パフォーマンスの良いアプリケーションを目指して緑を目指しましょう。

`next build` コマンドで利用可能なオプションは以下の通りです：

| オプション                             | 説明                                                                                                                                                                |
| ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-h, --help`                       | 利用可能な全てのオプションを表示します。                                                                                                                                   |
| `[directory]`                      | アプリケーションをビルドするディレクトリ。指定されていない場合は、現在のディレクトリが使用されます。                                                                                                           |
| `-d` または `--debug`                  | より詳細なビルド出力を有効にします。このフラグを有効にすると、リライト、リダイレクト、ヘッダーのような追加のビルド出力が表示されます。                                                                                   |
|                                  |
| `--profile`                        | 本番環境で[ React のプロファイリングを有効にします](https://react.dev/reference/react/Profiler)。                                                                                    |
| `--no-lint`                        | リンティングを無効にします。                                                                                                                                                           |
| `--no-mangling`                    | [マングリングを無効にします](https://en.wikipedia.org/wiki/Name_mangling)。これがパフォーマンスに影響する可能性があるため、デバッグ目的での使用のみに制限します。                                                             |
| `--experimental-app-only`          | App Routerルートのみビルドします。                                                                                                                                                             |
| `--experimental-build-mode [mode]` | 実験的なビルドモードを使用します。（選択肢："compile", "generate", デフォルト："default"）                                                                                                           |

### `next start` オプション

`next start` は本番モードでアプリケーションを開始します。アプリケーションはまず[`next build`](#next-build-options)でコンパイルされる必要があります。

`next start` コマンドで利用可能なオプションは以下の通りです：

| オプション                                  | 説明                                                                                                               |
| --------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| `-h` または `--help`                        | 利用可能な全てのオプションを表示します。                                                                                       |
| `[directory]`                           | アプリケーションを開始するディレクトリ。ディレクトリが指定されていない場合は、現在のディレクトリが使用されます。                                                    |
| `-p` または `--port <port>`                 | アプリケーションを開始するポート番号を指定します。（デフォルト：3000、環境変数：PORT）                                                                      |
| `-H` または `--hostname <hostname>`         | アプリケーションを開始するホスト名を指定します（デフォルト：0.0.0.0）。                                                                                           |
| `--keepAliveTimeout <keepAliveTimeout>` | 非アクティブな接続を閉じるまでの最大秒数を指定します。                                                                                                |

### `next info` オプション

`next info` は、[GitHubのissueを開く際に](https://github.com/vercel/next.js/issues)、Next.jsのバグを報告するために使用できる、現在のシステムに関する関連情報を表示します。この情報には、オペレーティングシステムのプラットフォーム／アーキテクチャ／バージョン、バイナリ（Node.js、npm、Yarn、pnpm）、パッケージのバージョン（`next`、`react`、`react-dom`）などが含まれます。

出力は以下のようになります：

```bash title="Terminal"
Operating System:
  Platform: darwin
  Arch: arm64
  Version: Darwin Kernel Version 23.6.0
  Available memory (MB): 65536
  Available CPU cores: 10
Binaries:
  Node: 20.12.0
  npm: 10.5.0
  Yarn: 1.22.19
  pnpm: 9.6.0
Relevant Packages:
  next: 15.0.0-canary.115 // 最新の利用可能なバージョンが検出されます (15.0.0-canary.115)。
  eslint-config-next: 14.2.5
  react: 19.0.0-rc
  react-dom: 19.0.0
  typescript: 5.5.4
Next.js Config:
  output: N/A
```

`next info` コマンドで利用可能なオプションは以下の通りです：

| オプション       | 説明                                      |
| -------------- | ---------------------------------------- |
| `-h` または `--help` | 利用可能な全てのオプションを表示します                     |
| `--verbose`    | デバッグ用の追加情報を収集します。                        |

### `next lint` オプション

`next lint`は、`pages/`、`app/`、`components/`、`lib/`、および`src/`ディレクトリ内のすべてのファイルに対してESLintを実行します。ESLintがアプリケーションでまだ設定されていない場合、必要な依存関係をインストールするためのガイド付きセットアップも提供されます。

`next lint` コマンドで利用可能なオプションは以下の通りです：

| オプション                                                | 説明                                                                                                          |
| ----------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| `[directory]`                                         | アプリケーションをリンティングするベースディレクトリ。指定されていない場合は、現在のディレクトリが使用されます。                                              |
| `-d, --dir, <dirs...>`                                | ESLintを実行するディレクトリ、またはディレクトリ群を含めます。                                                                                  |
| `--file, <files...>`                                  | ESLintを実行するファイル、またはファイル群を含めます。                                                                                      |
| `--ext, [exts...]`                                    | JavaScriptファイルの拡張子を指定します。(デフォルト：[ ".js", ".mjs", ".cjs", ".jsx", ".ts", ".mts", ".cts", ".tsx"]) | 
| `-c, --config, <config>`                            | この設定ファイルを使用し、他の設定オプションを全て上書きします。                                                                             |
| `--resolve-plugins-relative-to, <rprt>`               | プラグインを解決するディレクトリを指定します。                                                                                          |
| `--strict`                                            | Next.jsの厳格な構成を使用して`.eslintrc.json`ファイルを作成します。                                                                          |
| `--rulesdir, <rulesdir...>`                           | このディレクトリから追加のルールを使用します。                                                                                         |
| `--fix`                                               | リンティングの問題を自動的に修正します。                                                                                               |
| `--fix-type <fixType>`                                | 適用する修正のタイプを指定します（例：問題、提案、レイアウト）。                                                                                   |
| `--ignore-path <path>`                                | 無視するファイルを指定します。                                                                                                        |
| `--no-ignore <path>`                                  | `--ignore-path`オプションを無効にします。                                                                                      |
| `--quiet`                                             | エラーのみを報告します。                                                                                                          |
| `--max-warnings [maxWarnings]`                        | 非ゼロ終了コードをトリガーするワーニング数を指定します。（デフォルト：-1）                                                                                         |
| `-o, --output-file, <outputFile>`                     | レポートを書くためのファイルを指定します。                                                                                                  |
| `-f, --format, <format>`                              | 特定の出力形式を使用します。                                                                                                      |
| `--no-inline-config`                                  | 設定やルールを変更するコメントを防ぎます。                                                                                          |
| `--report-unused-disable-directives-severity <level>` | 未使用のeslint-disableディレクティブの深刻度レベルを指定します。（選択肢："error"、"off"、"warn"）                                                                      |
| `--no-cache`                                          | キャッシュを無効にします。                                                                                                        |
| `--cache-location, <cacheLocation>`                   | キャッシュの場所を指定します。                                                                                                    |
| `--cache-strategy, [cacheStrategy]`                   | キャッシュ内で変更されたファイルを検出するために使用する戦略を指定します。（デフォルト："metadata"）                                                                          |
| `--error-on-unmatched-pattern`                        | ファイルパターンが一致しない場合にエラーを報告します。                                                                                         |
| `-h, --help`                                          | このメッセージを表示します。                                                                                                       |

### `next telemetry` オプション

Next.jsは一般的な使用方法に関する**完全に匿名の** テレメトリーデータを収集します。この匿名プログラムへの参加はオプションであり、情報の共有を希望しない場合はオプトアウトすることができます。

`next telemetry`コマンドで利用可能なオプションは以下の通りです：

| オプション       | 説明                                |
| -------------- | --------------------------------- |
| `-h, --help`   | 利用可能な全てのオプションを表示します。      |
| `--enable`     | Next.jsのテレメトリー収集を有効にします。  |
| `--disable`    | Next.jsのテレメトリー収集を無効にします。 |

[テレメトリー](/telemetry)についてもっと学びましょう。

## 例

### デフォルトポートの変更

デフォルトで、Next.jsは開発中および`next start`で`http://localhost:3000`を使用します。デフォルトポートは`-p`オプションを使用して変更できます。例えば：

```bash title="Terminal"
next dev -p 4000
```

または、`PORT`環境変数を使用します：

```bash title="Terminal"
PORT=4000 next dev
```

> **Good to know**: HTTPサーバが他のコードが初期化される前に起動するため、`PORT`は`.env`では設定できません。

### 開発中のHTTPSの使用

ウェブフックや認証のような特定のユースケースでは、[HTTPS](https://developer.mozilla.org/en-US/docs/Glossary/HTTPS)を使用して`localhost`で安全な環境を持つことができます。Next.jsは`next dev`を使用して`--experimental-https`フラグで自己署名証明書を生成できます：

```bash title="Terminal"
next dev --experimental-https
```

生成された証明書で、Next.jsの開発サーバーは`https://localhost:3000`に存在します。デフォルトポートの`3000`は、`-p`、`--port`、または`PORT`で指定されない限り使用されます。

また、`--experimental-https-key`と`--experimental-https-cert`でカスタム証明書とキーを提供することもできます。オプションで、`--experimental-https-ca`を使用してカスタムCA証明書を提供することも可能です。

```bash title="Terminal"
next dev --experimental-https --experimental-https-key ./certificates/localhost-key.pem --experimental-https-cert ./certificates/localhost.pem
```

`next dev --experimental-https`は開発用にのみ意図されており、[`mkcert`](https://github.com/FiloSottile/mkcert)を使用してローカルで信頼された証明書を生成します。本番環境では信頼できる機関から正式に発行された証明書を使用してください。

> **Good to know**: Vercelにデプロイする際、Next.jsアプリケーションにはHTTPSが[自動的に設定されます](https://vercel.com/docs/security/encryption)。

### ダウンストリームプロキシのタイムアウトの設定

Next.jsをダウンストリームプロキシ（例：AWS ELB/ALBのようなロードバランサ）背後にデプロイする場合、Nextの基盤となるHTTPサーバーをダウンストリームプロキシのタイムアウトよりも_長い_ [キープアライブタイムアウト](https://nodejs.org/api/http.html#http_server_keepalivetimeout)で設定することが重要です。そうしないと、特定のTCP接続のキープアライブタイムアウトに達すると、Node.jsはダウンストリームプロキシに通知せずにその接続を即座に終了します。これにより、Node.jsがすでに終了した接続を再利用しようとするとプロキシエラーが発生します。

本番Next.jsサーバのタイムアウト値を設定するには、`next start`に`--keepAliveTimeout`（ミリ秒単位）を渡します。例えば：

```bash title="Terminal"
next start --keepAliveTimeout 70000
```

### Node.js引数を渡す

`next`コマンドに任意の[nodeの引数](https://nodejs.org/api/cli.html#cli_node_options_options)を渡すことができます。例えば：

```bash title="Terminal"
NODE_OPTIONS='--throw-deprecation' next
NODE_OPTIONS='-r esm' next
NODE_OPTIONS='--inspect' next
```
