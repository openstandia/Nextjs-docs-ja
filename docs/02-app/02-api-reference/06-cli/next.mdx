---
title: 'next CLI'
description: 'Next.js CLI を使ってアプリケーションを実行およびビルドする方法を学びましょう。'
---

{/* このドキュメントの内容は、app router と pages router の間で共通しています。Pages Router に特有のコンテンツを追加するには、`<PagesOnly>Content</PagesOnly>` コンポーネントを使用できます。共有コンテンツはコンポーネントでラップしないでください。 */}

Next.js CLI を使うと、アプリケーションの開発、ビルド、起動などが行えます。

基本的な使い方:

```bash filename="Terminal"
npx next [command] [options]
```

## リファレンス

次のオプションが利用可能です:

| Options             | Description              |
| ------------------- | ------------------------ |
| `-h` or `--help`    | すべての利用可能なオプションを表示します        |
| `-v` or `--version` | Next.js のバージョン番号を出力します |

### コマンド

次のコマンドが利用可能です:

| Command                                | Description                                                                                                                                          |
| -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`dev`](#next-dev-options)             | Hot Module Reloading、エラーレポートなどを備えた開発モードで Next.js を開始します                                                                                           |
| [`build`](#next-build-options)         | アプリケーションの最適なプロダクションビルドを作成します。 各ルートに関する情報を表示します                                                                                      |
| [`start`](#next-start-options)         | プロダクションモードで Next.js を開始します。 アプリケーションは最初に `next build` でコンパイルされる必要があります                                                         |
| [`info`](#next-info-options)           | 現在のシステムに関する関連詳細を表示し、Next.js のバグ報告に使用することができます                                                                                   |
| [`lint`](#next-lint-options)           | `/src`、`/app`、`/pages`、`/components`、および `/lib` ディレクトリ内のすべてのファイルに対して ESLint を実行します。 ESLint がまだアプリケーション内で設定されていない場合、必要な依存関係をインストールするためのガイド付きセットアップも提供します。 |
| [`telemetry`](#next-telemetry-options) | 完全に匿名の Next.js のテレメトリー収集を有効または無効にすることができます                                                                                                      |

> **Good to know**: コマンドなしで `next` を実行すると `next dev` のエイリアスとなります。

### `next dev` オプション

`next dev` は、Hot Module Reloading (HMR)、エラーレポートなどを備えた開発モードでアプリケーションを開始します。`next dev` を実行するときに次のオプションが利用可能です:

| Option                                   | Description                                                                                                                      |
| ---------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `-h, --help`                             | すべての利用可能なオプションを表示します。                                                                                                      |
| `[directory]`                            | アプリケーションをビルドするディレクトリ。指定されない場合、現在のディレクトリが使用されます。                                                                                 |
| `--turbo`                                | [Turbopack](https://nextjs.org/docs/architecture/turbopack) を使用して開発モードを開始します。                                                                         |
| `-p` or `--port <port>`                  | アプリケーションを開始するポート番号を指定します。 デフォルト: 3000、環境変数: PORT                                                                                   |
| `-H`or `--hostname <hostname>`           | アプリケーションを開始するホスト名を指定します。ネットワーク上の他のデバイスでアプリケーションを利用可能にするのに便利です。 デフォルト: 0.0.0.0                                        |
| `--experimental-https`                   | HTTPS でサーバーを開始し、自己署名証明書を生成します。                                                                                                     |
| `--experimental-https-key <path>`        | HTTPS キーファイルのパスを指定します。                                                                                                               |
| `--experimental-https-cert <path>`       | HTTPS 証明書ファイルのパスを指定します。                                                                                                               |
| `--experimental-https-ca <path>`         | HTTPS 認証機関ファイルのパスを指定します。                                                                                                             |
| `--experimental-upload-trace <traceUrl>` | デバッグトレースのサブセットをリモート HTTP URL に報告します。                                                                                                 |

### `next build` オプション

`next build` はアプリケーションの最適なプロダクションビルドを作成します。 出力には各ルートに関する情報が表示されます。例えば:

```bash filename="Terminal"
Route (app)                              Size     First Load JS
┌ ○ /_not-found                          0 B               0 kB
└ ƒ /products/[id]                       0 B               0 kB

○  (Static)   prerendered as static content
ƒ  (Dynamic)  server-rendered on demand
```

- **Size**: クライアントサイドでページに移動するときにダウンロードされるアセットのサイズ。各ルートのサイズはその依存関係のみを含みます。
- **First Load JS**: サーバーからページを訪れるときにダウンロードされるアセットのサイズ。すべての共有JSの量は別のメトリックとして示されます。

これらの値はどちらも [**gzip で圧縮されます**](/docs/app/api-reference/next-config-js/compress)。 初回のロードは緑、黄、赤で示されます。パフォーマンスの高いアプリケーションには緑を目指してください。

`next build` コマンドで利用可能なオプションは次のとおりです:

| Option                             | Description                                                                                                                         |
| ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| `-h, --help`                       | すべての利用可能なオプションを表示します。                                                                                                           |
| `[directory]`                      | アプリケーションをビルドするディレクトリ。指定されない場合、現在のディレクトリが使用されます。                                                                                           |
| `-d` or `--debug`                  | より詳細なビルド出力を有効にします。このフラグを使用すると、リライト、リダイレクト、およびヘッダーなどの追加ビルド出力が表示されます。                                                       |

| `--profile`                        | [React のプロファイリング](https://react.dev/reference/react/Profiler) を有効にします。                                                 |
| `--no-lint`                        | リントを無効化します。                                                                                                                 |
| `--no-mangling`                    | [名称マングル](https://en.wikipedia.org/wiki/Name_mangling)を無効化します。これによりパフォーマンスに影響を与えることがあり、デバッグ目的でのみ使用するべきです。                    |
| `--experimental-app-only`          | App Router のルートのみをビルドします。                                                                                                 |
| `--experimental-build-mode [mode]` | 実験的なビルドモードを使用します。 (選択肢: "compile", "generate", デフォルト: "default")                                                |

### `next start` オプション

`next start` はプロダクションモードでアプリケーションを開始します。 アプリケーションは最初に [`next build`](#next-build-options) でコンパイルされる必要があります。

`next start` コマンドで利用できるオプションは次のとおりです:

| Option                                  | Description                                                                      |
| --------------------------------------- | -------------------------------------------------------------------------------- |
| `-h` or `--help`                        | すべての利用可能なオプションを表示します。                                                                              |
| `[directory]`                           | アプリケーションを開始するディレクトリ。指定されない場合、現在のディレクトリが使用されます。                                                        |
| `-p` or `--port <port>`                 | アプリケーションを開始するポート番号を指定します。 (デフォルト: 3000, 環境変数: PORT)                                  |
| `-H` or `--hostname <hostname>`         | アプリケーションを開始するホスト名を指定します。 (デフォルト: 0.0.0.0)。                                                  |
| `--keepAliveTimeout <keepAliveTimeout>` | 非アクティブな接続を閉じる前の待機時間を最大ミリ秒で指定します。                                                          |

### `next info` オプション

`next info` は、[GitHub の問題](https://github.com/vercel/next.js/issues)を開く際に使用できる、Next.js のバグ報告に関する現在のシステムの関連情報を表示します。この情報には、オペレーティングシステムのプラットフォーム/アーキテクチャ/バージョン、バイナリ（Node.js、npm、Yarn、pnpm）、パッケージのバージョン（`next`、`react`、`react-dom`）などがあります。

出力は次のようになります:

```bash filename="Terminal"
Operating System:
  Platform: darwin
  Arch: arm64
  Version: Darwin Kernel Version 23.6.0
  Available memory (MB): 65536
  Available CPU cores: 10
Binaries:
  Node: 20.12.0
  npm: 10.5.0
  Yarn: 1.22.19
  pnpm: 9.6.0
Relevant Packages:
  next: 15.0.0-canary.115 // 利用可能な最新バージョンが検出されます (15.0.0-canary.115)
  eslint-config-next: 14.2.5
  react: 19.0.0-rc
  react-dom: 19.0.0
  typescript: 5.5.4
Next.js Config:
  output: N/A
```

`next info` コマンドで利用できるオプションは次のとおりです:

| Option           | Description                        |
| ---------------- | ---------------------------------- |
| `-h` or `--help` | すべての利用可能なオプションを表示します                 |
| `--verbose`      | デバッグ用に追加情報を収集します。 |

### `next lint` オプション

`next lint` は `pages/`、`app/`、`components/`、`lib/` 、および `src/` ディレクトリ内のすべてのファイルに対して ESLint を実行します。 ESlint がまだアプリケーション内で構成されていない場合、必要な依存関係をインストールするためのガイド付きセットアップも提供します。

`next lint` コマンドで利用できるオプションは次のとおりです:

| Option                                                | Description                                                                                                   |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| `[directory]`                                         | アプリケーションをリントする基本ディレクトリ。指定されない場合、現在のディレクトリが使用されます。                                                             |
| `-d, --dir, <dirs...>`                                | ESLint を実行するディレクトリまたはディレクトリを含めます。                                                                 |
| `--file, <files...>`                                  | ESLint を実行するファイルまたはファイルが含まれます。                                                                 |
| `--ext, [exts...]`                                    | JavaScript ファイル拡張子を指定します。 (デフォルト: [".js", ".mjs", ".cjs", ".jsx", ".ts", ".mts", ".cts", ".tsx"])       |
| `-c, --config, <config>`                              | 他のすべての構成オプションをオーバーライドするこの構成ファイルを使用します。                                                                |
| `--resolve-plugins-relative-to, <rprt>`               | プラグインを解決するディレクトリを指定します。                                                                                 |
| `--strict`                                            | Next.js の厳格構成を使用して `.eslintrc.json` ファイルを作成します。                                                                    |
| `--rulesdir, <rulesdir...>`                           | このディレクトリからの追加ルールを使用します。                                                                                   |
| `--fix`                                               | リント問題を自動的に修正します。                                                                                          |
| `--fix-type <fixType>`                                | 適用する修正の種類を指定します (例: 問題、提案、レイアウト).                                                                 |
| `--ignore-path <path>`                                | 無視するファイルを指定します。                                                                                           |
| `--no-ignore <path>`                                  | `--ignore-path` オプションを無効にします                                                                                   |
| `--quiet`                                             | エラーのみを報告します。                                                                                               |
| `--max-warnings [maxWarnings]`                        | 非ゼロの終了コードをトリガーするまでの警告の数を指定します。 (デフォルト: -1)                                                        |
| `-o, --output-file, <outputFile>`                     | 出力先のファイルを指定します。                                                                                         |
| `-f, --format, <format>`                              | 特定の出力形式を使用します。                                                                                           |
| `--no-inline-config`                                  | コメントが構成またはルールを変更するのを防ぎます。                                                                                    |
| `--report-unused-disable-directives-severity <level>` | 未使用の eslint-disable ディレクティブの重大度レベルを指定します。 (選択肢: "error", "off", "warn")                                     |
| `--no-cache`                                          | キャッシュを無効にします。                                                                                              |
| `--cache-location, <cacheLocation>`                   | キャッシュの場所を指定します。                                                                                            |
| `--cache-strategy, [cacheStrategy]`                   | キャッシュ内の変更されたファイルを検出するために使用する戦略を指定します。 (デフォルト: "metadata")                                     |
| `--error-on-unmatched-pattern`                        | 一致しないファイルパターンに対してエラーを報告します。                                                                                   |
| `-h, --help`                                          | このメッセージを表示します。                                                                                            |

### `next telemetry` オプション

Next.js は一般的な使用についての**完全に匿名の**テレメトリーデータを収集します。この匿名プログラムへの参加はオプションであり、情報を共有したくない場合はオプトアウトできます。

`next telemetry` コマンドで利用可能なオプションは次のとおりです:

| Option       | Description               |
| ------------ | ------------------------- |
| `-h, --help` | すべての利用可能なオプションを表示します。 |
| `--enable`   | Next.js のテレメトリー収集を有効にします。 |
| `--disable`  | Next.js のテレメトリー収集を無効にします。 |

[テレメトリー](/telemetry)についてさらに学びましょう。

## 例

### デフォルトのポートを変更する

デフォルトでは、Next.js は開発中と `next start` において `http://localhost:3000` を使用します。デフォルトのポートは `-p` オプションを使って変更できます。例えば:

```bash filename="Terminal"
next dev -p 4000
```

または `PORT` 環境変数を使用する:

```bash filename="Terminal"
PORT=4000 next dev
```

> **Good to know**: HTTP サーバーの起動は他のコードが初期化される前に行われるため、`PORT` は `.env` で設定できません。

### 開発中に HTTPS を使用する

Webhook や認証のような特定の使用例では、[HTTPS](https://developer.mozilla.org/en-US/docs/Glossary/HTTPS) を使用して `localhost` 上で安全な環境を持つことができます。 Next.js は `--experimental-https` フラグを使って `next dev` により自己署名証明書を生成できます:

```bash filename="Terminal"
next dev --experimental-https
```

生成された証明書を使用して、Next.js 開発サーバーは `https://localhost:3000` に存在します。ポートが `-p`、`--port` または `PORT` で指定されない限り、デフォルトのポート `3000` が使用されます。

また、`--experimental-https-key` でカスタム証明書とキーを、`--experimental-https-cert` でCA証明書を指定することもできます。

```bash filename="Terminal"
next dev --experimental-https --experimental-https-key ./certificates/localhost-key.pem --experimental-https-cert ./certificates/localhost.pem
```

`next dev --experimental-https` は開発のみに意図されており、[`mkcert`](https://github.com/FiloSottile/mkcert) によってローカルで信頼された証明書を作成します。プロダクションでは、信頼された機関から適切に発行された証明書を使用してください。

> **Good to know**: Vercel にデプロイする場合、HTTPS はあなたの Next.js アプリケーションのために[自動で設定されます](https://vercel.com/docs/security/encryption)。

### ダウンストリームプロキシ用のタイムアウトを設定する

Next.js をダウンストリームプロキシ（例: AWS ELB/ALBのようなロードバランサー）の背後にデプロイする場合、Next.js の基礎となる HTTP サーバーの[接続維持のタイムアウト](https://nodejs.org/api/http.html#http_server_keepalivetimeout)がダウンストリームプロキシのタイムアウトよりも_長い_ように設定することが重要です。そうしないと、特定のTCP接続に対して接続維持のタイムアウトに達すると、Node.jsはその接続を即座に終了し、ダウンストリームプロキシに通知しません。これにより、Node.js がすでに終了した接続を再利用しようとすると、プロキシエラーが発生します。

プロダクションの Next.js サーバーのタイムアウト値を設定するには、次のように `next start` に `--keepAliveTimeout` （ミリ秒単位）を渡します:

```bash filename="Terminal"
next start --keepAliveTimeout 70000
```

### Node.js 引数を渡す

`next` コマンドに任意の [node 引数](https://nodejs.org/api/cli.html#cli_node_options_options) を渡すことができます。 例:

```bash filename="Terminal"
NODE_OPTIONS='--throw-deprecation' next
NODE_OPTIONS='-r esm' next
NODE_OPTIONS='--inspect' next
```