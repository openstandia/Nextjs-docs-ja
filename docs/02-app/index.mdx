---
title: Appルーター
description: レイアウト、サーバーコンポーネント、サスペンスなど、Next.jsとReactの最新機能を使用してAppルーターを活用しましょう。
---

Next.jsのAppルーターは、Reactの最新機能である[サーバーコンポーネント](/docs/app/building-your-application/rendering/server-components)、[サスペンスによるストリーミング](/docs/app/building-your-application/routing/loading-ui-and-streaming#streaming-with-suspense)、および[サーバーアクション](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)を使用してアプリケーションを構築する新しいモデルを導入しています。

Appルーターを始めるには、[最初のページを作成する](/docs/app/building-your-application/routing/layouts-and-templates)から始めてください。

## よくある質問

### レイアウトでリクエストオブジェクトにアクセスするにはどうしたら良いですか？

意図的に生のリクエストオブジェクトにはアクセスできません。ただし、サーバーのみの関数を通じて[`headers`](/docs/app/api-reference/functions/headers)や[`cookies`](/docs/app/api-reference/functions/cookies)にアクセスすることはできます。クッキーを[設定する](#how-can-i-set-cookies)ことも可能です。

[レイアウト](/docs/app/building-your-application/routing/layouts-and-templates#layouts)は再レンダーされません。ページ間を移動する際の不必要な計算を避けるためにキャッシュされ再利用されます。レイアウトが生のリクエストアクセスを制限することで、Next.jsはレイアウト内で遅くまたはコストのかかるユーザーコードの実行を防ぎ、パフォーマンスへの悪影響を防ぎます。

この設計により、レイアウトの一貫性のある予測可能な動作が異なるページで保証され、開発とデバッグが簡単になります。

あなたが構築しているUIパターンに応じて、[並列ルート](/docs/app/building-your-application/routing/parallel-routes)により同じレイアウト内で複数のページをレンダリングすることが可能で、ページはルートセグメントやURL検索パラメータにアクセスできます。

### ページでURLにアクセスするにはどうしたら良いですか？

デフォルトでは、ページはサーバーコンポーネントです。指定されたページのために、[`params`](/docs/app/api-reference/file-conventions/page#params-optional)プロップを通じてルートセグメントにアクセスし、[`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional)プロップを通じてURL検索パラメータにアクセスすることができます。

クライアントコンポーネントを使用している場合、より複雑なルートのために[`usePathname`](/docs/app/api-reference/functions/use-pathname)、[`useSelectedLayoutSegment`](/docs/app/api-reference/functions/use-selected-layout-segment)、および[`useSelectedLayoutSegments`](/docs/app/api-reference/functions/use-selected-layout-segments)を使用できます。

さらに、UIパターンに応じて、[並列ルート](/docs/app/building-your-application/routing/parallel-routes)により同じレイアウト内で複数のページをレンダリングすることが可能で、ページはルートセグメントやURL検索パラメータにアクセスできます。

### サーバーコンポーネントからリダイレクトするにはどうしたら良いですか？

[`redirect`](/docs/app/api-reference/functions/redirect)を使用してページから相対または絶対URLにリダイレクトできます。[`redirect`](/docs/app/api-reference/functions/redirect)は一時的な（307）リダイレクトであり、[`permanentRedirect`](/docs/app/api-reference/functions/permanentRedirect)は永久的な（308）リダイレクトです。これらの関数をUIをストリーミングする際に使用すると、クライアント側でリダイレクトを発生させるためのメタタグを挿入します。

### Appルーターで認証を処理するにはどうしたら良いですか？

Appルーターをサポートする一般的な認証ソリューションはこちらです；

- [NextAuth.js](https://next-auth.js.org/configuration/nextjs#in-app-router)
- [Clerk](https://clerk.com/docs/quickstarts/nextjs)
- [Stack Auth](https://docs.stack-auth.com/getting-started/setup)
- [Lucia](https://lucia-auth.com/getting-started/nextjs-app)
- [Auth0](https://github.com/auth0/nextjs-auth0#app-router)
- [Stytch](https://stytch.com/docs/example-apps/frontend/nextjs)
- [Kinde](https://kinde.com/docs/developer-tools/nextjs-sdk/)
- [WorkOS](https://workos.com/docs/user-management)
- もしくはセッションまたはJWTを手動で処理する

### クッキーを設定するにはどうしたら良いですか？

[サーバーアクション](/docs/app/building-your-application/data-fetching/server-actions-and-mutations#cookies)または[ルートハンドラ](/docs/app/building-your-application/routing/route-handlers)で[`cookies`](/docs/app/api-reference/functions/cookies)関数を使用してクッキーを設定できます。

HTTPはストリーミング開始後にクッキーを設定することを許可しないため、ページまたはレイアウトから直接クッキーを設定することはできません。ただし、[ミドルウェア](/docs/app/building-your-application/routing/middleware#using-cookies)からクッキーを設定することも可能です。

### マルチテナントアプリを構築するにはどうしたら良いですか？

複数のテナントに対応する単一のNext.jsアプリケーションを構築したい場合、[構築した例](https://vercel.com/templates/next.js/platforms-starter-kit)がありますので、推奨されるアーキテクチャを参照してください。

### Appルーターキャッシュを無効にするにはどうしたら良いですか？

Next.jsにはキャッシュの層が複数あります。したがって、キャッシュの異なる部分を無効にする方法も複数あります。[詳細なキャッシング情報を学ぶ](/docs/app/building-your-application/caching)。

### Appルーターを基に構築された包括的なオープンソースアプリケーションはありますか？

はい。[Next.js Commerce](https://vercel.com/templates/next.js/nextjs-commerce)や[プラットフォームスターターキット](https://vercel.com/templates/next.js/platforms-starter-kit)をご覧ください。これはAppルーターを使用した2つの大規模なオープンソースの例です。

## 学ぶ

- [ルーティングの基礎](/docs/app/building-your-application/routing)
- [データ取得とキャッシング](/docs/app/building-your-application/data-fetching/fetching)
- [増分静的再生成](/docs/app/building-your-application/data-fetching/incremental-static-regeneration)
- [フォームとデータ変更](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)
- [キャッシング](/docs/app/building-your-application/caching)
- [レンダリングの基礎](/docs/app/building-your-application/rendering)
- [サーバーコンポーネント](/docs/app/building-your-application/rendering/server-components)
- [クライアントコンポーネント](/docs/app/building-your-application/rendering/client-components)