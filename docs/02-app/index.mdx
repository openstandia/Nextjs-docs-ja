---
title: 'App Router'
description: 'Next.jsとReactの最新機能を使用したApp Routerを使用し、Layouts、Server Components、Suspenseなどを利用してください。'
---

Next.jsのApp Routerは、[Server Components](/docs/app/building-your-application/rendering/server-components)、[Streaming with Suspense](/docs/app/building-your-application/routing/loading-ui-and-streaming#streaming-with-suspense)、そして[Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)といったReactの最新機能を使用してアプリケーションを構築するための新しいモデルを導入します。

App Routerを使用するには、[最初のページを作成する](/docs/app/building-your-application/routing/layouts-and-templates)ことから始めてください。

## よくある質問 {#frequently-asked-questions}

### レイアウトでリクエストオブジェクトにアクセスするにはどうすればよいですか？ {#how-can-i-access-the-request-object-in-a-layout}

生のリクエストオブジェクトにアクセスすることは意図的にできません。ただし、サーバー専用の関数を通じて[`headers`](/docs/app/api-reference/functions/headers)と[`cookies`](/docs/app/api-reference/functions/cookies)にアクセスできます。さらに、[クッキーを設定](/docs/app/building-your-application/routing/layouts-and-templates#how-can-i-set-cookies)することも可能です。

[Layouts](/docs/app/building-your-application/routing/layouts-and-templates#layouts)は再レンダリングしません。ページ間を移動する際の不要な計算を避けるためにキャッシュして再利用することができます。レイアウトが生のリクエストにアクセスすることを制限することで、Next.jsはレイアウト内で潜在的に遅いまたは高コストのユーザーコードが実行されるのを防ぎ、パフォーマンスに悪影響を与えるのを防ぐことができます。

この設計は異なるページでのレイアウトの一貫した予測可能な動作も保証し、開発とデバッグを簡素化します。

構築するUIパターンによっては、[Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)を使用して同じレイアウトで複数のページをレンダリングし、ページがルートセグメントおよびURL検索パラメーターにアクセスできるようにします。

### ページでURLにアクセスするにはどうすればよいですか？ {#how-can-i-access-the-url-on-a-page}

デフォルトでは、ページはServer Componentsです。指定されたページの[`params`](/docs/app/api-reference/file-conventions/page#params-optional)のpropでルートセグメントにアクセスでき、[`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional)のpropでURLの検索パラメーターにアクセスできます。

Client Componentsを使用する場合は、より複雑なルートに対して[`usePathname`](/docs/app/api-reference/functions/use-pathname)、[`useSelectedLayoutSegment`](/docs/app/api-reference/functions/use-selected-layout-segment)、および[`useSelectedLayoutSegments`](/docs/app/api-reference/functions/use-selected-layout-segments)を使用できます。

さらに、構築するUIパターンに応じて、[Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)を使用することで、同じレイアウトに複数のページをレンダリングでき、ページがルートセグメントおよびURLの検索パラメーターにアクセスできるようになります。

### Server Componentからリダイレクトするにはどうすればよいですか？ {#how-can-i-redirect-from-a-server-component}

ページから相対または絶対URLにリダイレクトするには、[`redirect`](/docs/app/api-reference/functions/redirect)を使用できます。 [`redirect`](/docs/app/api-reference/functions/redirect)は一時的な（307）リダイレクトですが、[`permanentRedirect`](/docs/app/api-reference/functions/permanentRedirect)は永続的な（308）リダイレクトです。これらの関数がUIストリーミング中に使用されると、クライアント側でリダイレクトを発生させるためにメタタグを挿入します。

### App Routerで認証を処理するにはどうすればよいですか？ {#how-can-i-handle-authentication-with-the-app-router}

App Routerをサポートする一般的な認証ソリューションは以下のとおりです：

- [NextAuth.js](https://next-auth.js.org/configuration/nextjs#in-app-router)
- [Clerk](https://clerk.com/docs/quickstarts/nextjs)
- [Stack Auth](https://docs.stack-auth.com/getting-started/setup)
- [Auth0](https://github.com/auth0/nextjs-auth0#app-router)
- [Stytch](https://stytch.com/docs/sdks/resources/nextjs)
- [Kinde](https://docs.kinde.com/developer-tools/sdks/backend/nextjs-sdk/)
- [WorkOS](https://workos.com/docs/user-management/nextjs)
- またはセッションまたはJWTを手動で処理

### クッキーを設定するにはどうすればよいですか？ {#how-can-i-set-cookies}

クッキーは、[Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations#cookies)または[Route Handlers](/docs/app/building-your-application/routing/route-handlers)で[`cookies`](/docs/app/api-reference/functions/cookies)関数を使用して設定できます。

HTTPはストリーミング開始後にクッキーを設定することを許可していないため、ページやレイアウトから直接クッキーを設定することはできません。また、クッキーを[Middleware](/docs/app/building-your-application/routing/middleware#using-cookies)から設定することもできます。

### マルチテナントアプリを構築するにはどうすればよいですか？ {#how-can-i-build-multi-tenant-apps}

複数のテナントにサービスを提供する単一のNext.jsアプリケーションを構築しようとしている場合、推奨されるアーキテクチャを示す[例](https://vercel.com/templates/next.js/platforms-starter-kit)を作成しています。

### App Routerのキャッシュを無効にするにはどうすればよいですか？ {#how-can-i-invalidate-the-app-router-cache}

Next.jsにはキャッシュの層が複数あるため、キャッシュの異なる部分を無効にする方法も複数あります。[キャッシュについて詳細を学ぶ](/docs/app/building-your-application/caching)。

### App Routerで構築された包括的なオープンソースアプリケーションはありますか？ {#are-there-any-comprehensive-open-source-applications-built-on-the-app-router}

はい。[Next.js Commerce](https://vercel.com/templates/next.js/nextjs-commerce)または[Platforms Starter Kit](https://vercel.com/templates/next.js/platforms-starter-kit)で、App Routerを使用した2つの大規模なオープンソースの例を見ることができます。

## 詳細を学ぶ {#learn-more}

- [ルーティングの基礎](/docs/app/building-your-application/routing)
- [データフェッチとキャッシング](/docs/app/building-your-application/data-fetching/fetching)
- [増分的な静的再生成](/docs/app/building-your-application/data-fetching/incremental-static-regeneration)
- [フォームとミューテーション](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)
- [キャッシング](/docs/app/building-your-application/caching)
- [レンダリングの基礎](/docs/app/building-your-application/rendering)
- [Server Components](/docs/app/building-your-application/rendering/server-components)
- [Client Components](/docs/app/building-your-application/rendering/client-components)
