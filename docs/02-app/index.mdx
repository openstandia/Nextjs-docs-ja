---
title: 'App Router'
description: 'Next.js と React の最新機能を使用して、新しい App Router を使ってみましょう。Layouts、Server Components、Suspense などが含まれます。'
---

Next.js の App Router は、[Server Components](/docs/app/building-your-application/rendering/server-components)、[Streaming with Suspense](/docs/app/building-your-application/routing/loading-ui-and-streaming#streaming-with-suspense)、[Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)など、React の最新機能を使用したアプリケーションの構築モデルを導入します。

App Router の使用を開始するには、[最初のページを作成する](/docs/app/building-your-application/routing/layouts-and-templates)を参照してください。

## よくある質問 {#frequently-asked-questions}

### レイアウトでリクエストオブジェクトにアクセスするにはどうすればよいですか？ {#how-can-i-access-the-request-object-in-a-layout}

リクエストの生オブジェクトにはアクセスできないように意図されています。ただし、[`headers`](/docs/app/api-reference/functions/headers) や [`cookies`](/docs/app/api-reference/functions/cookies) にはサーバー限定の関数を通じてアクセスできます。[cookie の設定](#how-can-i-set-cookies)も可能です。

[レイアウト](/docs/app/building-your-application/routing/layouts-and-templates#layouts) は再描画されません。それらはキャッシュされて再利用されるため、ページ間を移動する際の不要な計算を避けられます。生のリクエストへのアクセスを制限することで、Next.js はレイアウト内で潜在的に遅いまたは高コストのユーザーコードの実行を防ぎ、パフォーマンスへの悪影響を回避できます。

この設計により、さまざまなページ間でのレイアウトの一貫性が強制され、予測可能な動作が保証されるため、開発とデバッグを簡素化できます。

構築しているUIパターンに応じて、[Parallel Routes](/docs/app/building-your-application/routing/parallel-routes) を使用すると、同じレイアウト内で複数のページをレンダリングでき、ページにはルートセグメントとURL検索パラメータへのアクセスが許可されます。

### ページでURLにアクセスするにはどうすればよいですか？ {#how-can-i-access-the-url-on-a-page}

デフォルトでは、ページはServer Componentです。与えられたページの [`params`](/docs/app/api-reference/file-conventions/page#params-optional) プロップでルートセグメントに、[`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional) プロップで URL 検索パラメータにアクセスできます。

Client Componentsを使用している場合、より複雑なルートのために [`usePathname`](/docs/app/api-reference/functions/use-pathname)、[`useSelectedLayoutSegment`](/docs/app/api-reference/functions/use-selected-layout-segment)、[`useSelectedLayoutSegments`](/docs/app/api-reference/functions/use-selected-layout-segments) を使用できます。

さらに、構築している UI パターンに応じて、[Parallel Routes](/docs/app/building-your-application/routing/parallel-routes) を使用すると、同じレイアウト内で複数のページをレンダリングでき、ページがルートセグメントおよびURL検索パラメータにアクセスできるようになります。

### Server Component からリダイレクトするにはどうすればよいですか？ {#how-can-i-redirect-from-a-server-component}

ページから相対または絶対URLにリダイレクトするには、[`redirect`](/docs/app/api-reference/functions/redirect) を使用できます。[`redirect`](/docs/app/api-reference/functions/redirect) は一時的な (307) リダイレクトであり、[`permanentRedirect`](/docs/app/api-reference/functions/permanentRedirect) は永続的な (308) リダイレクトです。これらの関数がUIのストリーミング中に使用されると、クライアント側でリダイレクトを発生させるためにメタタグを挿入します。

### App Router で認証を処理するにはどうすればよいですか？ {#how-can-i-handle-authentication-with-the-app-router}

App Router をサポートする一般的な認証ソリューションは次のとおりです：

- [NextAuth.js](https://next-auth.js.org/configuration/nextjs#in-app-router)
- [Clerk](https://clerk.com/docs/quickstarts/nextjs)
- [Stack Auth](https://docs.stack-auth.com/getting-started/setup)
- [Auth0](https://github.com/auth0/nextjs-auth0#app-router)
- [Stytch](https://stytch.com/docs/sdks/resources/nextjs)
- [Kinde](https://docs.kinde.com/developer-tools/sdks/backend/nextjs-sdk/)
- [WorkOS](https://workos.com/docs/user-management/nextjs)
- または、セッションやJWTを手動で処理

### cookie を設定するにはどうすればよいですか？ {#how-can-i-set-cookies}

[cookie](/docs/app/api-reference/functions/cookies) 関数を使用して、[Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations#cookies) または [Route Handlers](/docs/app/building-your-application/routing/route-handlers) で cookie を設定できます。

HTTP はストリーミングが開始された後に cookie を設定することを許可していないため、ページやレイアウトから直接 cookie を設定することはできません。[ミドルウェア](/docs/app/building-your-application/routing/middleware#using-cookies) から cookie を設定することも可能です。

### マルチテナントアプリを構築するにはどうすればよいですか？ {#how-can-i-build-multi-tenant-apps}

複数のテナントにサービスを提供する単一の Next.js アプリケーションを構築しようとしている場合、推奨するアーキテクチャを示す[例](https://vercel.com/templates/next.js/platforms-starter-kit)を提供しています。

### App Router のキャッシュを無効化するにはどうすればよいですか？ {#how-can-i-invalidate-the-app-router-cache}

Next.js には複数のキャッシュ層があり、したがって、キャッシュの異なる部分を無効にする複数の方法があります。[キャッシュについてさらに学ぶ](/docs/app/building-your-application/caching)を参照してください。

### App Router を基に構築された包括的なオープンソースアプリケーションはありますか？ {#are-there-any-comprehensive-open-source-applications-built-on-the-app-router}

はい。[Next.js Commerce](https://vercel.com/templates/next.js/nextjs-commerce) や [Platforms Starter Kit](https://vercel.com/templates/next.js/platforms-starter-kit) を参照してください。App Router を使用した大規模なオープンソースの例です。

## もっと学ぶ {#learn-more}

- [ルーティングの基本](/docs/app/building-your-application/routing)
- [データ取得とキャッシュ](/docs/app/building-your-application/data-fetching/fetching)
- [インクリメンタルな静的生成](/docs/app/building-your-application/data-fetching/incremental-static-regeneration)
- [フォームとミューテーション](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)
- [キャッシング](/docs/app/building-your-application/caching)
- [レンダリングの基本](/docs/app/building-your-application/rendering)
- [Server Components](/docs/app/building-your-application/rendering/server-components)
- [Client Components](/docs/app/building-your-application/rendering/client-components)
