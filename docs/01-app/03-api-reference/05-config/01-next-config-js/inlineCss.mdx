---
title: 'inlineCss'
description: 'インラインCSSのサポートを有効にします。'
version: 'experimental'
---

## 使用法 {#usage}

`<head>`にCSSをインライン化するための実験的なサポート。このフラグが有効になると、通常`<link>`タグを生成する場所に`<style>`タグが生成されます。

<Tabs>
<TabItem value="ts" label="TypeScript">

```ts title="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    inlineCss: true,
  },
}

export default nextConfig
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    inlineCss: true,
  },
}

module.exports = nextConfig
```

</TabItem>
</Tabs>

## トレードオフ {#trade-offs}

### インラインCSSを使うとき {#when-to-use-inline-css}

インライン化されたCSSは、いくつかのシナリオで有益です：

- **初回訪問者**：CSSファイルはレンダーブロック資源であるため、インライン化により、初回訪問者が経験する最初のダウンロードの遅延が解消され、ページロードのパフォーマンスが向上します

- **パフォーマンス指標**：CSSファイルへの追加のネットワークリクエストを削除することで、インライン化によりFirst Contentful Paint（FCP）やLargest Contentful Paint（LCP）といった重要な指標が大幅に改善されます

- **遅い接続**：各リクエストがかなりの遅延を加える遅いネットワーク上のユーザのために、インライン化されたCSSはネットワークラウンドトリップを削減することで、顕著なパフォーマンス向上を提供します

- **アトミックCSSバンドル（例、Tailwind）**：Tailwind CSSのようなユーティリティファーストのフレームワークを使用すると、ページに必要なスタイルのサイズはデザインの複雑さに対してO(1)であることが多いです。これにより、現在のページのスタイル全体が軽量で、ページサイズに比例して増加しないため、インライン化は魅力的な選択となります。Tailwindスタイルをインライン化することで、最小限のペイロードを保証し、追加のネットワークリクエストが不要になるため、パフォーマンスをさらに向上させることができます

### インラインCSSを使わないとき {#when-not-to-use-inline-css}

インラインCSSはパフォーマンスにとって大きな利点を提供しますが、これが最適でないシナリオもあります：

- **大きなCSSバンドル**：CSSバンドルが大きすぎる場合、インライン化によってHTMLのサイズが大幅に増加し、Time to First Byte（TTFB）が遅くなり、遅い接続のユーザに対してはパフォーマンスが低下する可能性があります

- **動的またはページ固有のCSS**：非常に動的なスタイルを持つアプリケーションや、異なるCSSセットを使用するページにとって、インライン化は冗長性と膨張を招く可能性があり、すべてのページのフルCSSを繰り返しインライン化する必要があるかもしれません

- **ブラウザキャッシング**：訪問者が頻繁にサイトに戻るケースでは、外部CSSファイルによりブラウザがスタイルを効率的にキャッシュできるため、後続の訪問のデータ転送が削減されます。インラインCSSではこの利点が失われます

これらのトレードオフを慎重に評価し、クリティカルCSS抽出やハイブリッドアプローチなどと組み合わせて、サイトのニーズに合わせた最適な結果を目指してください。

> **Good to know**:
>
> この機能は現在実験的であり、以下の既知の制限があります：
>
> - CSSインライン化はグローバルに適用され、ページごとに設定することはできません
> - 初期ページロード時にスタイルが重複して適用されます - SSRのために`<style>`タグ内とRSCペイロード内に
> - 静的にレンダリングされたページに移動する際、スタイルは重複を避けるために、インラインCSSではなく`<link>`タグを使用します
> - この機能は開発モードでは利用できず、本番ビルドでのみ動作します
