---
title: 'next CLI'
description: 'Next.js CLI を使用して、アプリケーションの実行やビルド方法を学びます。'
---

{/* このドキュメントの内容は、app router と pages router で共有されています。Pages Router に特有の内容を追加する場合は、`<PagesOnly>Content</PagesOnly>` コンポーネントを使用できます。共有されるコンテンツは、コンポーネントでラップしないでください。 */}

Next.js CLI を使用すると、アプリケーションを開発、ビルド、開始することができます。

基本的な使用法：

```bash title="ターミナル"
npx next [command] [options]
```

## リファレンス {#reference}

次のオプションが利用可能です：

| オプション              | 説明                                     |
| ----------------------- | ---------------------------------------- |
| `-h` または `--help`    | すべての利用可能なオプションを表示します |
| `-v` または `--version` | Next.js のバージョン番号を出力します     |

### コマンド {#commands}

次のコマンドが利用可能です：

| コマンド                               | 説明                                                                                                                                                                                                                                                 |
| -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`dev`](#next-dev-options)             | Hot Module Reloading、エラー報告などを含む開発モードで Next.js を開始します                                                                                                                                                                          |
| [`build`](#next-build-options)         | アプリケーションの最適化されたプロダクションビルドを作成します。各ルートに関する情報を表示します                                                                                                                                                     |
| [`start`](#next-start-options)         | プロダクションモードで Next.js を開始します。アプリケーションは最初に `next build` でコンパイルする必要があります                                                                                                                                    |
| [`info`](#next-info-options)           | Next.js のバグを報告するために使用できる現在のシステムに関する関連詳細を出力します                                                                                                                                                                   |
| [`lint`](#next-lint-options)           | `/src`、`/app`、`/pages`、`/components`、`/lib` ディレクトリ内のすべてのファイルに対して ESLint を実行します。また、 ESLint がアプリケーションでまだ構成されていない場合に、必要な依存関係をインストールするためのガイド付きセットアップも提供します |
| [`telemetry`](#next-telemetry-options) | Next.js の完全に匿名化されたテレメトリー収集を有効または無効にします                                                                                                                                                                                 |

> **Good to know**: コマンドなしで `next` を実行すると、`next dev` のエイリアスになります。

### `next dev` オプション {#next-dev-options}

`next dev` は、Hot Module Reloading (HMR)、エラー報告などを含む開発モードでアプリケーションを開始します。`next dev` を実行するときに次のオプションが利用可能です：

| オプション                               | 説明                                                                                                                                            |
| ---------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| `-h, --help`                             | すべての利用可能なオプションを表示します。                                                                                                      |
| `[directory]`                            | アプリケーションをビルドするディレクトリを指定します。指定されていない場合は、現在のディレクトリが使用されます。                                |
| `--turbopack`                            | [Turbopack](/docs/app/api-reference/turbopack) を使用して開発モードを開始します。                                                               |
| `-p` または `--port <port>`              | アプリケーションを開始するポート番号を指定します。デフォルト: 3000, env: PORT                                                                   |
| `-H` または `--hostname <hostname>`      | アプリケーションを開始するホスト名を指定します。ネットワーク上の他のデバイスでアプリケーションを利用可能にするのに便利です。デフォルト: 0.0.0.0 |
| `--experimental-https`                   | HTTPS でサーバーを開始し、自己署名証明書を生成します。                                                                                          |
| `--experimental-https-key <path>`        | HTTPS キーファイルへのパスを指定します。                                                                                                        |
| `--experimental-https-cert <path>`       | HTTPS 証明書ファイルへのパスを指定します。                                                                                                      |
| `--experimental-https-ca <path>`         | HTTPS 証明書機関ファイルへのパスを指定します。                                                                                                  |
| `--experimental-upload-trace <traceUrl>` | リモート HTTP URL にデバッグトレースのサブセットを報告します。                                                                                  |

### `next build` オプション {#next-build-options}

`next build` は、アプリケーションの最適化されたプロダクションビルドを作成します。出力結果は各ルートに関する情報を表示します。例：

```bash title="ターミナル"
Route (app)                              Size     First Load JS
┌ ○ /_not-found                          0 B               0 kB
└ ƒ /products/[id]                       0 B               0 kB

○  (Static)   静的コンテンツとして事前レンダリング
ƒ  (Dynamic)  必要に応じてサーバーレンダリング
```

- **Size**: ページをクライアント側で表示する際にダウンロードされるアセットのサイズです。各ルートのサイズはその依存関係のみを含みます
- **First Load JS**: サーバーからページを訪れる際にダウンロードされるアセットのサイズです。全体で共有される JS の量は別のメトリックとして表示されます

これらの値は[**gzip で圧縮されています**](/docs/app/api-reference/config/next-config-js/compress)。最初の読み込みは緑、黄色、または赤で表示されます。パフォーマンスの高いアプリケーションを目指すには緑色を目指しましょう。

`next build` コマンドには次のオプションがあります：

| オプション                         | 説明                                                                                                                                                           |
| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `-h, --help`                       | すべての利用可能なオプションを表示します。                                                                                                                     |
| `[directory]`                      | アプリケーションをビルドするディレクトリ。指定されていない場合は、現在のディレクトリが使用されます。                                                           |
| `-d` または `--debug`              | さらに詳細なビルド出力を有効にします。このフラグを有効にすると、リライト、リダイレクト、ヘッダーなどが追加でビルド出力されます。                               |
|                                    |
| `--profile`                        | プロダクションでの [React のプロファイリング](https://react.dev/reference/react/Profiler) を有効にします。                                                     |
| `--no-lint`                        | リンティングを無効にします。                                                                                                                                   |
| `--no-mangling`                    | [マングリング](https://en.wikipedia.org/wiki/Name_mangling) を無効にします。パフォーマンスに影響を与える可能性があるため、デバッグ用途のみで使用するべきです。 |
| `--experimental-app-only`          | App Router ルートのみをビルドします。                                                                                                                          |
| `--experimental-build-mode [mode]` | 実験的なビルドモードを使用します。 (選択肢: "compile", "generate", デフォルト: "default")                                                                      |

### `next start` オプション {#next-start-options}

`next start` は、プロダクションモードでアプリケーションを開始します。アプリケーションは最初に [`next build`](#next-build-options) でコンパイルする必要があります。

`next start` コマンドには次のオプションがあります：

| オプション                              | 説明                                                                                               |
| --------------------------------------- | -------------------------------------------------------------------------------------------------- |
| `-h` または `--help`                    | すべての利用可能なオプションを表示します。                                                         |
| `[directory]`                           | アプリケーションを開始するディレクトリ。指定されていない場合は、現在のディレクトリが使用されます。 |
| `-p` または `--port <port>`             | アプリケーションを開始するポート番号を指定します。 (デフォルト: 3000, 環境: PORT)                  |
| `-H` または `--hostname <hostname>`     | アプリケーションを開始するホスト名を指定します (デフォルト: 0.0.0.0)。                             |
| `--keepAliveTimeout <keepAliveTimeout>` | アイドル状態の接続を閉じる前に待機する最大ミリ秒数を指定します。                                   |

### `next info` オプション {#next-info-options}

`next info` は、[GitHub issue](https://github.com/vercel/next.js/issues) を作成するときに使用できる、Next.js のバグに関する現在のシステムに関する関連詳細を出力します。この情報には、オペレーティングシステムのプラットフォーム/アーチ/バージョン、バイナリ（Node.js、npm、Yarn、pnpm）、パッケージのバージョン（`next`、`react`、`react-dom` など）などが含まれます。

出力は次のようになります：

```bash title="ターミナル"
Operating System:
  Platform: darwin
  Arch: arm64
  Version: Darwin Kernel Version 23.6.0
  Available memory (MB): 65536
  Available CPU cores: 10
Binaries:
  Node: 20.12.0
  npm: 10.5.0
  Yarn: 1.22.19
  pnpm: 9.6.0
Relevant Packages:
  next: 15.0.0-canary.115 // 最新バージョンが検出されました (15.0.0-canary.115)。
  eslint-config-next: 14.2.5
  react: 19.0.0-rc
  react-dom: 19.0.0
  typescript: 5.5.4
Next.js Config:
  output: N/A
```

`next info` コマンドには次のオプションがあります：

| オプション           | 説明                                     |
| -------------------- | ---------------------------------------- |
| `-h` または `--help` | すべての利用可能なオプションを表示します |
| `--verbose`          | デバッグ用に追加情報を収集します。       |

### `next lint` オプション {#next-lint-options}

`next lint` は、`pages/`、`app/`、`components/`、`lib/`、および `src/` ディレクトリ内のすべてのファイルに対して ESLint によるリンティングを実行します。また、ESLint がアプリケーションでまだ構成されていない場合に、必要な依存関係をインストールするためのガイド付きセットアップも提供します。

`next lint` コマンドに利用できるオプションは次の通りです：

| オプション                                            | 説明                                                                                                                     |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| `[directory]`                                         | アプリケーションに対してリンティングを行うベースディレクトリ。指定されていない場合は、現在のディレクトリが使用されます。 |
| `-d, --dir, <dirs...>`                                | ESLint を実行するディレクトリまたはディレクトリの一覧を含めます。                                                        |
| `--file, <files...>`                                  | ESLint を実行するファイルまたはファイルの一覧を含めます。                                                                |
| `--ext, [exts...]`                                    | JavaScript ファイルの拡張子を指定します。 (デフォルト: [".js", ".mjs", ".cjs", ".jsx", ".ts", ".mts", ".cts", ".tsx"])   |
| `-c, --config, <config>`                              | すべての他の設定オプションをオーバーライドするためにこの設定ファイルを使用します。                                       |
| `--resolve-plugins-relative-to, <rprt>`               | プラグインが解決されるディレクトリを指定します。                                                                         |
| `--strict`                                            | Next.js 厳密設定を使用して `.eslintrc.json` ファイルを作成します。                                                       |
| `--rulesdir, <rulesdir...>`                           | このディレクトリの追加ルールを使用します。                                                                               |
| `--fix`                                               | リンティングの問題を自動的に修正します。                                                                                 |
| `--fix-type <fixType>`                                | 適用する修正の種類を指定します (例：問題、提案、レイアウト)。                                                            |
| `--ignore-path <path>`                                | 無視するファイルを指定します。                                                                                           |
| `--no-ignore <path>`                                  | `--ignore-path` オプションを無効にします。                                                                               |
| `--quiet`                                             | エラーのみを報告します。                                                                                                 |
| `--max-warnings [maxWarnings]`                        | 非ゼロの終了コードをトリガーするまでの警告の数を指定します (デフォルト: -1)                                              |
| `-o, --output-file, <outputFile>`                     | レポートを書き出すファイルを指定します。                                                                                 |
| `-f, --format, <format>`                              | 特定の出力フォーマットを使用します。                                                                                     |
| `--no-inline-config`                                  | コメントが設定やルールを変更することを防ぎます。                                                                         |
| `--report-unused-disable-directives-severity <level>` | 未使用の eslint-disable ディレクティブに対する深刻度レベルを指定します (選択肢: "error", "off", "warn")                  |
| `--no-cache`                                          | キャッシュを無効にします。                                                                                               |
| `--cache-location, <cacheLocation>`                   | キャッシュの場所を指定します。                                                                                           |
| `--cache-strategy, [cacheStrategy]`                   | キャッシュされたファイルの変更を検出するために使用する戦略を指定します (デフォルト: "metadata")                          |
| `--error-on-unmatched-pattern`                        | マッチしていないファイルパターンがある場合にエラーを報告します。                                                         |
| `-h, --help`                                          | このメッセージを表示します。                                                                                             |

### `next telemetry` オプション {#next-telemetry-options}

Next.js は、一般的な使用に関する**完全に匿名**のテレメトリーデータを収集します。この匿名プログラムへの参加は任意であり、情報を共有したくない場合はオプトアウトすることができます。

`next telemetry` コマンドに利用できるオプションは次のとおりです：

| オプション   | 説明                                       |
| ------------ | ------------------------------------------ |
| `-h, --help` | すべての利用可能なオプションを表示します。 |
| `--enable`   | Next.js のテレメトリー収集を有効にします。 |
| `--disable`  | Next.js のテレメトリー収集を無効にします。 |

[テレメトリーについて詳しく学ぶ](https://nextjs.org/telemetry)

## 例 {#examples}

### デフォルトポートの変更 {#changing-the-default-port}

デフォルトでは、Next.js は開発中および `next start` で `http://localhost:3000` を使用します。デフォルトポートは `-p` オプションで変更できます：

```bash title="ターミナル"
next dev -p 4000
```

または、`PORT` 環境変数を使用します：

```bash title="ターミナル"
PORT=4000 next dev
```

> **Good to know**: `PORT` は `.env` に設定できません。HTTP サーバーの起動は他のコードが初期化される前に行われるためです。

### 開発中に HTTPS を使用する {#using-https-during-development}

Webhook や認証などの特定のユースケースでは、`localhost` 上でセキュアな環境を実現するために [HTTPS](https://developer.mozilla.org/en-US/docs/Glossary/HTTPS) を使用できます。Next.js は、`next dev` を `--experimental-https` フラグ付きで使用することで自己署名証明書を生成できます：

```bash title="ターミナル"
next dev --experimental-https
```

生成された証明書を使用して、Next.js 開発サーバーは `https://localhost:3000` に存在します。ポートが `-p`、`--port` または `PORT` で指定されない限り、デフォルトポート `3000` が使用されます。

カスタムの証明書とキーを `--experimental-https-key` と `--experimental-https-cert` を使用して提供することもできます。オプションで `--experimental-https-ca` にカスタム CA 証明書を提供することもできます。

```bash title="ターミナル"
next dev --experimental-https --experimental-https-key ./certificates/localhost-key.pem --experimental-https-cert ./certificates/localhost.pem
```

`next dev --experimental-https` は開発のためのみに使用され、[`mkcert`](https://github.com/FiloSottile/mkcert) を使用してローカルで信頼される証明書を作成します。プロダクションでは、信頼できる機関から適切に発行された証明書を使用してください。

> **Good to know**: Vercel にデプロイする際に、Next.js アプリケーションの HTTPS は[自動的に設定されます](https://vercel.com/docs/security/encryption)。

### 下流プロキシのタイムアウトを設定する {#configuring-a-timeout-for-downstream-proxies}

Next.js を下流プロキシ (例：AWS ELB/ALB などのロードバランサ) の背後にデプロイする場合、Next の基盤となる HTTP サーバーの[キープアライブタイムアウト](https://nodejs.org/api/http.html#http_server_keepalivetimeout)を下流プロキシのタイムアウトよりも*長く*設定することが重要です。そうしないと、特定の TCP 接続のキープアライブタイムアウトに達すると、Node.js はその接続をすぐに終了し、下流プロキシに通知しません。これにより、Node.js がすでに終了した接続を再利用しようとするとプロキシエラーが発生します。

プロダクション Next.js サーバーのタイムアウト値を設定するには、`--keepAliveTimeout` (ミリ秒単位) を `next start` に渡します：

```bash title="ターミナル"
next start --keepAliveTimeout 70000
```

### Node.js の引数を渡す {#passing-node-js-arguments}

`next` コマンドに任意の [node 引数](https://nodejs.org/api/cli.html#cli_node_options_options) を渡すことができます。例：

```bash title="ターミナル"
NODE_OPTIONS='--throw-deprecation' next
NODE_OPTIONS='-r esm' next
NODE_OPTIONS='--inspect' next
```
