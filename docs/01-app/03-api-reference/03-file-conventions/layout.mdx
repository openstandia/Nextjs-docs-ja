---
title: 'layout.js'
description: 'layout.jsファイルのAPIリファレンス。'
---

`layout` ファイルはNext.jsアプリケーション内でレイアウトを定義するために使用されます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return <section>{children}</section>
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
export default function DashboardLayout({ children }) {
  return <section>{children}</section>
}
```

</TabItem>
</Tabs>

**root レイアウト**は、root の `app` ディレクトリ内の最上位のレイアウトです。これは、`<html>` および `<body>` タグと、他のグローバルに共有されるUIを定義するために使用されます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

## リファレンス {#reference}

### Props {#props}

#### `children` (必須) {#children-required}

レイアウトコンポーネントは `children` prop を受け入れ、使用する必要があります。レンダリング中に、`children` はそのレイアウトがラップしているルートセグメントで満たされます。これらは主に子の[レイアウト](/docs/app/building-your-application/routing/pages)（存在する場合）または[ページ](/docs/app/building-your-application/routing/pages)のコンポーネントになりますが、[ロード中](/docs/app/building-your-application/routing/loading-ui-and-streaming)や[エラー](/docs/app/building-your-application/routing/error-handling)などの、他の特殊なファイルである場合もあります。

#### `params` (オプション) {#params-optional}

ルートセグメントからそのレイアウトまでの[動的ルートパラメータ](/docs/app/building-your-application/routing/dynamic-routes)オブジェクトを含むオブジェクトに解決されるPromise。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/[team]/layout.tsx" switcher
export default async function Layout({
  params,
}: {
  params: Promise<{ team: string }>
}) {
  const team = (await params).team
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/[team]/layout.js" switcher
export default async function Layout({ params }) {
  const team = (await params).team
}
```

</TabItem>
</Tabs>

| Routeの例                         | URL            | `params`                           |
| --------------------------------- | -------------- | ---------------------------------- |
| `app/dashboard/[team]/layout.js`  | `/dashboard/1` | `Promise<{ team: '1' }>`           |
| `app/shop/[tag]/[item]/layout.js` | `/shop/1/2`    | `Promise<{ tag: '1', item: '2' }>` |
| `app/blog/[...slug]/layout.js`    | `/blog/1/2`    | `Promise<{ slug: ['1', '2'] }>`    |

- `params` propはPromiseであるため、その値にアクセスするには`async/await`またはReactの[`use`](https://react.dev/reference/react/use)関数を使用する必要があります。
  - バージョン14以前では、`params` は同期的なpropでした。後方互換性を助けるため、Next.js 15でもまだ同期的にアクセスできますが、この動作は将来非推奨になります。

### Root レイアウト {#root-layouts}

`app` ディレクトリには、root の `app/layout.js` が**必ず**含まれている必要があります。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html>
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
export default function RootLayout({ children }) {
  return (
    <html>
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

- root レイアウトは`<html>`および`<body>`タグを**必ず**定義する必要があります。
  - root レイアウトに`<title>`や`<meta>`のような`<head>`タグを手動で追加してはいけません。その代わりに、ストリーミングや`<head>`要素の重複を自動で処理する[メタデータAPI](/docs/app/building-your-application/optimizing/metadata)を使用すべきです。
- 複数のroot レイアウトを作成するために[ルートグループ](/docs/app/building-your-application/routing/route-groups)を使用できます。
  - **複数のroot レイアウトを跨ぐ**ナビゲーションは**完全なページ読み込み**を引き起こします（クライアントサイドのナビゲーションとは対照的に）。たとえば、`app/(shop)/layout.js`を使用している`/cart`から`app/(marketing)/layout.js`を使用している`/blog`へナビゲーションすると、完全なページ読み込みが発生します。これは**唯一**複数のroot レイアウトに適用されます。

## 注意事項 {#caveats}

### レイアウトは`searchParams`を受け取らない {#layouts-do-not-receive-searchparams}

[ページ](/docs/app/api-reference/file-conventions/page)とは異なり、レイアウトコンポーネントは`searchParams` propを**受け取りません**。これは、共有レイアウトが[ナビゲーション中に再レンダリングされない](/docs/app/building-your-application/routing/linking-and-navigating#4-partial-rendering)ため、ナビゲーション間で`searchParams`が古くなる可能性があるからです。

クライアントサイドナビゲーションを利用する場合、Next.jsは自動的に2つのルート間の共通レイアウト以下のページの部分のみをレンダリングします。

たとえば、次のディレクトリ構造で、`dashboard/layout.tsx`は`/dashboard/settings`と`/dashboard/analytics`の両方に共通のレイアウトです：

<Image
  alt="ファイル構造例：dashboardフォルダにlayout.tsxファイルがあり、settingsとanalyticsフォルダにはそれぞれ独自のページがあります"
  srcLight="/docs/light/shared-dashboard-layout.png"
  srcDark="/docs/dark/shared-dashboard-layout.png"
  width="1600"
  height="687"
/>

`/dashboard/settings`から`/dashboard/analytics`へナビゲーションする際、`/dashboard/analytics`の`page.tsx`はサーバー上で再レンダリングされますが、`dashboard/layout.tsx`は2つのルートに共通のUIであるため再レンダリングされません。

このパフォーマンスの最適化により、共通のレイアウトを共有するページ間のナビゲーションが高速化されます。これは、ページのデータフェッチとレンダリングのみを実行する必要があり、独自のデータをフェッチする共有レイアウトを含むルート全体を実行する必要がないからです。

`dashboard/layout.tsx`が再レンダリングされないため、ナビゲーション後にレイアウトのServer Component内の`searchParams` propが**古くなる**可能性があります。

代わりに、ページの[`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional) propまたはクライアントコンポーネント内の[`useSearchParams`](/docs/app/api-reference/functions/use-search-params)フックを使用してください。これにより、クライアントで最新の`searchParams`で再レンダリングされます。

### レイアウトは`pathname`にアクセスできない {#layouts-cannot-access-pathname}

レイアウトは`pathname`にアクセスできません。レイアウトはデフォルトでサーバーコンポーネントであり、[クライアントサイドナビゲーション中に再レンダリングされません](/docs/app/building-your-application/routing/linking-and-navigating#4-partial-rendering)。これにより、ナビゲーション間で`pathname`が古くなり得るからです。古くならないようにするには、Next.jsがルートのすべてのセグメントを再フェッチする必要がありますが、これによりキャッシングの利点が失われ、ナビゲーション時の[RSCペイロード](/docs/app/building-your-application/rendering/server-components#what-is-the-react-server-component-payload-rsc)サイズが増加します。

代わりに、`pathname`に依存するロジックをクライアントコンポーネントに抽出して、レイアウトにインポートすることができます。クライアントコンポーネントはナビゲーション中に再レンダリングされますが再フェッチされないため、次のようなNext.jsフックを使用して、現在の`pathname`にアクセスし、古くならないようにすることが可能です：[`usePathname`](https://nextjs.org/docs/app/api-reference/functions/use-pathname)。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
import { ClientComponent } from '@/app/ui/ClientComponent'

export default function Layout({ children }: { children: React.ReactNode }) {
  return (
    <>
      <ClientComponent />
      {/* 他のレイアウトUI */}
      <main>{children}</main>
    </>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
import { ClientComponent } from '@/app/ui/ClientComponent'

export default function Layout({ children }) {
  return (
    <>
      <ClientComponent />
      {/* 他のレイアウトUI */}
      <main>{children}</main>
    </>
  )
}
```

</TabItem>
</Tabs>

共通の`pathname`パターンは[`params`](#params-optional) prop で実装することもできます。

詳細については[例](/docs/app/building-your-application/routing/layouts-and-templates#examples)セクションを参照してください。

## 例 {#examples}

### `params` に基づいてコンテンツを表示する {#displaying-content-based-on-params}

[動的ルートセグメント](/docs/app/building-your-application/routing/dynamic-routes)を使用し、`params` propに基づいて特定のコンテンツを表示またはフェッチできます。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
export default async function DashboardLayout({
  children,
  params,
}: {
  children: React.ReactNode
  params: Promise<{ team: string }>
}) {
  const { team } = await params

  return (
    <section>
      <header>
        <h1>Welcome to {team}'s Dashboard</h1>
      </header>
      <main>{children}</main>
    </section>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
export default async function DashboardLayout({ children, params }) {
  const { team } = await params

  return (
    <section>
      <header>
        <h1>Welcome to {team}'s Dashboard</h1>
      </header>
      <main>{children}</main>
    </section>
  )
}
```

</TabItem>
</Tabs>

### クライアントコンポーネントで`params`を読み取る {#reading-params-in-client-components}

クライアントコンポーネント（`async` にできない）で`params`を使用するには、Reactの[`use`](https://react.dev/reference/react/use)関数を使用してPromiseを読み取ります：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/page.tsx" switcher
'use client'

import { use } from 'react'

export default function Page({
  params,
}: {
  params: Promise<{ slug: string }>
}) {
  const { slug } = use(params)
}
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="app/page.js" switcher
'use client'

import { use } from 'react'

export default function Page({ params }) {
  const { slug } = use(params)
}
```

</TabItem>
</Tabs>

## バージョン履歴 {#version-history}

| バージョン   | 変更点                                                                                                                |
| ------------ | --------------------------------------------------------------------------------------------------------------------- |
| `v15.0.0-RC` | `params` がPromiseになりました。[codemod](/docs/app/building-your-application/upgrading/codemods#150)が利用可能です。 |
| `v13.0.0`    | `layout` が導入されました。                                                                                           |
