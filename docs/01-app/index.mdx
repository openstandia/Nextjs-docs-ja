---
title: 'App Router'
description: 'Next.js の新しい App Router を使用して、Layouts、Server Components、Suspense などの最新の機能を活用しましょう。'
---

Next.js の App Router は、React の最新機能である [Server Components](/docs/app/building-your-application/rendering/server-components)、[Suspense を用いたストリーミング](/docs/app/building-your-application/routing/loading-ui-and-streaming#streaming-with-suspense)、および [Server Actions](/docs/app/building-your-application/data-fetching/server-actions-and-mutations) を活用してアプリケーションを構築するための新しいモデルを導入します。

[最初のページを作成して](/docs/app/building-your-application/routing/layouts-and-templates) App Router を始めましょう。

## よくある質問 {#frequently-asked-questions}

### レイアウトでリクエストオブジェクトにアクセスするにはどうすれば良いですか？ {#how-can-i-access-the-request-object-in-a-layout}

生のリクエストオブジェクトには意図的にアクセスできません。ただし、[`headers`](/docs/app/api-reference/functions/headers) および [`cookies`](/docs/app/api-reference/functions/cookies) にはサーバー専用関数を通じてアクセスできます。[cookies を設定する](#how-can-i-set-cookies)こともできます。

[Layouts](/docs/app/building-your-application/routing/layouts-and-templates#layouts) は再レンダリングされません。レイアウトをキャッシュして再利用し、ページ間を移動する際に不必要な計算を避けることができます。レイアウトが生のリクエストにアクセスするのを制限することで、Next.js はレイアウト内で潜在的に遅いまたは高コストなユーザーコードの実行を防ぎ、パフォーマンスに悪影響を与えるのを防げます。

この設計は、異なるページ間でのレイアウトの一貫した予測可能な動作を強制し、開発とデバッグを簡素化します。

構築しているUIパターンに応じて、[Parallel Routes](/docs/app/building-your-application/routing/parallel-routes) を使用すると、複数のページを同じレイアウトでレンダリングできます。ページはルートセグメントおよびURL検索パラメータにアクセスできます。

### ページ上でURLにアクセスするにはどうすれば良いですか？ {#how-can-i-access-the-url-on-a-page}

デフォルトでは、ページは Server Component です。特定のページのルートセグメントには[`params`](/docs/app/api-reference/file-conventions/page#params-optional) propを通じてアクセスでき、URL検索パラメータには[`searchParams`](/docs/app/api-reference/file-conventions/page#searchparams-optional) propを通じてアクセスできます。

Client Componentsを使用している場合は、[`usePathname`](/docs/app/api-reference/functions/use-pathname)、[`useSelectedLayoutSegment`](/docs/app/api-reference/functions/use-selected-layout-segment)、[`useSelectedLayoutSegments`](/docs/app/api-reference/functions/use-selected-layout-segments)を使用して、より複雑なルートに対応できます。

さらに、構築しているUIパターンに応じて、[Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)を使用すると、複数のページを同じレイアウトでレンダリングでき、ページはルートセグメントとURL検索パラメータにアクセスできます。

### Server Component からリダイレクトするにはどうすれば良いですか？ {#how-can-i-redirect-from-a-server-component}

[`redirect`](/docs/app/api-reference/functions/redirect) を使用して、ページから相対または絶対URLにリダイレクトできます。[`redirect`](/docs/app/api-reference/functions/redirect)は一時的な（307）リダイレクトであり、[`permanentRedirect`](/docs/app/api-reference/functions/permanentRedirect)は永続的な（308）リダイレクトです。これらの関数がUIのストリーミング中に使用されると、クライアント側でリダイレクトを放出するメタタグが挿入されます。

### App Router を使って認証をどのように処理すれば良いですか？ {#how-can-i-handle-authentication-with-the-app-router}

App Router をサポートする一般的な認証ソリューションには以下があります：

- [NextAuth.js](https://authjs.dev/getting-started/installation?framework=next.js)
- [Clerk](https://clerk.com/docs/quickstarts/nextjs)
- [Stack Auth](https://docs.stack-auth.com/getting-started/setup)
- [Auth0](https://github.com/auth0/nextjs-auth0#app-router)
- [Stytch](https://stytch.com/docs/sdks/resources/nextjs)
- [Kinde](https://docs.kinde.com/developer-tools/sdks/backend/nextjs-sdk/)
- [WorkOS](https://workos.com/docs/user-management/nextjs)
- または手動でセッションやJWTを処理する

### cookies を設定するにはどうすれば良いですか？ {#how-can-i-set-cookies}

[cookies を設定する](/docs/app/building-your-application/data-fetching/server-actions-and-mutations#cookies)には、[Server Actions]または[Route Handlers](/docs/app/building-your-application/routing/route-handlers)を使用します。

HTTPはストリーミングが開始された後にcookiesを設定することを許可しないため、ページやレイアウトから直接cookiesを設定することはできません。[Middleware](/docs/app/building-your-application/routing/middleware#using-cookies)からもcookiesを設定できます。

### マルチテナントアプリを作成するにはどうすれば良いですか？ {#how-can-i-build-multi-tenant-apps}

複数のテナントにサービスを提供する単一のNext.jsアプリケーションを構築したい場合は、お勧めのアーキテクチャを示す[例を作成しました](https://vercel.com/templates/next.js/platforms-starter-kit)。

### App Router のキャッシュを無効にするにはどうすれば良いですか？ {#how-can-i-invalidate-the-app-router-cache}

Next.js には複数のキャッシュレイヤーがあるため、キャッシュの異なる部分を無効にするには複数の方法があります。[キャッシュについてさらに学ぶ](/docs/app/building-your-application/caching)。

### App Router を基にした包括的なオープンソースアプリケーションはありますか？ {#are-there-any-comprehensive-open-source-applications-built-on-the-app-router}

はい。[Next.js Commerce](https://vercel.com/templates/next.js/nextjs-commerce)や [Platforms Starter Kit](https://vercel.com/templates/next.js/platforms-starter-kit)を参照することで、App Router を使った大規模なオープンソース例を見ることができます。

## 詳しく学ぶ {#learn-more}

- [ルーティングの基本](/docs/app/building-your-application/routing)
- [データ取得とキャッシング](/docs/app/building-your-application/data-fetching/fetching)
- [増分的な静的再生成](/docs/app/building-your-application/data-fetching/incremental-static-regeneration)
- [フォームとミューテーション](/docs/app/building-your-application/data-fetching/server-actions-and-mutations)
- [キャッシング](/docs/app/building-your-application/caching)
- [レンダリングの基本](/docs/app/building-your-application/rendering)
- [Server Components](/docs/app/building-your-application/rendering/server-components)
- [Client Components](/docs/app/building-your-application/rendering/client-components)
