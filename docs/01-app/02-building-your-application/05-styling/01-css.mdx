---
title: 'CSS'
nav_title: 'CSS'
description: 'Next.js アプリケーションを CSS Modules、グローバルスタイル、外部スタイルシートでスタイリングする。'
---

{/* このドキュメントの内容は、app router と pages router の間で共通です。Pages Router に特有の内容を追加するには `<PagesOnly>内容</PagesOnly>` コンポーネントを使用できます。共通の内容はコンポーネントでラップしないでください。 */}

<PagesOnly>

<details open>
  <summary>例</summary>

- [基本的なCSSの例](https://github.com/vercel/next.js/tree/canary/examples/basic-css)

</details>

</PagesOnly>

Next.js は CSS を取り扱うためのさまざまな方法をサポートしています：

- [CSS Modules](#css-modules)
- [グローバルスタイル](#global-styles)
- [外部スタイルシート](#external-stylesheets)

## CSS Modules {#css-modules}

Next.js は、`.module.css` 拡張子を用いた CSS Modules を内蔵でサポートしています。

CSS Modules は、CSS を自動的にユニークなクラス名にすることで、ローカル範囲に限定されるようにします。これにより、異なるファイルで同じクラス名を使用しても衝突することを心配する必要がありません。この特性により、CSS Modules はコンポーネントレベルの CSS を含むのに最適な方法となります。

### 例 {#example}

<AppOnly>
CSS Modules は `app` ディレクトリ内の任意のファイルにインポートできます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
import styles from './styles.module.css'

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return <section className={styles.dashboard}>{children}</section>
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
import styles from './styles.module.css'

export default function DashboardLayout({ children }) {
  return <section className={styles.dashboard}>{children}</section>
}
```

</TabItem>
</Tabs>

```css title="app/dashboard/styles.module.css"
.dashboard {
  padding: 24px;
}
```

</AppOnly>

<PagesOnly>

例えば、`components/` フォルダに再利用可能な `Button` コンポーネントを考えてみてください：

まず、次の内容を含む `components/Button.module.css` を作成します：

```css title="Button.module.css"
/*
.error {} が他の `.css` や `.module.css` ファイルと衝突することを心配する必要はありません！
*/
.error {
  color: white;
  background-color: red;
}
```

次に、上記の CSS ファイルをインポートして使用する `components/Button.js` を作成します：

```jsx title="components/Button.js"
import styles from './Button.module.css'

export function Button() {
  return (
    <button
      type="button"
      // インポートした `styles` オブジェクトのプロパティとして "error" クラスにアクセスしている点に注目してください。
      className={styles.error}
    >
      Destroy
    </button>
  )
}
```

</PagesOnly>

CSS Modules は、**`.module.css` および `.module.sass` 拡張子を持つファイルにのみ有効です**。

本番環境では、すべての CSS Module ファイルは自動的に多くの圧縮されコードが分割された `.css` ファイルに連結されます。
これらの `.css` ファイルは、アプリケーションの実行時の重要な実行パスを表しており、アプリケーションの描画に必要な最小限の CSS が読み込まれることを保証します。

## グローバルスタイル {#global-styles}

<AppOnly>
グローバルスタイルは、`app` ディレクトリ内のどのレイアウト、ページ、またはコンポーネントでもインポートできます。

> **覚えておくべきポイント**：
>
> - これは `pages` ディレクトリとは異なり、グローバルスタイルは `_app.js` ファイル内でのみインポートできます。
> - Next.js はグローバルなスタイルシートがすべてのページに適用できる場合にのみサポートします。なぜなら、Next.js は React の組み込みサポートを使用して Suspense に統合するためです。この組み込みサポートは、ルート間を移動する際にスタイルシートを削除しません。このため、グローバルスタイルよりも CSS Modules の使用を推奨します。

例えば、`app/global.css` という名前のスタイルシートを考えてみてください：

```css title="app/global.css"
body {
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
```

ルートレイアウト (`app/layout.js`) 内で、`global.css` スタイルシートをインポートし、アプリケーション内のすべてのルートにスタイルを適用します：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
// アプリケーション内のすべてのルートにこれらのスタイルが適用されます
import './global.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
// アプリケーション内のすべてのルートにこれらのスタイルが適用されます
import './global.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

</AppOnly>

<PagesOnly>

アプリケーションにスタイルシートを追加するには、`pages/_app.js` 内で CSS ファイルをインポートしてください。

例えば、次のようなスタイルシート `styles.css` を考えてみてください：

```css title="styles.css"
body {
  font-family: 'SF Pro Text', 'SF Pro Icons', 'Helvetica Neue', 'Helvetica',
    'Arial', sans-serif;
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
```

必要であれば[`pages/_app.js` ファイルを作成](https://nextjs.org/docs/canary/pages/building-your-application/routing/custom-app)してください。
次に、`styles.css` ファイルを[`インポート`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import)します。

```jsx title="pages/_app.js"
import '../styles.css'

// 新しい `pages/_app.js` ファイルでは、このデフォルトエクスポートが必要です。
export default function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

これらのスタイル (`styles.css`) はアプリケーション内のすべてのページとコンポーネントに適用されます。
スタイルシートがグローバルであるため、競合を避けるために、**[`pages/_app.js`](https://nextjs.org/docs/canary/pages/building-your-application/routing/custom-app) 内でのみインポートしてください**。

開発中、この方法でスタイルシートを表現することで、編集したらスタイルがホットリロードされるようになります。つまりアプリケーションの状態を維持できます。

本番環境では、すべての CSS ファイルが自動的に単一の圧縮された `.css` ファイルに連結されます。CSS の連結順序は `_app.js` ファイルにインポートされた順序と一致します。独自の CSS を含むインポートされた JS モジュールに注意してください；JS モジュールの CSS もインポートされた CSS ファイルと同じ順序ルールに従って連結されます。例えば：

```jsx
import '../styles.css'
// ErrorBoundary の CSS は styles.css のグローバル CSS に依存しているため、styles.css の後にインポートします。
import ErrorBoundary from '../components/ErrorBoundary'

export default function MyApp({ Component, pageProps }) {
  return (
    <ErrorBoundary>
      <Component {...pageProps} />
    </ErrorBoundary>
  )
}
```

</PagesOnly>

## 外部スタイルシート {#external-stylesheets}

<AppOnly>

外部パッケージによって公開されたスタイルシートは、`app` ディレクトリの任意の場所でインポートできます。これはコンポーネントにも含まれます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

> **覚えておくべきポイント**： 外部スタイルシートは npm パッケージから直接インポートするか、ダウンロードしてコードベースに配置する必要があります。`<link rel="stylesheet" />` は使用できません。

</AppOnly>

<PagesOnly>

Next.js は、JavaScript ファイルからの CSS ファイルのインポートを許可します。
これは、Next.js が [`import`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import) の概念を JavaScript を超えて拡張することで可能になります。

### `node_modules` からスタイルをインポートする {#import-styles-from-node-modules}

Next.js **9.5.4** 以降では、アプリケーション内の任意の場所で `node_modules` から CSS ファイルをインポートすることが許可されます。

`bootstrap` や `nprogress` のようなグローバルスタイルシートには、`pages/_app.js` 内でファイルをインポートする必要があります。
例えば：

```jsx title="pages/_app.js"
import 'bootstrap/dist/css/bootstrap.css'

export default function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

サードパーティのコンポーネントに必要な CSS をインポートする場合は、コンポーネント内で行うことができます。例えば：

```jsx title="components/example-dialog.js"
import { useState } from 'react'
import { Dialog } from '@reach/dialog'
import VisuallyHidden from '@reach/visually-hidden'
import '@reach/dialog/styles.css'

function ExampleDialog(props) {
  const [showDialog, setShowDialog] = useState(false)
  const open = () => setShowDialog(true)
  const close = () => setShowDialog(false)

  return (
    <div>
      <button onClick={open}>Open Dialog</button>
      <Dialog isOpen={showDialog} onDismiss={close}>
        <button className="close-button" onClick={close}>
          <VisuallyHidden>Close</VisuallyHidden>
          <span aria-hidden>×</span>
        </button>
        <p>Hello there. I am a dialog</p>
      </Dialog>
    </div>
  )
}
```

</PagesOnly>

<AppOnly>

## 順序と統合 {#ordering-and-merging}

Next.js は、プロダクションビルド中にスタイルシートを自動的にチャンク化（併合）することで CSS を最適化します。CSS の順序は、アプリケーションコードにスタイルシートをインポートする順序で _決定されます_。

例えば、`<BaseButton>` が `<Page>` に先にインポートされているため、 `base-button.module.css` は `page.module.css` よりも優先されます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="base-button.tsx" switcher
import styles from './base-button.module.css'

export function BaseButton() {
  return <button className={styles.primary} />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="base-button.js" switcher
import styles from './base-button.module.css'

export function BaseButton() {
  return <button className={styles.primary} />
}
```

</TabItem>
</Tabs>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="page.ts" switcher
import { BaseButton } from './base-button'
import styles from './page.module.css'

export default function Page() {
  return <BaseButton className={styles.primary} />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="page.js" switcher
import { BaseButton } from './base-button'
import styles from './page.module.css'

export default function Page() {
  return <BaseButton className={styles.primary} />
}
```

</TabItem>
</Tabs>

予測可能な順序を保つために、次のことを推奨します：

- 単一の JS/TS ファイルでのみ CSS ファイルをインポートしてください；
  - グローバルなクラス名を使用する場合、適用したい順序で同じファイル内でグローバルスタイルをインポートしてください；
- グローバルスタイルよりも CSS Modules を使用してください；
  - 一貫した命名規約を使用して CSS モジュールを命名してください。例えば、`<name>.module.css` を `<name>.tsx` よりも使用すること；
- 共有スタイルは別の共有コンポーネントに抽出してください；
- [Tailwind](/docs/app/building-your-application/styling/tailwind-css) を使用する場合は、可能であれば[Root レイアウト](/docs/app/building-your-application/routing/layouts-and-templates#root-layout-required)の上部でスタイルシートをインポートしてください；
- インポートを自動的にソートするリント/フォーマッタ（例：ESLint の [`sort-import`](https://eslint.org/docs/latest/rules/sort-imports)）はオフにしてください。これは誤って CSS に影響を与える可能性があります。CSS のインポート順序は*重要です*；

> **覚えておくべきポイント**：
>
> - CSS の順序は開発モードでは異なる動作をすることがあります。最終的な CSS の順序を確認するにはビルド (`next build`) を必ず確認してください；
> - `next.config.js` の [`cssChunking`](/docs/app/api-reference/config/next-config-js/cssChunking) オプションを使用して、CSS のチャンク化方法を制御できます；

</AppOnly>

## 追加機能 {#additional-features}

Next.js は、スタイルの追加体験を改善するための追加機能を提供しています：

- `next dev` をローカルで実行する場合、ローカルスタイルシート（グローバルもしくは CSS Modules のどちらか）は、[Fast Refresh](/docs/architecture/fast-refresh) を活用して、編集を保存すると変更が瞬時に反映されます；
- `next build` でプロダクション用にビルドする際、CSS ファイルはより少ない圧縮された `.css` ファイルにバンドルされ、スタイルを取得するためのネットワークリクエストの数を減らします；
- JavaScript を無効にした場合でも、本番ビルド（`next start`）でスタイルは読み込まれます。ただし、[Fast Refresh](/docs/architecture/fast-refresh) を有効にするために `next dev` では JavaScript が必要です；
