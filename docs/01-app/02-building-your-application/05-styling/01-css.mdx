---
title: 'CSS'
nav_title: 'CSS'
description: 'Next.js アプリケーションを CSS Modules, Global Styles, および外部スタイルシートでスタイル設定'
---

{/* このドキュメントの内容は、app routerとpages routerの間で共有されています。Pages Routerに特化した内容を追加するには、`<PagesOnly>Content</PagesOnly>` コンポーネントを使用できます。共有される内容はコンポーネントで囲まないでください。 */}

<PagesOnly>

<details open>
  <summary>例</summary>

- [基本的なCSSの例](https://github.com/vercel/next.js/tree/canary/examples/basic-css)

</details>

</PagesOnly>

Next.js は、CSSを扱う複数の方法をサポートします：

- [CSS Modules](#css-modules)
- [Global Styles](#global-styles)
- [External Stylesheets](#external-stylesheets)

## CSS Modules {#css-modules}

Next.js には `.module.css` 拡張子を使用した CSS Modules のサポートが組み込まれています。

CSS Modules は CSSをローカルスコープにし、一意のクラス名を自動的に生成します。これにより、異なるファイルで同じクラス名を使用しても衝突の心配がありません。この動作により、CSS ModulesはコンポーネントレベルのCSSを含む理想的な方法となっています。

### 例 {#example}

<AppOnly>
CSS Modulesは `app` ディレクトリの任意のファイルにインポートできます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/dashboard/layout.tsx" switcher
import styles from './styles.module.css'

export default function DashboardLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return <section className={styles.dashboard}>{children}</section>
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/dashboard/layout.js" switcher
import styles from './styles.module.css'

export default function DashboardLayout({ children }) {
  return <section className={styles.dashboard}>{children}</section>
}
```

</TabItem>
</Tabs>

```css title="app/dashboard/styles.module.css"
.dashboard {
  padding: 24px;
}
```

</AppOnly>

<PagesOnly>

例えば、`components/` フォルダに再利用可能な `Button` コンポーネントを考えてみましょう：

最初に、次の内容で `components/Button.module.css` を作成します：

```css title="Button.module.css"
/*
.error {} が他の `.css` や `.module.css` ファイルと衝突することを心配する必要はありません！
*/
.error {
  color: white;
  background-color: red;
}
```

次に、上記の CSSファイルをインポートして使用する `components/Button.js` を作成します：

```jsx title="components/Button.js"
import styles from './Button.module.css'

export function Button() {
  return (
    <button
      type="button"
      // "error" クラスはインポートされた `styles` オブジェクトのプロパティとしてアクセスされることに注意してください。
      className={styles.error}
    >
      Destroy
    </button>
  )
}
```

</PagesOnly>

CSS Modules は **`.module.css` および `.module.sass` 拡張子があるファイルにのみ適用されます**。

プロダクション環境では、すべてのCSS Moduleファイルは自動的に**多くの`minified`されコードスプリットされた**`.css`ファイルに結合されます。これらの`.css`ファイルはアプリケーション内のホットな実行パスを表し、必要最小限のCSSが読み込まれることでアプリケーションが描画されます。

## Global Styles {#global-styles}

<AppOnly>
グローバルスタイルは、`app` ディレクトリ内の任意のレイアウト、ページ、またはコンポーネントにインポートすることができます。

> **参考情報**:
>
> - これは、グローバルスタイルを `_app.js` ファイル内にのみインポートできる `pages` ディレクトリとは異なります。
> - Next.js は実際にグローバルでない限り、グローバルスタイルの使用をサポートしていません。これは、すべてのページに適用でき、アプリケーションのライフタイム中に存在できるという意味です。これは、Next.js が React の組み込みのスタイルシートサポートを使用して Suspense と統合するためです。この組み込みサポートは、ルート間を移動してもスタイルシートを削除しません。このため、グローバルスタイルよりも CSS Modules を使用することをお勧めします。

例えば、`app/global.css` という名前のスタイルシートを考えてみましょう：

```css title="app/global.css"
body {
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
```

root レイアウト (`app/layout.js`) 内で、この `global.css` スタイルシートをインポートし、アプリケーション内のすべてのルートにスタイルが適用されるようにします：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
// アプリケーション内のすべてのルートに適用されるスタイル
import './global.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
// アプリケーション内のすべてのルートに適用されるスタイル
import './global.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

</AppOnly>

<PagesOnly>

スタイルシートをアプリケーションに追加するには、`pages/_app.js` 内でCSSファイルをインポートします。

例えば、`styles.css` という名前の次のスタイルシートを考えてみましょう：

```css title="styles.css"
body {
  font-family: 'SF Pro Text', 'SF Pro Icons', 'Helvetica Neue', 'Helvetica',
    'Arial', sans-serif;
  padding: 20px 20px 60px;
  max-width: 680px;
  margin: 0 auto;
}
```

まだ存在しない場合は、[`pages/_app.js`ファイル](https://nextjs.org/docs/canary/pages/building-your-application/routing/custom-app)を作成します。
次に、[`import`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import) で `styles.css` ファイルをインポートします。

```jsx title="pages/_app.js"
import '../styles.css'

// このデフォルトエクスポートは、新しい `pages/_app.js` ファイルで必要です。
export default function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

これらのスタイル (`styles.css`) は、アプリケーション内のすべてのページとコンポーネントに適用されます。スタイルシートのグローバルな性質と衝突を避けるため、**それらを `pages/_app.js` の中にのみインポートしてください**。

開発環境では、スタイルシートをこのように表現することで、編集した際にスタイルがホットリロードされるようになり、アプリケーションの状態を保持できます。

プロダクション環境では、すべてのCSSファイルは自動的に単一の最小化された `.css` ファイルにまとめられます。CSSが連結される順序は、`_app.js` ファイルにCSSがインポートされた順序と一致します。独自のCSSを含むインポートされたJSモジュールには特に注意してください。JSモジュールのCSSは、インポートされたCSSファイルと同じ順序規則に従って連結されます。例えば：

```jsx
import '../styles.css'
// ErrorBoundary の CSS は styles.css のグローバルCSSに依存しているため、styles.css の後にインポートされます。
import ErrorBoundary from '../components/ErrorBoundary'

export default function MyApp({ Component, pageProps }) {
  return (
    <ErrorBoundary>
      <Component {...pageProps} />
    </ErrorBoundary>
  )
}
```

</PagesOnly>

## External Stylesheets {#external-stylesheets}

<AppOnly>

外部パッケージによって公開されたスタイルシートは、`app` ディレクトリのどこにでもインポート可能で、コンポーネントにもコロケーションできます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/layout.tsx" switcher
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/layout.js" switcher
import 'bootstrap/dist/css/bootstrap.css'

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body className="container">{children}</body>
    </html>
  )
}
```

</TabItem>
</Tabs>

> **参考情報**: 外部スタイルシートは、npmパッケージから直接インポートするか、ダウンロードしてコードベースと一緒に配置する必要があります。`<link rel="stylesheet" />` を使用することはできません。

</AppOnly>

<PagesOnly>

Next.js では、JavaScript ファイルから CSS ファイルをインポートすることができます。
これは Next.js が[`import`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import) の概念を JavaScript を超えて拡張するためです。

### `node_modules` からスタイルをインポートする {#import-styles-from-node-modules}

Next.js **9.5.4**以降、アプリケーション内のいずれの場所からでも `node_modules` からの CSS ファイルのインポートが許可されています。

グローバルスタイルシート用に、`bootstrap` や `nprogress` のようなファイルは `pages/_app.js` 内にインポートしてください。
例えば：

```jsx title="pages/_app.js"
import 'bootstrap/dist/css/bootstrap.css'

export default function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

サードパーティーのコンポーネントが必要とするCSSをインポートするには、コンポーネント内でそうしてください。以下は例です：

```jsx title="components/example-dialog.js"
import { useState } from 'react'
import { Dialog } from '@reach/dialog'
import VisuallyHidden from '@reach/visually-hidden'
import '@reach/dialog/styles.css'

function ExampleDialog(props) {
  const [showDialog, setShowDialog] = useState(false)
  const open = () => setShowDialog(true)
  const close = () => setShowDialog(false)

  return (
    <div>
      <button onClick={open}>Open Dialog</button>
      <Dialog isOpen={showDialog} onDismiss={close}>
        <button className="close-button" onClick={close}>
          <VisuallyHidden>Close</VisuallyHidden>
          <span aria-hidden>×</span>
        </button>
        <p>Hello there. I am a dialog</p>
      </Dialog>
    </div>
  )
}
```

</PagesOnly>

<AppOnly>

## 順序とマージ {#ordering-and-merging}

Next.js はプロダクションビルド中に CSS を最適化し、スタイルシートを自動的にチャンク化（マージ）します。 CSS の順序は、**アプリケーションコードにスタイルシートをインポートする順序によって決まります**。

例えば、`base-button.module.css` は `<Page>` 内で `<BaseButton>` が先にインポートされているため、`page.module.css` よりも先に順序付けされます：

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="base-button.tsx" switcher
import styles from './base-button.module.css'

export function BaseButton() {
  return <button className={styles.primary} />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="base-button.js" switcher
import styles from './base-button.module.css'

export function BaseButton() {
  return <button className={styles.primary} />
}
```

</TabItem>
</Tabs>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="page.ts" switcher
import { BaseButton } from './base-button'
import styles from './page.module.css'

export default function Page() {
  return <BaseButton className={styles.primary} />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="page.js" switcher
import { BaseButton } from './base-button'
import styles from './page.module.css'

export default function Page() {
  return <BaseButton className={styles.primary} />
}
```

</TabItem>
</Tabs>

予測可能な順序を維持するために、以下のことを推奨します：

- CSS ファイルは単一の JS/TS ファイルにのみインポートする
  - グローバルクラス名を使用する場合、適用したい順序で同じファイルにグローバルスタイルをインポートする
- グローバルスタイルよりも CSS Modules を優先する
  - CSS モジュールの命名規則を統一する。例えば `<name>.module.css` を `<name>.tsx` に使用する
- 共有スタイルを別の共有コンポーネントに抽出する
- [Tailwind](/docs/app/building-your-application/styling/tailwind-css) を使用している場合、できれば [Root レイアウト](/docs/app/building-your-application/routing/layouts-and-templates#root-layout-required)でファイルの最上部でスタイルシートをインポートする
- lint/formatter（例：ESLint の [`sort-import`](https://eslint.org/docs/latest/rules/sort-imports)）が自動でインポートをソートする機能をオフにする。これが CSS に影響を及ぼす可能性があるためです。CSSのインポート順序は **重要です**。

> **参考情報:**
>
> - 開発モードでは、CSSの順序が異なる動作をする可能性がありますので、最終的なCSSの順序を確認するためにビルド（`next build`）を必ず確認してください。
> - `next.config.js` の[`cssChunking`](/docs/app/api-reference/config/next-config-js/cssChunking) オプションを使用して、CSS のチャンク化方法を制御できます。

</AppOnly>

## その他の機能 {#additional-features}

Next.js はスタイルを追加する際の執筆体験を向上させるための付加機能を提供します：

- `next dev` でローカル実行時、ローカルスタイルシート（グローバルまたは CSS Modules のどちらか）は [Fast Refresh](/docs/architecture/fast-refresh) を活用して、編集されるとすぐに変更を反映します。
- `next build` でプロダクション用のビルドを行うと、CSS ファイルはより少ない数の最小化された `.css` ファイルにまとめられ、スタイルを取得するためのネットワークリクエスト数が減少します。
- JavaScript を無効にしても、プロダクションビルド (`next start`) ではスタイルは依然としてロードされます。しかし、`next dev` では [Fast Refresh](/docs/architecture/fast-refresh) を有効にするために JavaScript が必要です。
