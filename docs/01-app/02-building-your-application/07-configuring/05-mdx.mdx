---
title: 'Markdown and MDX'
nav_title: 'MDX'
description: 'Next.jsアプリでMDXを設定して使用する方法を学びます。'
---

{/* このドキュメントの内容は、app routerとpages routerの両方で共有されています。Pages Routerに固有の内容を追加するには、`<PagesOnly>Content</PagesOnly> `コンポーネントを使用できます。共有の内容はコンポーネントでラップしてはいけません。 */}

[Markdown](https://daringfireball.net/projects/markdown/syntax)はテキストをフォーマットするために使用される軽量なマークアップ言語です。プレーンテキストの構文を使用して書き、構造的に有効なHTMLに変換することができます。これは、ウェブサイトやブログのコンテンツを書くためによく使用されます。

次のように書くと...

```md
I **love** using [Next.js](https://nextjs.org/)
```

出力:

```html
<p>I <strong>love</strong> using <a href="https://nextjs.org/">Next.js</a></p>
```

[MDX](https://mdxjs.com/)は、マークダウンに[JSX](https://react.dev/learn/writing-markup-with-jsx)を直接書けるようにするマークダウンのスーパーセットです。これにより、コンテンツ内に動的なインタラクティビティを追加し、Reactコンポーネントを埋め込む強力な方法が提供されます。

Next.jsはアプリケーション内のローカルMDXコンテンツと、サーバー上で動的に取得されたリモートMDXファイルの両方をサポートできます。Next.jsプラグインは、マークダウンとReactコンポーネントをHTMLに変換する作業を行います。これは、Server Components（App Routerでデフォルト）での使用をサポートします。

> **Good to know**: 完全な動作例については、[Portfolio Starter Kit](https://vercel.com/templates/next.js/portfolio-starter-kit)テンプレートをご覧ください。

## 依存関係をインストール {#install-dependencies}

`@next/mdx`パッケージと関連パッケージは、Next.jsがマークダウンとMDXを処理できるように設定するために使用されます。**ローカルファイルからデータを取得し、 `.md`または`.mdx`拡張子のページを、`/pages`または`/app`ディレクトリに直接作成することができます。**

MDXをNext.jsでレンダリングするためにこれらのパッケージをインストールします:

```bash title="Terminal"
npm install @next/mdx @mdx-js/loader @mdx-js/react @types/mdx
```

## `next.config.mjs`を設定 {#configure-next-config-mjs}

プロジェクトのrootで `next.config.mjs` ファイルを更新し、MDXを利用するように設定します:

```js title="next.config.mjs"
import createMDX from '@next/mdx'

/** @type {import('next').NextConfig} */
const nextConfig = {
  // `pageExtensions` を設定してmarkdownとMDXファイルを含めます
  pageExtensions: ['js', 'jsx', 'md', 'mdx', 'ts', 'tsx'],
  // 必要に応じて、その他のNext.js設定を下に追加します
}

const withMDX = createMDX({
  // 必要に応じてmarkdownプラグインをここに追加します
})

// MDX設定をNext.js設定とマージ
export default withMDX(nextConfig)
```

これにより、`.md` および `.mdx` ファイルがページ、ルート、またはアプリケーションでのインポートとして機能するようになります。

## `mdx-components.tsx` ファイルを追加 {#add-an-mdx-components-tsx-file}

プロジェクトのrootに `mdx-components.tsx`（または `.js`）ファイルを作成し、グローバルMDXコンポーネントを定義します。例えば、`pages` または `app` と同じレベル、または適用可能な場合は `src` の中に。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="mdx-components.tsx" switcher
import type { MDXComponents } from 'mdx/types'

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    ...components,
  }
}
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="mdx-components.js" switcher
export function useMDXComponents(components) {
  return {
    ...components,
  }
}
```

</TabItem>
</Tabs>

> **Good to know**:
>
> - `mdx-components.tsx` は App Routerで `@next/mdx` を使用するために **必要です** 、そしてこれがないと動作しません。
> - [`mdx-components.tsx` ファイルの規約](/docs/app/api-reference/file-conventions/mdx-components)について詳しく学びます。
> - [カスタムスタイルとコンポーネントを使用する](#using-custom-styles-and-components)方法を学びます。

## MDXのレンダリング {#rendering-mdx}

Next.jsのファイルベースのルーティングを使用するか、他のページにMDXファイルをインポートすることでMDXをレンダリングできます。

### ファイルベースのルーティングを使用 {#using-file-based-routing}

ファイルベースのルーティングを使用すると、他のページと同様にMDXページを使用できます。

<AppOnly>

App Routerアプリでは、[メタデータを使用する](/docs/app/building-your-application/optimizing/metadata)ことも含まれています。

`/app` ディレクトリ内に新しいMDXページを作成します:

```txt
  my-project
  ├── app
  │   └── mdx-page
  │       └── page.(mdx/md)
  |── mdx-components.(tsx/js)
  └── package.json
```

</AppOnly>

<PagesOnly>

`/pages` ディレクトリ内に新しいMDXページを作成します:

```txt
  my-project
  |── mdx-components.(tsx/js)
  ├── pages
  │   └── mdx-page.(mdx/md)
  └── package.json
```

</PagesOnly>

これらのファイル内でMDXを使用し、さらにはReactコンポーネントを直接MDXページ内部にインポートすることもできます:

```mdx
import { MyComponent } from 'my-component'

# Welcome to my MDX page! {#welcome-to-my-mdx-page}

これは少しの**太字**と*イタリック*テキストです。

これはマークダウンのリストです:

- One
- Two
- Three

私のReactコンポーネントをチェックしてください:

<MyComponent />
```

`/mdx-page` ルートにアクセスすると、レンダリングされたMDXページが表示されるはずです。

### インポートを使用 {#using-imports}

<AppOnly>

`/app` ディレクトリ内および好きな場所にMDXファイルを作成します:

```txt
  my-project
  ├── app
  │   └── mdx-page
  │       └── page.(tsx/js)
  ├── markdown
  │   └── welcome.(mdx/md)
  |── mdx-components.(tsx/js)
  └── package.json
```

</AppOnly>

<PagesOnly>

`/pages` ディレクトリ内および好きな場所にMDXファイルを作成します:

```txt
  my-project
  ├── pages
  │   └── mdx-page.(tsx/js)
  ├── markdown
  │   └── welcome.(mdx/md)
  |── mdx-components.(tsx/js)
  └── package.json
```

</PagesOnly>

これらのファイル内でMDXを使用し、さらにはReactコンポーネントを直接MDXページ内部にインポートすることもできます:

<Tabs>
<TabItem value="mdx" label="mdx">

```mdx title="markdown/welcome.mdx" switcher
import { MyComponent } from 'my-component'

# Welcome to my MDX page! {#welcome-to-my-mdx-page}

これは少しの**太字**と*イタリック*テキストです。

これはマークダウンのリストです:

- One
- Two
- Three

私のReactコンポーネントをチェックしてください:

<MyComponent />
```

</TabItem>
</Tabs>

ページ内にMDXファイルをインポートして、コンテンツを表示します:

<AppOnly>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/mdx-page/page.tsx" switcher
import Welcome from '@/markdown/welcome.mdx'

export default function Page() {
  return <Welcome />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/mdx-page/page.js" switcher
import Welcome from '@/markdown/welcome.mdx'

export default function Page() {
  return <Welcome />
}
```

</TabItem>
</Tabs>

</AppOnly>

<PagesOnly>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="pages/mdx-page.tsx" switcher
import Welcome from '@/markdown/welcome.mdx'

export default function Page() {
  return <Welcome />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="pages/mdx-page.js" switcher
import Welcome from '@/markdown/welcome.mdx'

export default function Page() {
  return <Welcome />
}
```

</TabItem>
</Tabs>

</PagesOnly>

`/mdx-page` ルートにアクセスすると、レンダリングされたMDXページが表示されるはずです。

## カスタムスタイルとコンポーネントの使用 {#using-custom-styles-and-components}

Markdownをレンダリングする際に、ネイティブのHTML要素にマップされます。例えば、次のようにマークダウンを書くと:

```md
## This is a heading {#this-is-a-heading}

これはマークダウンのリストです:

- One
- Two
- Three
```

次のHTMLが生成されます:

```html
<h2>This is a heading</h2>

<p>これはマークダウンのリストです:</p>

<ul>
  <li>One</li>
  <li>Two</li>
  <li>Three</li>
</ul>
```

Markdownをスタイルするために、生成されたHTML要素にマップされるカスタムコンポーネントを提供できます。スタイルとコンポーネントは、グローバル、ローカル、および共有レイアウトとして実装できます。

### グローバルスタイルとコンポーネント {#global-styles-and-components}

`mdx-components.tsx` にスタイルとコンポーネントを追加すると、アプリケーション内の*すべての* MDXファイルに影響します。

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="mdx-components.tsx" switcher
import type { MDXComponents } from 'mdx/types'
import Image, { ImageProps } from 'next/image'

// このファイルでは、MDXファイルで使用するためのカスタムReactコンポーネントを提供できます
// インラインスタイル、他のライブラリのコンポーネントなど、あらゆるReactコンポーネントをインポートして使用できます

export function useMDXComponents(components: MDXComponents): MDXComponents {
  return {
    // 組み込みコンポーネントをカスタマイズできます（例: スタイリングの追加）
    h1: ({ children }) => (
      <h1 style={{ color: 'red', fontSize: '48px' }}>{children}</h1>
    ),
    img: (props) => (
      <Image
        sizes="100vw"
        style={{ width: '100%', height: 'auto' }}
        {...(props as ImageProps)}
      />
    ),
    ...components,
  }
}
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="mdx-components.js" switcher
import Image from 'next/image'

// このファイルでは、MDXファイルで使用するためのカスタムReactコンポーネントを提供できます
// インラインスタイル、他のライブラリのコンポーネントなど、あらゆるReactコンポーネントをインポートして使用できます

export function useMDXComponents(components) {
  return {
    // 組み込みコンポーネントをカスタマイズできます（例: スタイリングの追加）
    h1: ({ children }) => (
      <h1 style={{ color: 'red', fontSize: '48px' }}>{children}</h1>
    ),
    img: (props) => (
      <Image
        sizes="100vw"
        style={{ width: '100%', height: 'auto' }}
        {...props}
      />
    ),
    ...components,
  }
}
```

</TabItem>
</Tabs>

### ローカルスタイルとコンポーネント {#local-styles-and-components}

特定のページにローカルスタイルやコンポーネントを適用することで、それらをインポートしたMDXコンポーネントに渡すことができます。これにより、[グローバルスタイルおよびコンポーネント](#global-styles-and-components)とマージされ、上書きされます。

<AppOnly>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="app/mdx-page/page.tsx" switcher
import Welcome from '@/markdown/welcome.mdx'

function CustomH1({ children }) {
  return <h1 style={{ color: 'blue', fontSize: '100px' }}>{children}</h1>
}

const overrideComponents = {
  h1: CustomH1,
}

export default function Page() {
  return <Welcome components={overrideComponents} />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="app/mdx-page/page.js" switcher
import Welcome from '@/markdown/welcome.mdx'

function CustomH1({ children }) {
  return <h1 style={{ color: 'blue', fontSize: '100px' }}>{children}</h1>
}

const overrideComponents = {
  h1: CustomH1,
}

export default function Page() {
  return <Welcome components={overrideComponents} />
}
```

</TabItem>
</Tabs>

</AppOnly>

<PagesOnly>

<Tabs>
<TabItem value="tsx" label="TypeScript">

```tsx title="pages/mdx-page.tsx" switcher
import Welcome from '@/markdown/welcome.mdx'

function CustomH1({ children }) {
  return <h1 style={{ color: 'blue', fontSize: '100px' }}>{children}</h1>
}

const overrideComponents = {
  h1: CustomH1,
}

export default function Page() {
  return <Welcome components={overrideComponents} />
}
```

</TabItem>
<TabItem value="jsx" label="JavaScript">

```jsx title="pages/mdx-page.js" switcher
import Welcome from '@/markdown/welcome.mdx'

function CustomH1({ children }) {
  return <h1 style={{ color: 'blue', fontSize: '100px' }}>{children}</h1>
}

const overrideComponents = {
  h1: CustomH1,
}

export default function Page() {
  return <Welcome components={overrideComponents} />
}
```

</TabItem>
</Tabs>

</PagesOnly>

### 共有レイアウト {#shared-layouts}

<AppOnly>

MDXページ間でレイアウトを共有するために、App Routerの[組み込みレイアウトサポート](/docs/app/building-your-application/routing/layouts-and-templates#layouts)を使用できます。

<Tab>
  {' '}
  tabs are placed here to continue the AppOnly and PagesOnly sections.{' '}
</Tab>
