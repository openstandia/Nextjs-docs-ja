---
title: 'Routingの基本'
nav_title: 'Routing'
description: 'フロントエンドアプリケーションのRoutingの基本を学びましょう。'
---

すべてのアプリケーションの骨格はRoutingです。このページでは、Web用のRoutingの**基本概念**とNext.jsにおけるRoutingの処理方法を紹介します。

## 用語集 {#terminology}

まず、このドキュメントで使用される用語を紹介します。以下は簡単なリファレンスです：

<Image
  alt="コンポーネントツリーの用語"
  srcLight="/docs/light/terminology-component-tree.png"
  srcDark="/docs/dark/terminology-component-tree.png"
  width="1600"
  height="832"
/>

- **Tree:** 階層構造を視覚化するための規約。たとえば、親コンポーネントと子コンポーネントを持つコンポーネントツリーやフォルダーの構造などが該当します
- **Subtree:** 新たなroot（最初）から始まり、leaf（最後）で終わるTreeの一部
- **Root**: TreeまたはSubtreeの最初のノードで、たとえばroot レイアウトが該当します
- **Leaf:** Subtree内の子を持たないノード。URLパスの最後のセグメントなどが該当します

<Image
  alt="URL構造の用語"
  srcLight="/docs/light/terminology-url-anatomy.png"
  srcDark="/docs/dark/terminology-url-anatomy.png"
  width="1600"
  height="371"
/>

- **URL Segment:** スラッシュで区切られたURLパスの一部
- **URL Path:** ドメインの後に続くURLの一部で、セグメントで構成されている

## app router {#the-app-router}

バージョン13で、Next.jsは新しい**app router**を導入しました。これは[React Server Components](/docs/app/building-your-application/rendering/server-components)を基に構築され、共有レイアウト、ネストされたRouting、読み込み状態、エラーハンドリングなどをサポートしています。

App Routerは`app`という新しいディレクトリで動作します。`app`ディレクトリは`pages`ディレクトリとともに動作し、段階的な導入を可能にします。これにより、アプリケーションの一部のルートを新しい動作に組み込むことができる一方で、他のルートは従来の動作のために`pages`ディレクトリに保持することができます。アプリケーションが`pages`ディレクトリを使用している場合、[Pages Router](https://nextjs.org/docs/canary/pages/building-your-application/routing)ドキュメントも参照してください。

> **知っておくと便利な情報**: App RouterはPages Routerより優先されます。ディレクトリ間で同じURLパスに解決しないようにしないと、競合を防ぐためにビルド時エラーが発生します。

<Image
  alt="Next.js App Directory"
  srcLight="/docs/light/next-router-directories.png"
  srcDark="/docs/dark/next-router-directories.png"
  width="1600"
  height="444"
/>

デフォルトで、`app`内のコンポーネントは[React Server Components](/docs/app/building-your-application/rendering/server-components)です。これはパフォーマンス最適化であり、採用が容易です。また、[Client Components](/docs/app/building-your-application/rendering/client-components)を使用することもできます。

> **推奨事項：** Server Componentsに慣れていない場合は、[Server](/docs/app/building-your-application/rendering/server-components)ページをチェックしてみてください。

## フォルダーとファイルの役割 {#roles-of-folders-and-files}

Next.jsはファイルシステムベースのrouterを使用し、次のように動作します：

- **フォルダー**はルートを定義するために使用されます。ルートは、**rootフォルダー**から`page.js`ファイルを含む最終的な**leafフォルダー**までのファイルシステム階層に従ったネストされたフォルダーの単一パスです。[Defining Routes](/docs/app/building-your-application/routing/defining-routes)を参照してください
- **ファイル**は、ルートセグメントのために表示されるUIを作成するために使用されます。[special files](#file-conventions)を参照してください

## Route Segments {#route-segments}

ルート内の各フォルダーは、**route segment**を表します。各route segmentは、対応する**URLパス**の**セグメント**にマッピングされます。

<Image
  alt="ルートセグメントがURLセグメントにマップされる方法"
  srcLight="/docs/light/route-segments-to-path-segments.png"
  srcDark="/docs/dark/route-segments-to-path-segments.png"
  width="1600"
  height="594"
/>

## Nested Routes {#nested-routes}

ネストされたルートを作成するには、フォルダを互いの中にネストできます。たとえば、`app`ディレクトリに2つの新しいフォルダーをネストすることで、新しい`/dashboard/settings`ルートを追加できます。

`/dashboard/settings`ルートは3つのセグメントで構成されています：

- `/` (Root segment)
- `dashboard` (Segment)
- `settings` (Leaf segment)

## ファイルの規約 {#file-conventions}

Next.jsは、特定の動作を持つUIをネストされたルートで作成するための一連の特別なファイルを提供しています：

|                                                                                           |                                                                                                  |
| ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| [`layout`](/docs/app/building-your-application/routing/layouts-and-templates#layouts)     | セグメントとその子要素のための共有UI                                                             |
| [`page`](/docs/app/building-your-application/routing/pages)                               | ルートのユニークなUIで、ルートを公開可能にする                                                   |
| [`loading`](/docs/app/building-your-application/routing/loading-ui-and-streaming)         | セグメントとその子要素のための読み込みUI                                                         |
| [`not-found`](/docs/app/api-reference/file-conventions/not-found)                         | セグメントとその子要素のための Not found UI                                                      |
| [`error`](/docs/app/building-your-application/routing/error-handling)                     | セグメントとその子要素のためのエラーUI                                                           |
| [`global-error`](/docs/app/building-your-application/routing/error-handling)              | グローバルエラーUI                                                                               |
| [`route`](/docs/app/building-your-application/routing/route-handlers)                     | サーバーサイドAPIエンドポイント                                                                  |
| [`template`](/docs/app/building-your-application/routing/layouts-and-templates#templates) | 特化された再レンダリングされたレイアウトUI                                                       |
| [`default`](/docs/app/api-reference/file-conventions/default)                             | [Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)のフォールバックUI |

> **知っておくと便利な情報**: 特別なファイルには`.js`、`.jsx`、または`.tsx`ファイル拡張子を使用できます。

## コンポーネント階層 {#component-hierarchy}

ルートセグメントの特別なファイルで定義されたReactコンポーネントは、特定の階層でレンダリングされます：

- `layout.js`
- `template.js`
- `error.js` (React error boundary)
- `loading.js` (React suspense boundary)
- `not-found.js` (React error boundary)
- `page.js` またはネストされた`layout.js`

<Image
  alt="ファイル規約によるコンポーネント階層"
  srcLight="/docs/light/file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/file-conventions-component-hierarchy.png"
  width="1600"
  height="643"
/>

ネストされたルートでは、セグメントのコンポーネントは親セグメントのコンポーネント内にネストされます。

<Image
  alt="ネストされたファイル規約コンポーネント階層"
  srcLight="/docs/light/nested-file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/nested-file-conventions-component-hierarchy.png"
  width="1600"
  height="863"
/>

## コロケーション {#colocation}

特別なファイルに加えて、フォルダー内に自分のファイル（例：コンポーネント、スタイル、テストなど）を配置するオプションがあります。

これはフォルダーがルートを定義する一方で、公開アドレス可能なのは`page.js`または`route.js`によって返された内容のみであるためです。

<Image
  alt="コロケーションされたファイルを含むフォルダ構造の例"
  srcLight="/docs/light/project-organization-colocation.png"
  srcDark="/docs/dark/project-organization-colocation.png"
  width="1600"
  height="1011"
/>

[Project Organization and Colocation](/docs/app/getting-started/project-structure#colocation)について詳しく学ぶ

## 高度なRoutingパターン {#advanced-routing-patterns}

App Routerは、より高度なRoutingパターンを実装するための規約のセットも提供しています。これには次が含まれます：

- [Parallel Routes](/docs/app/building-your-application/routing/parallel-routes): 同じビュー内で独立してナビゲート可能な2つ以上のページを同時に表示できます。独自のサブナビゲーションを持つ分割ビューに使用できます。たとえば、ダッシュボードなど
- [Intercepting Routes](/docs/app/building-your-application/routing/intercepting-routes): ルートをインターセプトして、別のルートのコンテキストで表示することができます。現在のページのコンテキストを保持することが重要な場合に使用できます。たとえば、1つのタスクを編集しながらすべてのタスクを表示したり、フィード内の写真を拡大する場合など

これらのパターンにより、リッチでより複雑なUIを作成し、小規模なチームや個々の開発者にとって歴史的に複雑だった機能を提供できます。

## 次のステップ {#next-steps}

Now that you understand the fundamentals of routing in Next.js, follow the links below to create your first routes:
