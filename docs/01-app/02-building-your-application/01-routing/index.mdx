---
title: 'Routing Fundamentals'
nav_title: 'Routing'
description: 'フロントエンドアプリケーションのルーティングの基本を学ぶ。'
---

アプリケーションの骨格はルーティングです。このページでは、ウェブのルーティングの**基本的な概念**と、Next.jsでのルーティングの扱い方を紹介します。

## 用語解説 {#terminology}

まず、ドキュメントを通じて使用される用語を以下に示します。クイックリファレンスとしてご利用ください：

<Image
  alt="コンポーネントツリーの用語"
  srcLight="/docs/light/terminology-component-tree.png"
  srcDark="/docs/dark/terminology-component-tree.png"
  width="1600"
  height="832"
/>

- **Tree:** 階層構造を視覚化するための規約。たとえば、親と子のコンポーネントを持つコンポーネントツリー、フォルダ構造など
- **Subtree:** 新しいroot（最初）から葉（最後）までの部分ツリー
- **Root:** ツリーやsubtreeの最初のノード。たとえば、root レイアウト
- **Leaf:** 子を持たないsubtreeのノード。たとえば、URLパスの最後のセグメント

<Image
  alt="URLの構造に関する用語"
  srcLight="/docs/light/terminology-url-anatomy.png"
  srcDark="/docs/dark/terminology-url-anatomy.png"
  width="1600"
  height="371"
/>

- **URL Segment:** スラッシュで区切られたURLパスの一部
- **URL Path:** ドメインの後に来るURLの一部（セグメントで構成）

## app router {#the-app-router}

バージョン13では、Next.jsは共有レイアウト、ネストされたルーティング、読み込み中の状態、エラーハンドリングなどをサポートする新しい**App Router**を[React Server Components](/docs/app/building-your-application/rendering/server-components)を基に導入しました。

App Routerは`app`という新しいディレクトリで動作します。`app`ディレクトリは`pages`ディレクトリとともに動作し、インクリメンタルの採用を可能にします。これにより、アプリケーションの一部のルートを新しい動作に選択的に適用し、他のルートを従来の`pages`ディレクトリに保持することができます。アプリケーションが`pages`ディレクトリを使用している場合は、[Pages Router](https://nextjs.org/docs/canary/pages/building-your-application/routing)のドキュメントも確認してください。

> **Good to know**：App RouterはPages Routerより優先されます。ディレクトリを跨ぐルートが同じURLパスに解決されるべきではなく、ビルド時に競合を防ぐためにエラーが発生します。

<Image
  alt="Next.jsのAppディレクトリ"
  srcLight="/docs/light/next-router-directories.png"
  srcDark="/docs/dark/next-router-directories.png"
  width="1600"
  height="444"
/>

デフォルトでは、`app`内のコンポーネントは[React Server Components](/docs/app/building-your-application/rendering/server-components)です。これはパフォーマンス最適化であり、簡単に採用することができ、[Client Components](/docs/app/building-your-application/rendering/client-components)も使用できます。

> **おすすめ**：[Server](/docs/app/building-your-application/rendering/server-components)ページを確認してください。Server Componentsに不慣れな方におすすめです。

## フォルダとファイルの役割 {#roles-of-folders-and-files}

Next.jsはファイルシステムを基にしたルーターを使用します：

- **フォルダ**はルートを定義するために使用されます。ルートは、ファイルシステムの階層を**rootフォルダ**から`page.js`ファイルを含む最終的な**leafフォルダ**まで、ネストされたフォルダの単一のパスです。[ルートの定義](/docs/app/building-your-application/routing/defining-routes)を参照してください。
- **ファイル**は、ルートセグメントに表示されるUIを作成するために使用されます。[特別なファイル](#file-conventions)を参照してください。

## ルートセグメント {#route-segments}

ルートの各フォルダは**ルートセグメント**を表します。各ルートセグメントは、対応する**URLパス**の**セグメント**に対応します。

<Image
  alt="ルートセグメントがURLセグメントにどのようにマッピングされるか"
  srcLight="/docs/light/route-segments-to-path-segments.png"
  srcDark="/docs/dark/route-segments-to-path-segments.png"
  width="1600"
  height="594"
/>

## ネストされたルート {#nested-routes}

ネストされたルートを作成するには、フォルダを互いにネストします。たとえば、`app`ディレクトリに2つの新しいフォルダをネストすることで、新しい`/dashboard/settings`ルートを追加できます。

`/dashboard/settings`ルートは3つのセグメントで構成されています：

- `/` (Rootセグメント)
- `dashboard` (セグメント)
- `settings` (Leafセグメント)

## ファイル規約 {#file-conventions}

Next.jsは、ネストされたルートで特定の動作を持つUIを作成するための特別なファイルを提供しています：

|                                                                                           |                                                                                                  |
| ----------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ |
| [`layout`](/docs/app/building-your-application/routing/layouts-and-templates#layouts)     | セグメントとその子供のための共有UI                                                               |
| [`page`](/docs/app/building-your-application/routing/pages)                               | ルートの固有のUIでルートを外部からアクセス可能                                                   |
| [`loading`](/docs/app/building-your-application/routing/loading-ui-and-streaming)         | セグメントとその子供のためのロード中UI                                                           |
| [`not-found`](/docs/app/api-reference/file-conventions/not-found)                         | セグメントとその子供のための見つからないUI                                                       |
| [`error`](/docs/app/building-your-application/routing/error-handling)                     | セグメントとその子供のためのエラーUI                                                             |
| [`global-error`](/docs/app/building-your-application/routing/error-handling)              | グローバルエラーUI                                                                               |
| [`route`](/docs/app/building-your-application/routing/route-handlers)                     | サーバーサイドAPIエンドポイント                                                                  |
| [`template`](/docs/app/building-your-application/routing/layouts-and-templates#templates) | 特化再レンダリングされたレイアウトUI                                                             |
| [`default`](/docs/app/api-reference/file-conventions/default)                             | [Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)のフォールバックUI |

> **Good to know**：特別なファイルには`.js`、`.jsx`、または`.tsx`ファイル拡張子を使用できます。

## コンポーネント階層 {#component-hierarchy}

ルートセグメントの特別なファイルで定義されたReactコンポーネントは特定の階層でレンダリングされます：

- `layout.js`
- `template.js`
- `error.js` (Reactエラーバウンダリ)
- `loading.js` (Reactサスペンスバウンダリ)
- `not-found.js` (Reactエラーバウンダリ)
- `page.js`またはネストされた`layout.js`

<Image
  alt="ファイル規約のコンポーネント階層"
  srcLight="/docs/light/file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/file-conventions-component-hierarchy.png"
  width="1600"
  height="643"
/>

ネストされたルートでは、セグメントのコンポーネントは親セグメントのコンポーネントの**内側**にネストされます。

<Image
  alt="ネストされたファイル規約のコンポーネント階層"
  srcLight="/docs/light/nested-file-conventions-component-hierarchy.png"
  srcDark="/docs/dark/nested-file-conventions-component-hierarchy.png"
  width="1600"
  height="863"
/>

## コロケーション {#colocation}

特別なファイルに加えて、自身のファイル（例：コンポーネント、スタイル、テストなど）を`app`ディレクトリ内のフォルダに配置するオプションがあります。

これは、フォルダがルートを定義する一方で、`page.js`または`route.js`によって返されるコンテンツのみが公にアドレス可能であるためです。

<Image
  alt="コロケートされたファイルを持つフォルダ構造の例"
  srcLight="/docs/light/project-organization-colocation.png"
  srcDark="/docs/dark/project-organization-colocation.png"
  width="1600"
  height="1011"
/>

[プロジェクトの組織とコロケーション](/docs/app/getting-started/project-structure#colocation)についてさらに学びましょう。

## 高度なルーティングパターン {#advanced-routing-patterns}

App Routerは、より高度なルーティングパターンを実装するための一連の規約を提供します。これには以下が含まれます：

- [Parallel Routes](/docs/app/building-your-application/routing/parallel-routes)：同じビュー内で2つ以上のページを同時に表示し、それぞれを独立してナビゲートできるようにします。独自のサブナビゲーションを持つ分割ビューでこれを使用できます。例：ダッシュボード。
- [Intercepting Routes](/docs/app/building-your-application/routing/intercepting-routes)：ルートをインターセプトして、他のルートのコンテキストで表示できます。現在のページのコンテキストを保持することが重要な場合にこれを使用できます。例：1つのタスクを編集中にすべてのタスクを見る、フィードで写真を拡大する。

これらのパターンにより、より豊かで複雑なUIを構築でき、小規模チームや個々の開発者が従来は複雑だった機能を実装可能にします。

## 次のステップ {#next-steps}

Next.jsでのルーティングの基本が理解できたところで、以下のリンクに従い、最初のルートを作成してください：
