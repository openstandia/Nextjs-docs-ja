---
title: 'reactCompiler'
description: 'React Compiler を有効にして、コンポーネントレンダリングを自動的に最適化する'
version: 'experimental'
---

Next.js 15 は、[React Compiler](https://react.dev/learn/react-compiler) のサポートを導入しました；コンパイラは、コンポーネントのレンダリングを自動的に最適化することで、パフォーマンスを向上させます；これにより、開発者が `useMemo` や `useCallback` といった API を通じて対応しなければならない手動のメモ化の量が削減されます；

これを利用するには、Next.js 15 にアップグレードし、`babel-plugin-react-compiler` をインストールします：

```bash title="ターミナル"
npm install babel-plugin-react-compiler
```

次に、`next.config.js` に `experimental.reactCompiler` オプションを追加します：

<Tabs>
<TabItem value="ts" label="TypeScript">

```ts title="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    reactCompiler: true,
  },
}

export default nextConfig
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    reactCompiler: true,
  },
}

module.exports = nextConfig
```

</TabItem>
</Tabs>

> **Note:** React Compiler は、現在のところ Babel プラグインを通じてのみ Next.js で使用することが可能です；これにより、Next.js のデフォルトの [Rust ベースのコンパイラ](/docs/architecture/nextjs-compiler) の使用を停止することになりますが、ビルド時間が長くなる可能性があります；React Compiler をデフォルトのコンパイラとしてサポートする作業を進めています；

[React Compiler](https://react.dev/learn/react-compiler) や [Next.js の利用可能な設定オプション](https://react.dev/learn/react-compiler#usage-with-nextjs)についての詳細をご覧ください；

## Annotations {#annotations}

コンパイラを「オプトイン」モードで実行するように設定することができます：

<Tabs>
<TabItem value="ts" label="TypeScript">

```ts title="next.config.ts" switcher
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  experimental: {
    reactCompiler: {
      compilationMode: 'annotation',
    },
  },
}

export default nextConfig
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="next.config.js" switcher
/** @type {import('next').NextConfig} */
const nextConfig = {
  experimental: {
    reactCompiler: {
      compilationMode: 'annotation',
    },
  },
}

module.exports = nextConfig
```

</TabItem>
</Tabs>

その後、特定のコンポーネントやフックに React の `"use memo"` ディレクティブを使用して、オプトインすることができます：

<Tabs>
<TabItem value="ts" label="TypeScript">

```ts title="app/page.tsx" switcher
export default function Page() {
  'use memo'
  // ...
}
```

</TabItem>
<TabItem value="js" label="JavaScript">

```js title="app/page.js" switcher
export default function Page() {
  'use memo'
  // ...
}
```

</TabItem>
</Tabs>

> **Note:** 逆の効果を得るために、コンポーネントやフックをオプトアウトする `"use no memo"` ディレクティブを React から使用することもできます；
